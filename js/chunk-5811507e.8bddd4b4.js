(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5811507e"],{"0010":function(t,e,n){"use strict";n.d(e,"a",(function(){return R})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return M})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return C}));var r=n("0ac0"),o=n("304a"),i=n("5313");function a(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function s(t,e,n){var o=t.selection,a=o.$cursor;if(!a||(n?!n.endOfTextblock("backward",t):a.parentOffset>0))return!1;var s=u(a);if(!s){var l=a.blockRange(),p=l&&Object(r["k"])(l);return null!=p&&(e&&e(t.tr.lift(l,p).scrollIntoView()),!0)}var d=s.nodeBefore;if(!d.type.spec.isolating&&x(t,s,e))return!0;if(0==a.parent.content.size&&(c(d,"end")||i["c"].isSelectable(d))){if(e){var f=t.tr.deleteRange(a.before(),a.after());f.setSelection(c(d,"end")?i["f"].findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):i["c"].create(f.doc,s.pos-d.nodeSize)),e(f.scrollIntoView())}return!0}return!(!d.isAtom||s.depth!=a.depth-1)&&(e&&e(t.tr.delete(s.pos-d.nodeSize,s.pos).scrollIntoView()),!0)}function c(t,e,n){for(;t;t="start"==e?t.firstChild:t.lastChild){if(t.isTextblock)return!0;if(n&&1!=t.childCount)return!1}return!1}function l(t,e,n){var r=t.selection,o=r.$head,a=r.empty,s=o;if(!a)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;s=u(o)}var c=s&&s.nodeBefore;return!(!c||!i["c"].isSelectable(c))&&(e&&e(t.tr.setSelection(i["c"].create(t.doc,s.pos-c.nodeSize)).scrollIntoView()),!0)}function u(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function p(t,e,n){var r=t.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var a=f(o);if(!a)return!1;var s=a.nodeAfter;if(x(t,a,e))return!0;if(0==o.parent.content.size&&(c(s,"start")||i["c"].isSelectable(s))){if(e){var l=t.tr.deleteRange(o.before(),o.after());l.setSelection(c(s,"start")?i["f"].findFrom(l.doc.resolve(l.mapping.map(a.pos)),1):i["c"].create(l.doc,l.mapping.map(a.pos))),e(l.scrollIntoView())}return!0}return!(!s.isAtom||a.depth!=o.depth-1)&&(e&&e(t.tr.delete(a.pos,a.pos+s.nodeSize).scrollIntoView()),!0)}function d(t,e,n){var r=t.selection,o=r.$head,a=r.empty,s=o;if(!a)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;s=f(o)}var c=s&&s.nodeAfter;return!(!c||!i["c"].isSelectable(c))&&(e&&e(t.tr.setSelection(i["c"].create(t.doc,s.pos)).scrollIntoView()),!0)}function f(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function h(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function m(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function v(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var a=r.node(-1),s=r.indexAfter(-1),c=m(a.contentMatchAt(s));if(!a.canReplaceWith(s,s,c))return!1;if(e){var l=r.after(),u=t.tr.replaceWith(l,l,c.createAndFill());u.setSelection(i["f"].near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0}function g(t,e){var n=t.selection,r=n.$from,o=n.$to;if(n instanceof i["a"]||r.parent.inlineContent||o.parent.inlineContent)return!1;var a=m(o.parent.contentMatchAt(o.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=t.tr.insert(s,a.createAndFill());c.setSelection(i["h"].create(c.doc,s+1)),e(c.scrollIntoView())}return!0}function y(t,e){var n=t.selection,o=n.$cursor;if(!o||o.parent.content.size)return!1;if(o.depth>1&&o.after()!=o.end(-1)){var i=o.before();if(Object(r["g"])(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}var a=o.blockRange(),s=a&&Object(r["k"])(a);return null!=s&&(e&&e(t.tr.lift(a,s).scrollIntoView()),!0)}function b(t,e){var n=t.selection,o=n.$from,a=n.$to;if(t.selection instanceof i["c"]&&t.selection.node.isBlock)return!(!o.parentOffset||!Object(r["g"])(t.doc,o.pos))&&(e&&e(t.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(e){var s=a.parentOffset==a.parent.content.size,c=t.tr;(t.selection instanceof i["h"]||t.selection instanceof i["a"])&&c.deleteSelection();var l=0==o.depth?null:m(o.node(-1).contentMatchAt(o.indexAfter(-1))),u=s&&l?[{type:l}]:null,p=Object(r["g"])(c.doc,c.mapping.map(o.pos),1,u);if(u||p||!Object(r["g"])(c.doc,c.mapping.map(o.pos),1,l&&[{type:l}])||(u=[{type:l}],p=!0),p&&(c.split(c.mapping.map(o.pos),1,u),!s&&!o.parentOffset&&o.parent.type!=l)){var d=c.mapping.map(o.before()),f=c.doc.resolve(d);o.node(-1).canReplaceWith(f.index(),f.index()+1,l)&&c.setNodeMarkup(c.mapping.map(o.before()),l)}e(c.scrollIntoView())}return!0}function w(t,e){return e&&e(t.tr.setSelection(new i["a"](t.doc))),!0}function k(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,a=e.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&e.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(a,a+1)||!i.isTextblock&&!Object(r["f"])(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),!0))}function x(t,e,n){var a,s,l=e.nodeBefore,u=e.nodeAfter;if(l.type.spec.isolating||u.type.spec.isolating)return!1;if(k(t,e,n))return!0;var p=e.parent.canReplace(e.index(),e.index()+1);if(p&&(a=(s=l.contentMatchAt(l.childCount)).findWrapping(u.type))&&s.matchType(a[0]||u.type).validEnd){if(n){for(var d=e.pos+u.nodeSize,f=o["c"].empty,h=a.length-1;h>=0;h--)f=o["c"].from(a[h].create(null,f));f=o["c"].from(l.copy(f));var m=t.tr.step(new r["b"](e.pos-1,d,e.pos,d,new o["j"](f,1,0),a.length,!0)),v=d+2*a.length;Object(r["f"])(m.doc,v)&&m.join(v),n(m.scrollIntoView())}return!0}var g=i["f"].findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&Object(r["k"])(y);if(null!=b&&b>=e.depth)return n&&n(t.tr.lift(y,b).scrollIntoView()),!0;if(p&&c(u,"start",!0)&&c(l,"end")){for(var w=l,x=[];;){if(x.push(w),w.isTextblock)break;w=w.lastChild}for(var C=u,M=1;!C.isTextblock;C=C.firstChild)M++;if(w.canReplace(w.childCount,w.childCount,C.content)){if(n){for(var T=o["c"].empty,S=x.length-1;S>=0;S--)T=o["c"].from(x[S].copy(T));var O=t.tr.step(new r["b"](e.pos-x.length,e.pos+u.nodeSize,e.pos+M,e.pos+u.nodeSize-M,new o["j"](T,x.length,0),0,!0));n(O.scrollIntoView())}return!0}}return!1}function C(t,e){return function(n,o){var i=n.selection,a=i.$from,s=i.$to,c=a.blockRange(s),l=c&&Object(r["i"])(c,t,e);return!!l&&(o&&o(n.tr.wrap(c,l).scrollIntoView()),!0)}}function M(t,e){return function(n,r){var o=n.selection,i=o.from,a=o.to,s=!1;return n.doc.nodesBetween(i,a,(function(r,o){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)s=!0;else{var i=n.doc.resolve(o),a=i.index();s=i.parent.canReplaceWith(a,a+1,t)}})),!!s&&(r&&r(n.tr.setBlockType(i,a,t,e).scrollIntoView()),!0)}}function T(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,a=o.$to,s=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,a.pos,(function(t){if(s)return!1;s=t.inlineContent&&t.type.allowsMarkType(n)})),s)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}function S(t,e){return function(n,r){var o=n.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!T(n.doc,s,t))return!1;if(r)if(a)t.isInSet(n.storedMarks||a.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,l=n.tr,u=0;!c&&u<s.length;u++){var p=s[u],d=p.$from,f=p.$to;c=n.doc.rangeHasMark(d.pos,f.pos,t)}for(var h=0;h<s.length;h++){var m=s[h],v=m.$from,g=m.$to;if(c)l.removeMark(v.pos,g.pos,t);else{var y=v.pos,b=g.pos,w=v.nodeAfter,k=g.nodeBefore,x=w&&w.isText?/^\s*/.exec(w.text)[0].length:0,C=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;y+x<b&&(y+=x,b-=C),l.addMark(y,b,t.create(e))}}r(l.scrollIntoView())}return!0}}function O(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var E=O(a,s,l),N=O(a,p,d),D={Enter:O(h,g,y,b),"Mod-Enter":v,Backspace:E,"Mod-Backspace":E,"Shift-Backspace":E,Delete:N,"Mod-Delete":N,"Mod-a":w},L={"Ctrl-h":D["Backspace"],"Alt-Backspace":D["Mod-Backspace"],"Ctrl-d":D["Delete"],"Ctrl-Alt-Backspace":D["Mod-Delete"],"Alt-Delete":D["Mod-Delete"],"Alt-d":D["Mod-Delete"]};for(var I in D)L[I]=D[I];var A="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),R=A?L:D},"0ac0":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return N})),n.d(e,"h",(function(){return R})),n.d(e,"i",(function(){return M})),n.d(e,"j",(function(){return I})),n.d(e,"k",(function(){return C}));var r=n("304a"),o=65535,i=Math.pow(2,16);function a(t,e){return t+e*i}function s(t){return t&o}function c(t){return(t-(t&o))/i}var l=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},u=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};u.prototype.recover=function(t){var e=0,n=s(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+c(t)},u.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},u.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},u.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?r:0);if(c>t)break;var u=this.ranges[s+o],p=this.ranges[s+i],d=c+u;if(t<=d){var f=u?t==c?-1:t==d?1:e:e,h=c+r+(f<0?0:p);if(n)return h;var m=t==(e<0?c:d)?null:a(s/3,t-c);return new l(h,e<0?t!=c:t!=d,m)}r+=p-u}return n?t+r:new l(t+r)},u.prototype.touches=function(t,e){for(var n=0,r=s(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var l=this.ranges[a+o],u=c+l;if(t<=u&&a==3*r)return!0;n+=this.ranges[a+i]-l}return!1},u.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(a,a+c,s,s+l),o+=l-c}},u.prototype.invert=function(){return new u(this.ranges,!this.inverted)},u.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},u.offset=function(t){return 0==t?u.empty:new u(t<0?[0,-t,0]:[0,0,t])},u.empty=new u([]);var p=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function d(t){var e=Error.call(this,t);return e.__proto__=d.prototype,e}p.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new p(this.maps,this.mirror,t,e)},p.prototype.copy=function(){return new p(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},p.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},p.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},p.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},p.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},p.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},p.prototype.invert=function(){var t=new p;return t.appendMappingInverted(this),t},p.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},p.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},p.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o],a=i.mapResult(t,e);if(null!=a.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(a.recover);continue}}a.deleted&&(r=!0),t=a.pos}return n?t:new l(t,r)},d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="TransformError";var f=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new p},h={before:{configurable:!0},docChanged:{configurable:!0}};function m(){throw new Error("Override me")}h.before.get=function(){return this.docs.length?this.docs[0]:this.doc},f.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new d(e.failed);return this},f.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},h.docChanged.get=function(){return this.steps.length>0},f.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(f.prototype,h);var v=Object.create(null),g=function(){};g.prototype.apply=function(t){return m()},g.prototype.getMap=function(){return u.empty},g.prototype.invert=function(t){return m()},g.prototype.map=function(t){return m()},g.prototype.merge=function(t){return null},g.prototype.toJSON=function(){return m()},g.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=v[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},g.jsonID=function(t,e){if(t in v)throw new RangeError("Duplicate use of step JSON ID "+t);return v[t]=e,e.prototype.jsonID=t,e};var y=function(t,e){this.doc=t,this.failed=e};y.ok=function(t){return new y(t,null)},y.fail=function(t){return new y(null,t)},y.fromReplace=function(t,e,n,o){try{return y.ok(t.replace(e,n,o))}catch(i){if(i instanceof r["h"])return y.fail(i.message);throw i}};var b=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&k(t,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new u([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r["j"].empty:new r["j"](t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r["j"].empty:new r["j"](this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r["j"].fromJSON(t,n.slice),!!n.structure)},e}(g);g.jsonID("replace",b);var w=function(t){function e(e,n,r,o,i,a,s){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(k(t,this.from,this.gapFrom)||k(t,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return y.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?y.fromReplace(t,this.from,this.to,n):y.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new u([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r["j"].fromJSON(t,n.slice),n.insert,!!n.structure)},e}(g);function k(t,e,n){var r=t.resolve(e),o=n-e,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var a=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function x(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function C(t){for(var e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var o=t.$from.node(r),i=t.$from.index(r),a=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,a,n))return r;if(0==r||o.type.spec.isolating||!x(o,i,a))break}}function M(t,e,n,r){void 0===r&&(r=t);var o=S(t,e),i=o&&O(r,e);return i?o.map(T).concat({type:e,attrs:n}).concat(i.map(T)):null}function T(t){return{type:t,attrs:null}}function S(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}function O(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=a.length?a[a.length-1]:e,c=s.contentMatch,l=r;c&&l<o;l++)c=c.matchType(n.child(l).type);return c&&c.validEnd?a:null}function E(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function N(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,c=n-2;s>i;s--,c--){var l=o.node(s),u=o.index(s);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(u,l.childCount),d=r&&r[c]||l;if(d!=l&&(p=p.replaceChild(0,d.type.create(d.attrs))),!l.canReplace(u+1,l.childCount)||!d.type.validContent(p))return!1}var f=o.indexAfter(i),h=r&&r[0];return o.node(i).canReplaceWith(f,f,h?h.type:o.node(i+1).type)}function D(t,e){var n=t.resolve(e),r=n.index();return L(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function L(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function I(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&L(i,a)&&r.node(o).canReplace(s,s+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function A(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function R(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var c=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(c>0?1:0),u=r.node(s),p=!1;if(1==a)p=u.canReplace(l,l,o);else{var d=u.contentMatchAt(l).findWrapping(o.firstChild.type);p=d&&u.canReplaceWith(l,l,d[0])}if(p)return 0==c?r.pos:c<0?r.before(s+1):r.after(s+1)}return null}function P(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var a=t.child(i);a.content.size&&(a=a.copy(P(a.content,e,a))),a.isInline&&(a=e(a,n,i)),o.push(a)}return r["c"].fromArray(o)}g.jsonID("replaceAround",w),f.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,a=n.before(i+1),s=o.after(i+1),c=a,l=s,u=r["c"].empty,p=0,d=i,f=!1;d>e;d--)f||n.index(d)>0?(f=!0,u=r["c"].from(n.node(d).copy(u)),p++):c--;for(var h=r["c"].empty,m=0,v=i,g=!1;v>e;v--)g||o.after(v+1)<o.end(v)?(g=!0,h=r["c"].from(o.node(v).copy(h)),m++):l++;return this.step(new w(c,l,a,s,new r["j"](u.append(h),p,m),u.size-p,!0))},f.prototype.wrap=function(t,e){for(var n=r["c"].empty,o=e.length-1;o>=0;o--)n=r["c"].from(e[o].type.create(e[o].attrs,n));var i=t.start,a=t.end;return this.step(new w(i,a,i,a,new r["j"](n,0,0),e.length,!0))},f.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&E(i.doc,i.mapping.slice(a).map(e),n)){i.clearIncompatible(i.mapping.slice(a).map(e,1),n);var s=i.mapping.slice(a),c=s.map(e,1),l=s.map(e+t.nodeSize,1);return i.step(new w(c,l,c+1,l-1,new r["j"](r["c"].from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},f.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var a=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,a);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new w(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r["j"](r["c"].from(a),0,0),1,!0))},f.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r["c"].empty,a=r["c"].empty,s=o.depth,c=o.depth-e,l=e-1;s>c;s--,l--){i=r["c"].from(o.node(s).copy(i));var u=n&&n[l];a=r["c"].from(u?u.type.create(u.attrs,a):o.node(s).copy(a))}return this.step(new b(t,t,new r["j"](i.append(a),e,e),!0))},f.prototype.join=function(t,e){void 0===e&&(e=1);var n=new b(t-e,t+e,r["j"].empty,!0);return this.step(n)};var B=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),a=new r["j"](P(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return y.fromReplace(t,this.from,this.to,a)},e.prototype.invert=function(){return new j(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(g);g.jsonID("addMark",B);var j=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r["j"](P(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return y.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new B(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(g);function F(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r["j"].empty),e==n&&!o.size)return null;var i=t.resolve(e),a=t.resolve(n);return H(i,a,o)?new b(e,n,o):new z(i,a,o).fit()}function H(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}g.jsonID("removeMark",j),f.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,t),d=Math.min(c+r.nodeSize,e),f=n.addToSet(u),h=0;h<u.length;h++)u[h].isInSet(f)||(a&&a.to==p&&a.mark.eq(u[h])?a.to=d:o.push(a=new j(p,d,u[h])));s&&s.to==p?s.to=d:i.push(s=new B(p,d,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},f.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],a=0;return this.doc.nodesBetween(t,e,(function(o,s){if(o.isInline){a++;var c=null;if(n instanceof r["e"]){var l,u=o.marks;while(l=n.isInSet(u))(c||(c=[])).push(l),u=l.removeFromSet(u)}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var p=Math.min(s+o.nodeSize,e),d=0;d<c.length;d++){for(var f=c[d],h=void 0,m=0;m<i.length;m++){var v=i[m];v.step==a-1&&f.eq(i[m].style)&&(h=v)}h?(h.to=p,h.step=a):i.push({style:f,from:Math.max(s,t),to:p,step:a})}}})),i.forEach((function(t){return o.step(new j(t.from,t.to,t.style))})),this},f.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],a=t+1,s=0;s<o.childCount;s++){var c=o.child(s),l=a+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var p=0;p<c.marks.length;p++)e.allowsMarkType(c.marks[p].type)||this.step(new j(a,l,c.marks[p]))}else i.push(new b(a,l,r["j"].empty));a=l}if(!n.validEnd){var d=n.fillBefore(r["c"].empty,!0);this.replace(a,a,new r["j"](d,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},f.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r["j"].empty);var o=F(this.doc,t,e,n);return o&&this.step(o),this},f.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r["j"](r["c"].from(n),0,0))},f.prototype.delete=function(t,e){return this.replace(t,e,r["j"].empty)},f.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var z=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=r["c"].empty;for(var a=t.depth;a>0;a--)this.placed=r["c"].from(t.node(a).copy(this.placed))},V={depth:{configurable:!0}};function q(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(q(t.firstChild.content,e-1,n)))}function _(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(_(t.lastChild.content,e-1,n)))}function $(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function U(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,U(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r["c"].empty,!0)))),t.copy(o)}function W(t,e,n,r,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!J(n,i.content,a)?s:null}function J(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function K(t,e,n,o,i){if(e<n){var a=t.firstChild;t=t.replaceChild(0,a.copy(K(a.content,e+1,n,o,a)))}if(e>o){var s=i.contentMatchAt(0),c=s.fillBefore(t).append(t);t=c.append(s.matchFragment(c).fillBefore(r["c"].empty,!0))}return t}function G(t,e){for(var n=[],r=Math.min(t.depth,e.depth),o=r;o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}V.depth.get=function(){return this.frontier.length-1},z.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;var a=this.placed,s=o.depth,c=i.depth;while(s&&c&&1==a.childCount)a=a.firstChild.content,s--,c--;var l=new r["j"](a,s,c);return e>-1?new w(o.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new b(o.pos,i.pos,l):void 0},z.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,o=void 0;e?(o=$(this.unplaced.content,e-1).firstChild,n=o.content):n=this.unplaced.content;for(var i=n.firstChild,a=this.depth;a>=0;a--){var s=this.frontier[a],c=s.type,l=s.match,u=void 0,p=void 0;if(1==t&&(i?l.matchType(i.type)||(p=l.fillBefore(r["c"].from(i),!1)):c.compatibleContent(o.type)))return{sliceDepth:e,frontierDepth:a,parent:o,inject:p};if(2==t&&i&&(u=l.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:a,parent:o,wrap:u};if(o&&l.matchType(o.type))break}}},z.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=$(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r["j"](e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},z.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=$(e,n);if(i.childCount<=1&&n>0){var a=e.size-n<=n+i.size;this.unplaced=new r["j"](q(e,n-1,1),n-1,a?n-1:o)}else this.unplaced=new r["j"](q(e,n,1),n,o)},z.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,a=t.wrap;while(this.depth>n)this.closeFrontierNode();if(a)for(var s=0;s<a.length;s++)this.openFrontierNode(a[s]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-e,p=0,d=[],f=this.frontier[n],h=f.match,m=f.type;if(i){for(var v=0;v<i.childCount;v++)d.push(i.child(v));h=h.matchFragment(i)}var g=l.size+e-(c.content.size-c.openEnd);while(p<l.childCount){var y=l.child(p),b=h.matchType(y.type);if(!b)break;p++,(p>1||0==u||y.content.size)&&(h=b,d.push(U(y.mark(m.allowedMarks(y.marks)),1==p?u:0,p==l.childCount?g:-1)))}var w=p==l.childCount;w||(g=-1),this.placed=_(this.placed,n,r["c"].from(d)),this.frontier[n].match=h,w&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,x=l;k<g;k++){var C=x.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),x=C.content}this.unplaced=w?0==e?r["j"].empty:new r["j"](q(c.content,e-1,1),e-1,g<0?c.openEnd:e-1):new r["j"](q(c.content,e,p),c.openStart,c.openEnd)},z.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!W(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,o=this.$to.after(r);while(r>1&&o==this.$to.end(--r))++o;return o},z.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=W(t,e,o,r,i);if(a){for(var s=e-1;s>=0;s--){var c=this.frontier[s],l=c.match,u=c.type,p=W(t,s,u,l,!0);if(!p||p.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}},z.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=_(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},z.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=_(this.placed,this.depth,r["c"].from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},z.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(r["c"].empty,!0);e.childCount&&(this.placed=_(this.placed,this.frontier.length,e))},Object.defineProperties(z.prototype,V),f.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(H(o,i,n))return this.step(new b(t,e,n));var a=G(o,this.doc.resolve(e));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;a.indexOf(c)>-1?s=c:o.before(c)==l&&a.splice(1,0,-c)}for(var p=a.indexOf(s),d=[],f=n.openStart,h=n.content,m=0;;m++){var v=h.firstChild;if(d.push(v),m==n.openStart)break;h=v.content}f>0&&d[f-1].type.spec.defining&&o.node(p).type!=d[f-1].type?f-=1:f>=2&&d[f-1].isTextblock&&d[f-2].type.spec.defining&&o.node(p).type!=d[f-2].type&&(f-=2);for(var g=n.openStart;g>=0;g--){var y=(g+f+1)%(n.openStart+1),w=d[y];if(w)for(var k=0;k<a.length;k++){var x=a[(k+p)%a.length],C=!0;x<0&&(C=!1,x=-x);var M=o.node(x-1),T=o.index(x-1);if(M.canReplaceWith(T,T,w.type,w.marks))return this.replace(o.before(x),C?i.after(x):e,new r["j"](K(n.content,0,n.openStart,y),y,n.openEnd))}}for(var S=this.steps.length,O=a.length-1;O>=0;O--){if(this.replace(t,e,n),this.steps.length>S)break;var E=a[O];E<0||(t=o.before(E),e=i.after(E))}return this},f.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=A(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r["j"](r["c"].from(n),0,0))},f.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=G(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},"304a":function(t,e,n){"use strict";function r(t){this.content=t}n.d(e,"a",(function(){return ft})),n.d(e,"b",(function(){return Dt})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return ut})),n.d(e,"f",(function(){return j})),n.d(e,"g",(function(){return R})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return pt})),n.d(e,"j",(function(){return m})),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),a=o.content.slice();return-1==i?a.push(n||t,e):(a[i+1]=e,n&&(a[i]=n)),new r(a)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),a=o.find(t);return i.splice(-1==a?i.length:a,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r,i=o;function a(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var c=a(o.content,i.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function s(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=t.child(--o),c=e.child(--i),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){var u=0,p=Math.min(a.text.length,c.text.length);while(u<p&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1])u++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var d=s(a.content,c.content,n-1,r-1);if(d)return d}n-=l,r-=l}else n-=l,r-=l}}var c=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},l={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};c.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,a=0;a<e;i++){var s=this.content[i],c=a+s.nodeSize;if(c>t&&!1!==n(s,r+a,o,i)&&s.content.size){var l=a+1;s.nodesBetween(Math.max(0,t-l),Math.min(s.content.size,e-l),n,r+l)}a=c}},c.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},c.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(a,s){a.isText?(o+=a.text.slice(Math.max(t,s)-s,e-s),i=!n):a.isLeaf&&r?(o+=r,i=!n):!i&&a.isBlock&&(o+=n,i=!0)}),0),o},c.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new c(r,this.size+t.size)},c.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var a=this.content[o],s=i+a.nodeSize;s>t&&((i<t||s>e)&&(a=a.isText?a.cut(Math.max(0,t-i),Math.min(a.text.length,e-i)):a.cut(Math.max(0,t-i-1),Math.min(a.content.size,e-i-1))),n.push(a),r+=a.nodeSize),i=s}return new c(n,r)},c.prototype.cutByIndex=function(t,e){return t==e?c.empty:0==t&&e==this.content.length?this:new c(this.content.slice(t,e))},c.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new c(r,o)},c.prototype.addToStart=function(t){return new c([t].concat(this.content),this.size+t.nodeSize)},c.prototype.addToEnd=function(t){return new c(this.content.concat(t),this.size+t.nodeSize)},c.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},l.firstChild.get=function(){return this.content.length?this.content[0]:null},l.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},l.childCount.get=function(){return this.content.length},c.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},c.prototype.maybeChild=function(t){return this.content[t]},c.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},c.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),a(this,t,e)},c.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),s(this,t,e,n)},c.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return p(0,t);if(t==this.size)return p(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?p(n+1,i):p(n,r);r=i}},c.prototype.toString=function(){return"<"+this.toStringInner()+">"},c.prototype.toStringInner=function(){return this.content.join(", ")},c.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},c.fromJSON=function(t,e){if(!e)return c.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new c(e.map(t.nodeFromJSON))},c.fromArray=function(t){if(!t.length)return c.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new c(e||t,n)},c.from=function(t){if(!t)return c.empty;if(t instanceof c)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new c([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(c.prototype,l);var u={index:0,offset:0};function p(t,e){return u.index=t,u.offset=e,u}function d(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!d(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!d(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}c.empty=new c([],0);var f=function(t,e){this.type=t,this.attrs=e};function h(t){var e=Error.call(this,t);return e.__proto__=h.prototype,e}f.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},f.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},f.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},f.prototype.eq=function(t){return this==t||this.type==t.type&&d(this.attrs,t.attrs)},f.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},f.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},f.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},f.setFrom=function(t){if(!t||0==t.length)return f.none;if(t instanceof f)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},f.none=[],h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="ReplaceError";var m=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},v={size:{configurable:!0}};function g(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,a=t.maybeChild(o),s=t.findIndex(n),c=s.index,l=s.offset;if(i==e||a.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,a.copy(g(a.content,e-i-1,n-i-1)))}function y(t,e,n,r){var o=t.findIndex(e),i=o.index,a=o.offset,s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=y(s.content,e-a-1,n);return c&&t.replaceChild(i,s.copy(c))}function b(t,e,n){if(n.openStart>t.depth)throw new h("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new h("Inconsistent open depths");return w(t,e,n,0)}function w(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var a=w(t,e,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var s=E(n,t),c=s.start,l=s.end;return T(i,S(t,c,l,e,r))}var u=t.parent,p=u.content;return T(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return T(i,O(t,e,r))}function k(t,e){if(!e.type.compatibleContent(t.type))throw new h("Cannot join "+e.type.name+" onto "+t.type.name)}function x(t,e,n){var r=t.node(n);return k(r,e.node(n)),r}function C(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function M(t,e,n,r){var o=(e||t).node(n),i=0,a=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(C(t.nodeAfter,r),i++));for(var s=i;s<a;s++)C(o.child(s),r);e&&e.depth==n&&e.textOffset&&C(e.nodeBefore,r)}function T(t,e){if(!t.type.validContent(e))throw new h("Invalid content for node "+t.type.name);return t.copy(e)}function S(t,e,n,r,o){var i=t.depth>o&&x(t,e,o+1),a=r.depth>o&&x(n,r,o+1),s=[];return M(null,t,o,s),i&&a&&e.index(o)==n.index(o)?(k(i,a),C(T(i,S(t,e,n,r,o+1)),s)):(i&&C(T(i,O(t,e,o+1)),s),M(e,n,o,s),a&&C(T(a,O(n,r,o+1)),s)),M(r,null,o,s),new c(s)}function O(t,e,n){var r=[];if(M(null,t,n,r),t.depth>n){var o=x(t,e,n+1);C(T(o,O(t,e,n+1)),r)}return M(e,null,n,r),new c(r)}function E(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(c.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}v.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(t,e){var n=y(this.content,t+this.openStart,e,null);return n&&new m(n,this.openStart,this.openEnd)},m.prototype.removeBetween=function(t,e){return new m(g(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},m.fromJSON=function(t,e){if(!e)return m.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new m(c.fromJSON(t,e.content),n,r)},m.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new m(t,n,r)},Object.defineProperties(m.prototype,v),m.empty=new m(c.empty,0,0);var N=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},D={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};N.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},D.parent.get=function(){return this.node(this.depth)},D.doc.get=function(){return this.node(0)},N.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},N.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},N.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},N.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},N.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},N.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},N.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},D.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},D.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},D.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},N.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},N.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return f.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i},N.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},N.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},N.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new R(this,t,n)},N.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},N.prototype.max=function(t){return t.pos>this.pos?t:this},N.prototype.min=function(t){return t.pos<this.pos?t:this},N.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},N.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var a=i.content.findIndex(o),s=a.index,c=a.offset,l=o-c;if(n.push(i,s,r+c),!l)break;if(i=i.child(s),i.isText)break;o=l-1,r+=c+1}return new N(e,n,o)},N.resolveCached=function(t,e){for(var n=0;n<L.length;n++){var r=L[n];if(r.pos==e&&r.doc==t)return r}var o=L[I]=N.resolve(t,e);return I=(I+1)%A,o},Object.defineProperties(N.prototype,D);var L=[],I=0,A=12,R=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},P={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};P.start.get=function(){return this.$from.before(this.depth+1)},P.end.get=function(){return this.$to.after(this.depth+1)},P.parent.get=function(){return this.$from.node(this.depth)},P.startIndex.get=function(){return this.$from.index(this.depth)},P.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(R.prototype,P);var B=Object.create(null),j=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||c.empty,this.marks=r||f.none},F={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};F.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},F.childCount.get=function(){return this.content.childCount},j.prototype.child=function(t){return this.content.child(t)},j.prototype.maybeChild=function(t){return this.content.maybeChild(t)},j.prototype.forEach=function(t){this.content.forEach(t)},j.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},j.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},F.textContent.get=function(){return this.textBetween(0,this.content.size,"")},j.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},F.firstChild.get=function(){return this.content.firstChild},F.lastChild.get=function(){return this.content.lastChild},j.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},j.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},j.prototype.hasMarkup=function(t,e,n){return this.type==t&&d(this.attrs,e||t.defaultAttrs||B)&&f.sameSet(this.marks,n||f.none)},j.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},j.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},j.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},j.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return m.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),a=r.start(i),s=r.node(i),c=s.content.cut(r.pos-a,o.pos-a);return new m(c,r.depth-i,o.depth-i)},j.prototype.replace=function(t,e,n){return b(this.resolve(t),this.resolve(e),n)},j.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},j.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},j.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},j.prototype.resolve=function(t){return N.resolveCached(this,t)},j.prototype.resolveNoCache=function(t){return N.resolve(this,t)},j.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},F.isBlock.get=function(){return this.type.isBlock},F.isTextblock.get=function(){return this.type.isTextblock},F.inlineContent.get=function(){return this.type.inlineContent},F.isInline.get=function(){return this.type.isInline},F.isText.get=function(){return this.type.isText},F.isLeaf.get=function(){return this.type.isLeaf},F.isAtom.get=function(){return this.type.isAtom},j.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),z(this.marks,t)},j.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},j.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=c.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0},j.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},j.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},j.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=f.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!f.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},j.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},j.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=c.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(j.prototype,F);var H=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(j);function z(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var V=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},q={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};V.parse=function(t,e){var n=new _(t,e);if(null==n.next)return V.empty;var r=U(n);n.next&&n.err("Unexpected trailing text");var o=et(Q(r));return nt(o,n),o},V.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},V.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},q.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},q.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},V.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},V.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,a){var s=i.matchFragment(t,n);if(s&&(!e||s.validEnd))return c.from(a.map((function(t){return t.createAndFill()})));for(var l=0;l<i.next.length;l+=2){var u=i.next[l],p=i.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var d=o(p,a.concat(u));if(d)return d}}}return o(this,[])},V.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},V.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s+=2){var c=o.next[s];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[s+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},q.edgeCount.get=function(){return this.next.length>>1},V.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},V.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(V.prototype,q),V.empty=new V(!0);var _=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},$={next:{configurable:!0}};function U(t){var e=[];do{e.push(W(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function W(t){var e=[];do{e.push(J(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function J(t){for(var e=Z(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=G(t,e)}return e}function K(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function G(t,e){var n=K(t),r=n;return t.eat(",")&&(r="}"!=t.next?K(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function X(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.groups.indexOf(e)>-1&&o.push(a)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function Z(t){if(t.eat("(")){var e=U(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=X(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Q(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var a=0;;a++){var s=i(t.exprs[a],e);if(a==t.exprs.length-1)return s;o(s,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var d=n();o(i(t.expr,u),d),u=d}if(-1==t.max)o(i(t.expr,u),u);else for(var f=t.min;f<t.max;f++){var h=n();r(u,h),o(i(t.expr,u),h),u=h}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Y(t,e){return e-t}function tt(t,e){var n=[];return r(e),n.sort(Y);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,c=a.to;s||-1!=n.indexOf(c)||r(c)}}}function et(t){var e=Object.create(null);return n(tt(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),a=i>-1&&o[i+1];tt(t,r).forEach((function(t){a||o.push(n,a=[]),-1==a.indexOf(t)&&a.push(t)}))}}))}));for(var i=e[r.join(",")]=new V(r.indexOf(t.length-1)>-1),a=0;a<o.length;a+=2){var s=o[a+1].sort(Y);i.next.push(o[a],e[s.join(",")]||n(s))}return i}}function nt(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s+=2){var c=o.next[s],l=o.next[s+1];a.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function ot(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function it(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new ct(t[n]);return e}$.next.get=function(){return this.tokens[this.pos]},_.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},_.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(_.prototype,$);var at=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=it(n.attrs),this.defaultAttrs=rt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},st={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};st.isInline.get=function(){return!this.isBlock},st.isTextblock.get=function(){return this.isBlock&&this.inlineContent},st.isLeaf.get=function(){return this.contentMatch==V.empty},st.isAtom.get=function(){return this.isLeaf||this.spec.atom},at.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},at.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},at.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:ot(this.attrs,t)},at.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new j(this,this.computeAttrs(t),c.from(e),f.setFrom(n))},at.prototype.createChecked=function(t,e,n){if(e=c.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new j(this,this.computeAttrs(t),e,f.setFrom(n))},at.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=c.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(c.empty,!0);return o?new j(this,t,e.append(o),f.setFrom(n)):null},at.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},at.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},at.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},at.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:f.empty:t},at.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new at(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(at.prototype,st);var ct=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},lt={isRequired:{configurable:!0}};lt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(ct.prototype,lt);var ut=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=it(r.attrs),this.rank=e,this.excluded=null;var o=rt(this.attrs);this.instance=o&&new f(this,o)};ut.prototype.create=function(t){return!t&&this.instance?this.instance:new f(this,ot(this.attrs,t))},ut.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ut(t,r++,e,o)})),n},ut.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},ut.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ut.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var pt=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=i.from(t.nodes),this.spec.marks=i.from(t.marks),this.nodes=at.compile(this.spec.nodes,this),this.marks=ut.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],a=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[a]||(n[a]=V.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?dt(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:dt(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function dt(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],a=i;if(i)n.push(i);else for(var s in t.marks){var c=t.marks[s];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}pt.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof at))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},pt.prototype.text=function(t,e){var n=this.nodes.text;return new H(n,n.defaultAttrs,t,f.setFrom(e))},pt.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},pt.prototype.nodeFromJSON=function(t){return j.fromJSON(this,t)},pt.prototype.markFromJSON=function(t){return f.fromJSON(this,t)},pt.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var ft=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};ft.prototype.parse=function(t,e){void 0===e&&(e={});var n=new xt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},ft.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new xt(this,e,!0);return n.addAll(t,null,e.from,e.to),m.maxOpen(n.finish())},ft.prototype.matchTag=function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Tt(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},ft.prototype.matchStyle=function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a}return i}}},ft.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Ot(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[a].spec.parseDOM;r&&r.forEach((function(t){n(t=Ot(t)),t.node=a}))};for(var a in t.nodes)i();return e},ft.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new ft(t,ft.schemaRules(t)))};var ht={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},mt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vt={ol:!0,ul:!0},gt=1,yt=2,bt=4;function wt(t){return(t?gt:0)|("full"===t?yt:0)}var kt=function(t,e,n,r,o,i,a){this.type=t,this.attrs=e,this.solid=o,this.match=i||(a&bt?null:t.contentMatch),this.options=a,this.content=[],this.marks=n,this.activeMarks=f.none,this.pendingMarks=r,this.stashMarks=[]};kt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(c.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},kt.prototype.finish=function(t){if(!(this.options&gt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=c.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},kt.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},kt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Et(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},kt.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ht.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var xt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=wt(e.preserveWhitespace)|(n?bt:0);r=o?new kt(o.type,o.attrs,f.none,f.none,!0,e.topMatch||o.type.contentMatch,i):new kt(n?null:t.schema.topNodeType,null,f.none,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Ct={top:{configurable:!0},currentPos:{configurable:!0}};function Mt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&vt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Tt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function St(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Ot(t){var e={};for(var n in t)e[n]=t[n];return e}function Et(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],a=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,s=r.next;if(o==e)return!0;if(i.indexOf(s)<0&&a(s))return!0}};return a(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}function Nt(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}Ct.top.get=function(){return this.nodes[this.open]},xt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(St(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},xt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.options&yt||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&gt)e=n.options&yt?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},xt.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();vt.hasOwnProperty(r)&&this.parser.normalizeLists&&Mt(t);var o=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(o?o.ignore:mt.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(t=o.skip);var i,a=this.top,s=this.needsBlock;if(ht.hasOwnProperty(r))i=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),i&&this.sync(a),this.needsBlock=s}else this.addElementByRule(t,o,!1===o.consuming?n:null)},xt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},xt.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},xt.prototype.readStyles=function(t){var e=f.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(t[n],t[n+1],this,r);if(!o)continue t;if(o.ignore)return null;if(e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;r=o}return e},xt.prototype.addElementByRule=function(t,e,n){var r,o,i,a,s=this;e.node?(o=this.parser.schema.nodes[e.node],o.isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs,e.preserveWhitespace)):(i=this.parser.schema.marks[e.mark],a=i.create(e.attrs),this.addPendingMark(a));var c=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,r)}r&&(this.sync(c),this.open--),a&&this.removePendingMark(a,c)},xt.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,a=null==r?null:t.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&ht.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},xt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var a=0;a<e.length;a++)this.enterInner(e[a],null,!1);return!0},xt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},xt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},xt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~bt:wt(r);o.options&bt&&0==o.content.length&&(i|=bt),this.nodes.push(new kt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},xt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},xt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},xt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Ct.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},xt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},xt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},xt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},xt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},xt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(t,s){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;s>=i;s--)if(a(t-1,s))return!0;return!1}var l=s>0||0==s&&o?e.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;s--}return!0};return a(n.length-1,this.open)},xt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},xt.prototype.addPendingMark=function(t){var e=Nt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},xt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var i=r.popFromStashMark(t);i&&r.type&&r.type.allowsMarkType(i.type)&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(xt.prototype,Ct);var Dt=function(t,e){this.nodes=t||{},this.marks=e||{}};function Lt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function It(t){return t.document||window.document}Dt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=It(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,a=0;while(n<i.length&&a<t.marks.length){var s=t.marks[a];if(r.marks[s.type.name]){if(!s.eq(i[n])||!1===s.type.spec.spanning)break;n+=2,a++}else a++}while(n<i.length)o=i.pop(),i.pop();while(a<t.marks.length){var c=t.marks[a++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNodeInner(t,e))})),n},Dt.prototype.serializeNodeInner=function(t,e){void 0===e&&(e={});var n=Dt.renderSpec(It(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Dt.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Dt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Dt.renderSpec(It(n),r(t,e))},Dt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,a=n?t.createElementNS(n,r):t.createElement(r),s=e[1],c=1;if(s&&"object"==typeof s&&null==s.nodeType&&!Array.isArray(s))for(var l in c=2,s)if(null!=s[l]){var u=l.indexOf(" ");u>0?a.setAttributeNS(l.slice(0,u),l.slice(u+1),s[l]):a.setAttribute(l,s[l])}for(var p=c;p<e.length;p++){var d=e[p];if(0===d){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var f=Dt.renderSpec(t,d,n),h=f.dom,m=f.contentDOM;if(a.appendChild(h),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:a,contentDOM:i}},Dt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Dt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Dt.nodesFromSchema=function(t){var e=Lt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Dt.marksFromSchema=function(t){return Lt(t.marks)}},3565:function(t,e,n){},5313:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return T})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return N})),n.d(e,"e",(function(){return I})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return l}));var r=n("304a"),o=n("0ac0"),i=Object.create(null),a=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},s={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};s.anchor.get=function(){return this.$anchor.pos},s.head.get=function(){return this.$head.pos},s.from.get=function(){return this.$from.pos},s.to.get=function(){return this.$to.pos},s.$from.get=function(){return this.ranges[0].$from},s.$to.get=function(){return this.ranges[0].$to},s.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},a.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},a.prototype.replace=function(t,e){void 0===e&&(e=r["j"].empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var a=t.steps.length,s=this.ranges,c=0;c<s.length;c++){var l=s[c],u=l.$from,p=l.$to,d=t.mapping.slice(a);t.replaceRange(d.map(u.pos),d.map(p.pos),c?r["j"].empty:e),0==c&&v(t,a,(n?n.isInline:o&&o.isTextblock)?-1:1)}},a.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,c=t.mapping.slice(n),l=c.map(a.pos),u=c.map(s.pos);o?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),v(t,n,e.isInline?-1:1))}},a.findFrom=function(t,e,n){var r=t.parent.inlineContent?new l(t):m(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?m(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):m(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},a.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new f(t.node(0))},a.atStart=function(t){return m(t,t,0,0,1)||new f(t)},a.atEnd=function(t){return m(t,t,t.content.size,t.childCount,-1)||new f(t)},a.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},a.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},a.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(a.prototype,s),a.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},l=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r["j"].empty),t.prototype.replace.call(this,e,n),n==r["j"].empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new u(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var a=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!a)return t.near(r,o);r=a.$head}return n.parent.inlineContent||(0==i?n=r:(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor,n.pos<r.pos!=i<0&&(n=r))),new e(n,r)},Object.defineProperties(e.prototype,n),e}(a);a.jsonID("text",l);var u=function(t,e){this.anchor=t,this.head=e};u.prototype.map=function(t){return new u(t.map(this.anchor),t.map(this.head))},u.prototype.resolve=function(t){return l.between(t.resolve(this.anchor),t.resolve(this.head))};var p=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,a=o.pos,s=n.resolve(a);return i?t.near(s):new e(s)},e.prototype.content=function(){return new r["j"](r["c"].from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new d(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(a);p.prototype.visible=!1,a.jsonID("node",p);var d=function(t){this.anchor=t};d.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new u(r,r):new d(r)},d.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&p.isSelectable(n)?new p(e):a.near(e)};var f=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r["j"].empty),n==r["j"].empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return h},e}(a);a.jsonID("all",f);var h={map:function(){return this},resolve:function(t){return new f(t)}};function m(t,e,n,r,o,i){if(e.inlineContent)return l.create(t,n);for(var a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var s=e.child(a);if(s.isAtom){if(!i&&p.isSelectable(s))return p.create(t,n-(o<0?s.nodeSize:0))}else{var c=m(t,s,n+o,o<0?s.childCount:0,o,i);if(c)return c}n+=s.nodeSize*o}}function v(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof o["c"]||i instanceof o["b"]){var s,c=t.mapping.maps[r];c.forEach((function(t,e,n,r){null==s&&(s=r)})),t.setSelection(a.near(t.doc.resolve(s),n))}}}var g=1,y=2,b=4,w=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|g)&~y,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&g)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=y,this},e.prototype.ensureMarks=function(t){return r["d"].sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&y)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~y,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r["d"].none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(a.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=b,this},n.scrolledIntoView.get=function(){return(this.updated&b)>0},Object.defineProperties(e.prototype,n),e}(o["e"]);function k(t,e){return e&&t?t.bind(e):t}var x=function(t,e,n){this.name=t,this.init=k(e.init,n),this.apply=k(e.apply,n)},C=[new x("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new x("selection",{init:function(t,e){return t.selection||a.atStart(e.doc)},apply:function(t){return t.selection}}),new x("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new x("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],M=function(t,e){var n=this;this.schema=t,this.fields=C.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new x(t.key,t.spec.state,t))}))},T=function(t){this.config=t},S={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};S.schema.get=function(){return this.config.schema},S.plugins.get=function(){return this.config.plugins},T.prototype.apply=function(t){return this.applyTransaction(t).state},T.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},T.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,c=r?r[i].state:this,l=s<e.length&&a.spec.appendTransaction.call(a,s?e.slice(s):e,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},T.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new T(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<O.length;i++)O[i](this,t,e);return e},S.tr.get=function(){return new w(this)},T.create=function(t){for(var e=new M(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new T(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},T.prototype.reconfigure=function(t){for(var e=new M(this.schema,t.plugins),n=e.fields,r=new T(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},T.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},T.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new M(t.schema,t.plugins),i=new T(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r["f"].fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=a.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var s in n){var c=n[s],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(i[o.name]=l.fromJSON.call(c,t,e[s],i))}i[o.name]=o.init(t,i)}})),i},T.addApplyListener=function(t){O.push(t)},T.removeApplyListener=function(t){var e=O.indexOf(t);e>-1&&O.splice(e,1)},Object.defineProperties(T.prototype,S);var O=[];function E(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=E(o,e,{})),n[r]=o}return n}var N=function(t){this.props={},t.props&&E(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:L("plugin")};N.prototype.getState=function(t){return t[this.key]};var D=Object.create(null);function L(t){return t in D?t+"$"+ ++D[t]:(D[t]=0,t+"$")}var I=function(t){void 0===t&&(t="key"),this.key=L(t)};I.prototype.get=function(t){return t.config.pluginsByKey[this.key]},I.prototype.getState=function(t){return t[this.key]}},"576a":function(t,e,n){"use strict";n.d(e,"a",(function(){return Mn})),n.d(e,"b",(function(){return En})),n.d(e,"c",(function(){return Vn}));var r=n("5313"),o=n("304a"),i=n("0ac0"),a={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var s=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);a.mac=/Mac/.test(navigator.platform);var u=a.ie=!!(c||l||s);a.ie_version=c?document.documentMode||6:l?+l[1]:s?+s[1]:null,a.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),a.gecko_version=a.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var p=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);a.chrome=!!p,a.chrome_version=p&&+p[1],a.safari=!u&&/Apple Computer/.test(navigator.vendor),a.ios=a.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),a.android=/Android \d/.test(navigator.userAgent),a.webkit="webkitFontSmoothing"in document.documentElement.style,a.webkit_version=a.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var d=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},f=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},h=null,m=function(t,e,n){var r=h||(h=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},v=function(t,e,n,r){return n&&(y(t,e,n,r,-1)||y(t,e,n,r,1))},g=/^(img|br|input|textarea|hr)$/i;function y(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:b(t))){var i=t.parentNode;if(1!=i.nodeType||k(t)||g.test(t.nodeName)||"false"==t.contentEditable)return!1;e=d(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(o<0?-1:0)],"false"==t.contentEditable)return!1;e=o<0?b(t):0}}}function b(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function w(t,e,n){for(var r=0==e,o=e==b(t);r||o;){if(t==n)return!0;var i=d(t);if(t=t.parentNode,!t)return!1;r=r&&0==i,o=o&&i==b(t)}}function k(t){for(var e,n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var x=function(t){var e=t.isCollapsed;return e&&a.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function C(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function M(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function T(t,e){return"number"==typeof t?t:t[e]}function S(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function O(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,a=n||t.dom;;a=f(a)){if(!a)break;if(1==a.nodeType){var s=a==i.body||1!=a.nodeType,c=s?M(i):S(a),l=0,u=0;if(e.top<c.top+T(r,"top")?u=-(c.top-e.top+T(o,"top")):e.bottom>c.bottom-T(r,"bottom")&&(u=e.bottom-c.bottom+T(o,"bottom")),e.left<c.left+T(r,"left")?l=-(c.left-e.left+T(o,"left")):e.right>c.right-T(r,"right")&&(l=e.right-c.right+T(o,"right")),l||u)if(s)i.defaultView.scrollBy(l,u);else{var p=a.scrollLeft,d=a.scrollTop;u&&(a.scrollTop+=u),l&&(a.scrollLeft+=l);var h=a.scrollLeft-p,m=a.scrollTop-d;e={left:e.left-h,top:e.top-m,right:e.right-h,bottom:e.bottom-m}}if(s)break}}}function E(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=t.root.elementFromPoint(i,a);if(s!=t.dom&&t.dom.contains(s)){var c=s.getBoundingClientRect();if(c.top>=o-20){e=s,n=c.top;break}}}return{refDOM:e,refTop:n,stack:N(t.dom)}}function N(t){for(var e=[],n=t.ownerDocument;t;t=f(t))if(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t==n)break;return e}function D(t){var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0;L(r,0==o?0:o-n)}function L(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=a&&(o.scrollLeft=a)}}var I=null;function A(t){if(t.setActive)return t.setActive();if(I)return t.focus(I);var e=N(t);t.focus(null==I?{get preventScroll(){return I={preventScroll:!0},!0}}:void 0),I||(I=!1,L(e,0))}function R(t,e){for(var n,r,o=2e8,i=0,a=e.top,s=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=m(c).getClientRects()}for(var p=0;p<u.length;p++){var d=u[p];if(d.top<=a&&d.bottom>=s){a=Math.max(d.bottom,a),s=Math.min(d.top,s);var f=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(f<o){n=c,o=f,r=f&&3==n.nodeType?{left:d.right<e.left?d.right:d.left,top:e.top}:e,1==c.nodeType&&f&&(i=l+(e.left>=(d.left+d.right)/2?1:0));continue}}!n&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(i=l+1)}}return n&&3==n.nodeType?P(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:R(n,r)}function P(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=q(r,1);if(i.top!=i.bottom&&B(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function B(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function j(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function F(t,e,n){var r=R(e,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(o,i,a)}function H(t,e,n,r){for(var o=-1,i=e;;){if(i==t.dom)break;var a=t.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}function z(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=t.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),c=0;c<s.length;c++){var l=s[c];if(B(e,l))return z(a,e,l)}if((i=(i+1)%r)==o)break}return t}function V(t,e){var n,r,o,i,s=t.dom.ownerDocument;if(s.caretPositionFromPoint)try{var c=s.caretPositionFromPoint(e.left,e.top);c&&(n=c,o=n.offsetNode,i=n.offset)}catch(y){}if(!o&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(e.left,e.top);l&&(r=l,o=r.startContainer,i=r.startOffset)}var u,p=(t.root.elementFromPoint?t.root:s).elementFromPoint(e.left,e.top+1);if(!p||!t.dom.contains(1!=p.nodeType?p.parentNode:p)){var d=t.dom.getBoundingClientRect();if(!B(e,d))return null;if(p=z(t.dom,e,d),!p)return null}if(a.safari)for(var h=p;o&&h;h=f(h))h.draggable&&(o=i=null);if(p=j(p,e),o){if(a.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){var m,v=o.childNodes[i];"IMG"==v.nodeName&&(m=v.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=H(t,o,i,e))}null==u&&(u=F(t,p,e));var g=t.docView.nearestDesc(p,!0);return{pos:u,inside:g?g.posAtStart-g.border:-1}}function q(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}var _=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),o=r.node,i=r.offset,s=a.webkit||a.gecko;if(3==o.nodeType){if(!s||!_.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var c=i,l=i,u=n<0?1:-1;return n<0&&!i?(l++,u=-1):n>=0&&i==o.nodeValue.length?(c--,u=1):n<0?c--:l++,U(q(m(o,c,l),u),u<0)}var p=q(m(o,i,i),n);if(a.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var d=q(m(o,i-1,i-1),-1);if(d.top==p.top){var f=q(m(o,i,i+1),-1);if(f.top!=p.top)return U(f,f.left<d.left)}}return p}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(n<0||i==b(o))){var h=o.childNodes[i-1];if(1==h.nodeType)return W(h.getBoundingClientRect(),!1)}if(i<b(o)){var v=o.childNodes[i];if(1==v.nodeType)return W(v.getBoundingClientRect(),!0)}return W(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==b(o))){var g=o.childNodes[i-1],y=3==g.nodeType?m(g,b(g)-(s?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(y)return U(q(y,1),!1)}if(i<b(o)){var w=o.childNodes[i];while(w.pmViewDesc&&w.pmViewDesc.ignoreForCoords)w=w.nextSibling;var k=w?3==w.nodeType?m(w,0,s?0:1):1==w.nodeType?w:null:null;if(k)return U(q(k,-1),!0)}return U(q(3==o.nodeType?m(o):o,-n),n>=0)}function U(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function W(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function J(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function K(t,e,n){var r=e.selection,o="up"==n?r.$from:r.$to;return J(t,e,(function(){for(var e=t.docView.domFromPos(o.pos,"up"==n?-1:1),r=e.node;;){var i=t.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var a=$(t,o.pos,1),s=r.firstChild;s;s=s.nextSibling){var c=void 0;if(1==s.nodeType)c=s.getClientRects();else{if(3!=s.nodeType)continue;c=m(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<c.length;l++){var u=c[l];if(u.bottom>u.top+1&&("up"==n?a.top-u.top>2*(u.bottom-a.top):u.bottom-a.bottom>2*(a.bottom-u.top)))return!1}}return!0}))}var G=/[\u0590-\u08ac]/;function X(t,e,n){var r=e.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,a=!i,s=i==o.parent.content.size,c=t.root.getSelection();return G.test(o.parent.textContent)&&c.modify?J(t,e,(function(){var e=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,a=c.caretBidiLevel;c.modify("move",n,"character");var s=o.depth?t.docView.domAfterPos(o.before()):t.dom,l=!s.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(e),null!=a&&(c.caretBidiLevel=a),l})):"left"==n||"backward"==n?a:s}var Z=null,Q=null,Y=!1;function tt(t,e,n){return Z==e&&Q==n?Y:(Z=e,Q=n,Y="up"==n||"down"==n?K(t,e,n):X(t,e,n))}var et=0,nt=1,rt=2,ot=3,it=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=et},at={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};it.prototype.matchesWidget=function(){return!1},it.prototype.matchesMark=function(){return!1},it.prototype.matchesNode=function(){return!1},it.prototype.matchesHack=function(t){return!1},it.prototype.parseRule=function(){return null},it.prototype.stopEvent=function(){return!1},at.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},at.border.get=function(){return 0},it.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},it.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},at.posBefore.get=function(){return this.parent.posBeforeChild(this)},at.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},at.posAfter.get=function(){return this.posBefore+this.size},at.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},it.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;r=t.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(t==this.contentDOM)i=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;i=t.nextSibling}while(i&&(!(a=i.pmViewDesc)||a.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(t==this.dom&&this.contentDOM)s=e>d(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){s=!1;break}if(c.parentNode.firstChild!=c)break}if(null==s&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart},it.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},it.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},it.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},it.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},it.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=0;n<this.children.length;n++){var i=this.children[n],a=o+i.size;if(a>t||i instanceof ht){r=t-o;break}o=a}if(r)return this.children[n].domFromPos(r-this.children[n].border,e);for(var s=void 0;n&&!(s=this.children[n-1]).size&&s instanceof ct&&s.widget.type.side>=0;n--);if(e<=0){for(var c,l=!0;;n--,l=!1)if(c=n?this.children[n-1]:null,!c||c.dom.parentNode==this.contentDOM)break;return c&&e&&l&&!c.border&&!c.domAtom?c.domFromPos(c.size,e):{node:this.contentDOM,offset:c?d(c.dom)+1:0}}for(var u,p=!0;;n++,p=!1)if(u=n<this.children.length?this.children[n]:null,!u||u.dom.parentNode==this.contentDOM)break;return u&&p&&!u.border&&!u.domAtom?u.domFromPos(0,e):{node:this.contentDOM,offset:u?d(u.dom):this.contentDOM.childNodes.length}},it.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],c=i+s.size;if(-1==r&&t<=c){var l=i+s.border;if(t>=l&&e<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(t,e,l);t=i;for(var u=a;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=d(p.dom)+1;break}t-=p.size}-1==r&&(r=0)}if(r>-1&&(c>e||a==this.children.length-1)){e=c;for(var f=a+1;f<this.children.length;f++){var h=this.children[f];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=d(h.dom);break}e+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},it.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},it.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},it.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,c=0;s<this.children.length;s++){var l=this.children[s],u=c+l.size;if(o>c&&i<u)return l.setSelection(t-c-l.border,e-c-l.border,n,r);c=u}var p=this.domFromPos(t,t?-1:1),f=e==t?p:this.domFromPos(e,e?-1:1),h=n.getSelection(),m=!1;if((a.gecko||a.safari)&&t==e){var g=p.node,y=p.offset;if(3==g.nodeType){if(m=y&&"\n"==g.nodeValue[y-1],m&&y==g.nodeValue.length)for(var b=g,w=void 0;b;b=b.parentNode){if(w=b.nextSibling){"BR"==w.nodeName&&(p=f={node:w.parentNode,offset:d(w)+1});break}var k=b.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{var x=g.childNodes[y-1];m=x&&("BR"==x.nodeName||"false"==x.contentEditable)}}if(a.gecko&&h.focusNode&&h.focusNode!=f.node&&1==h.focusNode.nodeType){var C=h.focusNode.childNodes[h.focusOffset];C&&"false"==C.contentEditable&&(r=!0)}if(r||m&&a.safari||!v(p.node,p.offset,h.anchorNode,h.anchorOffset)||!v(f.node,f.offset,h.focusNode,h.focusOffset)){var M=!1;if((h.extend||t==e)&&!m){h.collapse(p.node,p.offset);try{t!=e&&h.extend(f.node,f.offset),M=!0}catch(O){if(!(O instanceof DOMException))throw O}}if(!M){if(t>e){var T=p;p=f,f=T}var S=document.createRange();S.setEnd(f.node,f.offset),S.setStart(p.node,p.offset),h.removeAllRanges(),h.addRange(S)}}},it.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},at.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},it.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var a=n+o.border,s=i-o.border;if(t>=a&&e<=s)return this.dirty=t==n||e==i?rt:nt,void(t!=a||e!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-a,e-a):o.dirty=ot);o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM?rt:ot}n=i}this.dirty=rt},it.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?rt:nt;e.dirty<n&&(e.dirty=n)}},at.domAtom.get=function(){return!1},at.ignoreForCoords.get=function(){return!1},Object.defineProperties(it.prototype,at);var st=[],ct=function(t){function e(e,n,r,o){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}t.call(this,e,st,a,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.matchesWidget=function(t){return this.dirty==et&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(it),lt=function(t){function e(e,n,r,o){t.call(this,e,st,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(it),ut=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,i){var a=i.nodeViews[n.type.name],s=a&&a(n,i,r);return s&&s.dom||(s=o["b"].renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return this.dirty!=ot&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),this.dirty!=et){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=et}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=It(i,n,a,r)),t>0&&(i=It(i,0,t,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o},e}(it),pt=function(t){function e(e,n,r,o,i,a,s,c,l){t.call(this,e,n.isLeaf?st:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=o,a&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,n,r,i,a,s){var c,l,u=a.nodeViews[n.type.name],p=u&&u(n,a,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),r,i),d=p&&p.dom,f=p&&p.contentDOM;if(n.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(n.text);else d||(c=o["b"].renderSpec(document,n.type.spec.toDOM(n)),d=c.dom,f=c.contentDOM);f||n.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),n.type.spec.draggable&&(d.draggable=!0));var h=d;return d=xt(d,r,n),p?l=new mt(t,n,r,i,d,f,h,p,a,s+1):n.isText?new ft(t,n,r,i,d,h,a):new e(t,n,r,i,d,f,h,a,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o["c"].empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return this.dirty==et&&t.eq(this.node)&&Ct(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,i=e,s=t.composing&&this.localCompositionInfo(t,e),c=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new Tt(this,c&&c.node);Et(this.node,this.innerDeco,(function(e,a,s){e.spec.marks?u.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!s&&u.syncToMarks(a==n.node.childCount?o["d"].none:n.node.child(a).marks,r,t),u.placeWidget(e,t,i)}),(function(e,n,o,a){var c;u.syncToMarks(e.marks,r,t),u.findNodeMatch(e,n,o,a)||l&&t.state.selection.from>i&&t.state.selection.to<i+e.nodeSize&&(c=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(e,n,o,c,t)||u.updateNextNode(e,n,o,t,a)||u.addNode(e,n,o,t,i),i+=e.nodeSize})),u.syncToMarks(st,r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==rt)&&(c&&this.protectLocalComposition(t,c),vt(this.contentDOM,this.children,t),a.ios&&Nt(this.dom))},e.prototype.localCompositionInfo=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r["h"])||o<e||i>e+this.node.content.size)){var a=t.root.getSelection(),s=Dt(a.focusNode,a.focusOffset);if(s&&this.dom.contains(s.parentNode)){if(this.node.inlineContent){var c=s.nodeValue,l=Lt(this.node.content,c,o-e,i-e);return l<0?null:{node:s,pos:l,text:c}}return{node:s,pos:-1}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var a=new lt(this,i,n,o);t.compositionNodes.push(a),this.children=It(this.children,r,r+o.length,t,a)}},e.prototype.update=function(t,e,n,r){return!(this.dirty==ot||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=et},e.prototype.updateOuterDeco=function(t){if(!Ct(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=wt(this.dom,this.nodeDOM,bt(this.outerDeco,this.node,e),bt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,n),e}(it);function dt(t,e,n,r,o){return xt(r,e,t),new pt(null,t,e,n,r,r,r,o,0)}var ft=function(t){function e(e,n,r,o,i,a,s){t.call(this,e,n,r,o,i,null,a,s)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){var t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(this.dirty==ot||this.dirty!=et&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==et&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=et,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e.prototype.markDirty=function(e,n){t.prototype.markDirty.call(this,e,n),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=ot)},n.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,n),e}(pt),ht=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(t){return this.dirty==et&&this.dom.nodeName==t},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(e.prototype,n),e}(it),mt=function(t){function e(e,n,r,o,i,a,s,c,l,u){t.call(this,e,n,r,o,i,a,s,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(this.dirty==ot)return!1;if(this.spec.update){var i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(pt);function vt(t,e,n){for(var r=t.firstChild,o=!1,i=0;i<e.length;i++){var a=e[i],s=a.dom;if(s.parentNode==t){while(s!=r)r=Mt(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(s,r);if(a instanceof ut){var c=r?r.previousSibling:t.lastChild;vt(a.contentDOM,a.children,n),r=c?c.nextSibling:t.firstChild}}while(r)r=Mt(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}function gt(t){t&&(this.nodeName=t)}gt.prototype=Object.create(null);var yt=[new gt];function bt(t,e,n){if(0==t.length)return yt;for(var r=n?yt[0]:new gt,o=[r],i=0;i<t.length;i++){var a=t[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new gt(a.nodeName)),a){var c=a[s];null!=c&&(n&&1==o.length&&o.push(r=new gt(e.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+c:"style"==s?r.style=(r.style?r.style+";":"")+c:"nodeName"!=s&&(r[s]=c))}}return o}function wt(t,e,n,r){if(n==yt&&r==yt)return e;for(var o=e,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var c=void 0;s&&s.nodeName==a.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(o),s=yt[0]),o=c}kt(o,s||yt[0],a)}return o}function kt(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" ").filter(Boolean):st,a=n.class?n.class.split(" ").filter(Boolean):st,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&t.classList.remove(i[s]);for(var c=0;c<a.length;c++)-1==i.indexOf(a[c])&&t.classList.add(a[c])}if(e.style!=n.style){if(e.style){var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(l=u.exec(e.style))t.style.removeProperty(l[1])}n.style&&(t.style.cssText+=n.style)}}function xt(t,e,n){return wt(t,t,yt,bt(e,n,1!=t.nodeType))}function Ct(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Mt(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Tt=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=St(t.node.content,t.children)};function St(t,e){for(var n=t.childCount,r=e.length,o=new Map;n>0&&r>0;r--){var i=e[r-1],a=i.node;if(a){if(a!=t.child(n-1))break;--n,o.set(i,n)}}return{index:n,matched:o}}function Ot(t,e){return t.type.side-e.type.side}function Et(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var a=0,s=[],c=null,l=0;;){if(a<o.length&&o[a].to==i){var u=o[a++],p=void 0;while(a<o.length&&o[a].to==i)(p||(p=[u])).push(o[a++]);if(p){p.sort(Ot);for(var d=0;d<p.length;d++)n(p[d],l,!!c)}else n(u,l,!!c)}var f=void 0,h=void 0;if(c)h=-1,f=c,c=null;else{if(!(l<t.childCount))break;h=l,f=t.child(l++)}for(var m=0;m<s.length;m++)s[m].to<=i&&s.splice(m--,1);while(a<o.length&&o[a].from<=i&&o[a].to>i)s.push(o[a++]);var v=i+f.nodeSize;if(f.isText){var g=v;a<o.length&&o[a].from<g&&(g=o[a].from);for(var y=0;y<s.length;y++)s[y].to<g&&(g=s[y].to);g<v&&(c=f.cut(g-i),f=f.cut(0,g-i),v=g,h=-1)}var b=s.length?f.isInline&&!f.isLeaf?s.filter((function(t){return!t.inline})):s.slice():st;r(f,b,e.forChild(i,f),h),i=v}else for(var w=0;w<t.childCount;w++){var k=t.child(w);r(k,o,e.forChild(i,k),w),i+=k.nodeSize}}function Nt(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Dt(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=b(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function Lt(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var a=t.child(o++),s=i;if(i+=a.nodeSize,a.isText){var c=a.text;while(o<t.childCount){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(e,r-s);if(u>=0&&u+e.length+s>=n)return s+u}}}return-1}function It(t,e,n,r,o){for(var i=[],a=0,s=0;a<t.length;a++){var c=t[a],l=s,u=s+=c.size;l>=n||u<=e?i.push(c):(l<e&&i.push(c.slice(0,e-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function At(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),a=i&&0==i.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var c,l,u=o.resolve(s);if(x(n)){c=u;while(i&&!i.node)i=i.parent;if(i&&i.node.isAtom&&r["c"].isSelectable(i.node)&&i.parent&&(!i.node.isInline||!w(n.focusNode,n.focusOffset,i.dom))){var p=i.posBefore;l=new r["c"](s==p?u:o.resolve(p))}}else{var d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(d<0)return null;c=o.resolve(d)}if(!l){var f="pointer"==e||t.state.selection.head<u.pos&&!a?1:-1;l=$t(t,c,u,f)}return l}function Rt(t){return t.editable?t.hasFocus():Wt(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Pt(t,e){var n=t.state.selection;if(qt(t,n),Rt(t)){if(!e&&t.mouseDown&&t.mouseDown.allowDefault)return t.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection();if(t.domObserver.disconnectSelection(),t.cursorWrapper)Vt(t);else{var o,i,a=n.anchor,s=n.head;!Bt||n instanceof r["h"]||(n.$from.parent.inlineContent||(o=jt(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=jt(t,n.to))),t.docView.setSelection(a,s,t.root,e),Bt&&(o&&Ht(o),i&&Ht(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&zt(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}Tt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},Tt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Tt.prototype.syncToMarks=function(t,e,n){var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=et,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<t.length){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(t[o])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=ut.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},Tt.prototype.findNodeMatch=function(t,e,n,r){var o=this.top.children,i=-1;if(r>=this.preMatch.index){for(var a=this.index;a<o.length;a++)if(o[a].matchesNode(t,e,n)){i=a;break}}else for(var s=this.index,c=Math.min(o.length,s+1);s<c;s++){var l=o[s];if(l.matchesNode(t,e,n)&&!this.preMatch.matched.has(l)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Tt.prototype.updateNodeAt=function(t,e,n,r,o){var i=this.top.children[r];return!!i.update(t,e,n,o)&&(this.destroyBetween(this.index,r),this.index=r+1,!0)},Tt.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}t=e}},Tt.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof pt){var s=this.preMatch.matched.get(a);if(null!=s&&s!=o)return!1;var c=a.dom,l=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=ot&&Ct(e,a.outerDeco));if(!l&&a.update(t,e,n,r))return this.destroyBetween(this.index,i),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Tt.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,pt.create(this.top,t,e,n,r,o)),this.changed=!0},Tt.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new ct(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},Tt.prototype.addTextblockHacks=function(){var t=this.top.children[this.index-1];while(t instanceof ut)t=t.children[t.children.length-1];t&&t instanceof ft&&!/\n$/.test(t.node.text)||((a.safari||a.chrome)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Tt.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);"IMG"==t&&(e.className="ProseMirror-separator"),"BR"==t&&(e.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new ht(this.top,st,e,null)),this.changed=!0}};var Bt=a.safari||a.chrome&&a.chrome_version<63;function jt(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(a.safari&&i&&"false"==i.contentEditable)return Ft(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return Ft(i);if(s)return Ft(s)}}function Ft(t){return t.contentEditable="true",a.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Ht(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function zt(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){Rt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Vt(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,d(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&a.ie&&a.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function qt(t,e){if(e instanceof r["c"]){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(_t(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else _t(t)}function _t(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function $t(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r["h"].between(e,n,o)}function Ut(t){return(!t.editable||t.root.activeElement==t.dom)&&Wt(t)}function Wt(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function Jt(t){var e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.root.getSelection();return v(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Kt(t,e){var n=t.selection,o=n.$anchor,i=n.$head,a=e>0?o.max(i):o.min(i),s=a.parent.inlineContent?a.depth?t.doc.resolve(e>0?a.after():a.before()):null:a;return s&&r["f"].findFrom(s,e)}function Gt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Xt(t,e,n){var o=t.state.selection;if(!(o instanceof r["h"])){if(o instanceof r["c"]&&o.node.isInline)return Gt(t,new r["h"](e>0?o.$to:o.$from));var i=Kt(t.state,e);return!!i&&Gt(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var s=Kt(t.state,e);return!!(s&&s instanceof r["c"])&&Gt(t,s)}if(!(a.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var p=e<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=t.docView.descAt(p))&&!c.contentDOM)&&(r["c"].isSelectable(u)?Gt(t,new r["c"](e<0?t.state.doc.resolve(l.pos-u.nodeSize):l)):!!a.webkit&&Gt(t,new r["h"](t.state.doc.resolve(e<0?p:p+u.nodeSize))))}}function Zt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Qt(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Yt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(a.gecko&&1==n.nodeType&&r<Zt(n)&&Qt(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Qt(c))o=n,i=--r;else{if(3!=c.nodeType)break;n=c,r=n.nodeValue.length}}else{if(ee(n))break;var l=n.previousSibling;while(l&&Qt(l))o=n.parentNode,i=d(l),l=l.previousSibling;if(l)n=l,r=Zt(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}s?ne(t,e,n,r):o&&ne(t,e,o,i)}}function te(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,a=Zt(n);;)if(r<a){if(1!=n.nodeType)break;var s=n.childNodes[r];if(!Qt(s))break;o=n,i=++r}else{if(ee(n))break;var c=n.nextSibling;while(c&&Qt(c))o=c.parentNode,i=d(c)+1,c=c.nextSibling;if(c)n=c,r=0,a=Zt(n);else{if(n=n.parentNode,n==t.dom)break;r=a=0}}o&&ne(t,e,o,i)}}function ee(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ne(t,e,n,r){if(x(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&Pt(t)}),50)}function re(t,e,n){var o=t.state.selection;if(o instanceof r["h"]&&!o.empty||n.indexOf("s")>-1)return!1;if(a.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,s=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=Kt(t.state,e);if(c&&c instanceof r["c"])return Gt(t,c)}if(!i.parent.inlineContent){var l=e<0?i:s,u=o instanceof r["a"]?r["f"].near(l,e):r["f"].findFrom(l,e);return!!u&&Gt(t,u)}return!1}function oe(t,e){if(!(t.state.selection instanceof r["h"]))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,a=n.empty;if(!o.sameParent(i))return!0;if(!a)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(s&&!s.isText){var c=t.state.tr;return e<0?c.delete(o.pos-s.nodeSize,o.pos):c.delete(o.pos,o.pos+s.nodeSize),t.dispatch(c),!0}return!1}function ie(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ae(t){if(a.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;ie(t,o,!0),setTimeout((function(){return ie(t,o,!1)}),20)}}}function se(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function ce(t,e){var n=e.keyCode,r=se(e);return 8==n||a.mac&&72==n&&"c"==r?oe(t,-1)||Yt(t):46==n||a.mac&&68==n&&"c"==r?oe(t,1)||te(t):13==n||27==n||(37==n?Xt(t,-1,r)||Yt(t):39==n?Xt(t,1,r)||te(t):38==n?re(t,-1,r)||Yt(t):40==n?ae(t)||re(t,1,r)||te(t):r==(a.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function le(t,e,n){var r=t.docView.parseRange(e,n),i=r.node,s=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,p=t.root.getSelection(),d=null,f=p.anchorNode;if(f&&t.dom.contains(1==f.nodeType?f:f.parentNode)&&(d=[{node:f,offset:p.anchorOffset}],x(p)||d.push({node:p.focusNode,offset:p.focusOffset})),a.chrome&&8===t.lastKeyCode)for(var h=c;h>s;h--){var m=i.childNodes[h-1],v=m.pmViewDesc;if("BR"==m.nodeName&&!v){c=h;break}if(!v||v.size)break}var g=t.state.doc,y=t.someProp("domParser")||o["a"].fromSchema(t.state.schema),b=g.resolve(l),w=null,k=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:s,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:d,ruleFromNode:ue,context:b});if(d&&null!=d[0].pos){var C=d[0].pos,M=d[1]&&d[1].pos;null==M&&(M=C),w={anchor:C+l,head:M+l}}return{doc:k,sel:w,from:l,to:u}}function ue(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(a.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||a.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function pe(t,e,n,o,i){if(e<0){var s=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,c=At(t,s);if(c&&!t.state.selection.eq(c)){var l=t.state.tr.setSelection(c);"pointer"==s?l.setMeta("pointer",!0):"key"==s&&l.scrollIntoView(),t.dispatch(l)}}else{var u=t.state.doc.resolve(e),p=u.sharedDepth(n);e=u.before(p+1),n=t.state.doc.resolve(n).after(p+1);var d=t.state.selection,f=le(t,e,n);if(a.chrome&&t.cursorWrapper&&f.sel&&f.sel.anchor==t.cursorWrapper.deco.from){var h=t.cursorWrapper.deco.type.toDOM.nextSibling,m=h&&h.nodeValue?h.nodeValue.length:1;f.sel={anchor:f.sel.anchor+m,head:f.sel.anchor+m}}var v,g,y=t.state.doc,b=y.slice(f.from,f.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(v=t.state.selection.to,g="end"):(v=t.state.selection.from,g="start"),t.lastKeyCode=null;var w=ve(b.content,f.doc.content,f.from,v,g);if(!w){if(!(o&&d instanceof r["h"]&&!d.empty&&d.$head.sameParent(d.$anchor))||t.composing||f.sel&&f.sel.anchor!=f.sel.head){if((a.ios&&t.lastIOSEnter>Date.now()-225||a.android)&&i.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,C(13,"Enter"))})))return void(t.lastIOSEnter=0);if(f.sel){var k=de(t,t.state.doc,f.sel);k&&!k.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(k))}return}w={start:d.from,endA:d.to,endB:d.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof r["h"]&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),a.ie&&a.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>f.from&&" "==f.doc.textBetween(w.start-f.from-1,w.start-f.from+1)&&(w.start--,w.endA--,w.endB--);var x,M=f.doc.resolveNoCache(w.start-f.from),T=f.doc.resolveNoCache(w.endB-f.from),S=M.sameParent(T)&&M.parent.inlineContent;if((a.ios&&t.lastIOSEnter>Date.now()-225&&(!S||i.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!S&&M.pos<f.doc.content.size&&(x=r["f"].findFrom(f.doc.resolve(M.pos+1),1,!0))&&x.head==T.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,C(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>w.start&&he(y,w.start,w.endA,M,T)&&t.someProp("handleKeyDown",(function(e){return e(t,C(8,"Backspace"))})))a.android&&a.chrome&&t.domObserver.suppressSelectionUpdates();else{a.chrome&&a.android&&w.toB==w.from&&(t.lastAndroidDelete=Date.now()),a.android&&!S&&M.start()!=T.start()&&0==T.parentOffset&&M.depth==T.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==w.endA&&(w.endB-=2,T=f.doc.resolveNoCache(w.endB-f.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,C(13,"Enter"))}))}),20));var O,E,N,D,L=w.start,I=w.endA;if(S)if(M.pos==T.pos)a.ie&&a.ie_version<=11&&0==M.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Pt(t)}),20)),O=t.state.tr.delete(L,I),E=y.resolve(w.start).marksAcross(y.resolve(w.endA));else if(w.endA==w.endB&&(D=y.resolve(w.start))&&(N=fe(M.parent.content.cut(M.parentOffset,T.parentOffset),D.parent.content.cut(D.parentOffset,w.endA-D.start()))))O=t.state.tr,"add"==N.type?O.addMark(L,I,N.mark):O.removeMark(L,I,N.mark);else if(M.parent.child(M.index()).isText&&M.index()==T.index()-(T.textOffset?0:1)){var A=M.parent.textBetween(M.parentOffset,T.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,L,I,A)})))return;O=t.state.tr.insertText(A,L,I)}if(O||(O=t.state.tr.replace(L,I,f.doc.slice(w.start-f.from,w.endB-f.from))),f.sel){var R=de(t,O.doc,f.sel);R&&!(a.chrome&&a.android&&t.composing&&R.empty&&(w.start!=w.endB||t.lastAndroidDelete<Date.now()-100)&&(R.head==L||R.head==O.mapping.map(I)-1)||a.ie&&R.empty&&R.head==L)&&O.setSelection(R)}E&&O.ensureMarks(E),t.dispatch(O.scrollIntoView())}}}function de(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:$t(t,e.resolve(n.anchor),e.resolve(n.head))}function fe(t,e){for(var n,r,i,a=t.firstChild.marks,s=e.firstChild.marks,c=a,l=s,u=0;u<s.length;u++)c=s[u].removeFromSet(c);for(var p=0;p<a.length;p++)l=a[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var d=[],f=0;f<e.childCount;f++)d.push(i(e.child(f)));if(o["c"].from(d).eq(t))return{mark:r,type:n}}function he(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||me(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=t.resolve(me(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||me(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function me(t,e,n){var r=t.depth,o=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,o++,e=!1;if(n){var i=t.node(r).maybeChild(t.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function ve(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var a=t.findDiffEnd(e,n+t.size,n+e.size),s=a.a,c=a.b;if("end"==o){var l=Math.max(0,i-Math.min(s,c));r-=s+l-i}if(s<i&&t.size<e.size){var u=r<=i&&r>=s?i-r:0;i-=u,c=i+(c-s),s=i}else if(c<i){var p=r<=i&&r>=c?i-r:0;i-=p,s=i+(s-c),c=i}return{start:i,endA:s,endB:c}}function ge(t,e){var n=[],r=e.content,i=e.openStart,a=e.openEnd;while(i>1&&a>1&&1==r.childCount&&1==r.firstChild.childCount){i--,a--;var s=r.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var c=t.someProp("clipboardSerializer")||o["b"].fromSchema(t.state.schema),l=Oe(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));var p,d=u.firstChild;while(d&&1==d.nodeType&&(p=Te[d.nodeName.toLowerCase()])){for(var f=p.length-1;f>=0;f--){var h=l.createElement(p[f]);while(u.firstChild)h.appendChild(u.firstChild);u.appendChild(h),"tbody"!=p[f]&&(i++,a++)}d=u.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice",i+" "+a+" "+JSON.stringify(n));var m=t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:u,text:m}}function ye(t,e,n,r,i){var s,c,l=i.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(r||l||!n);if(u){if(t.someProp("transformPastedText",(function(t){e=t(e,l||r)})),l)return e?new o["j"](o["c"].from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):o["j"].empty;var p=t.someProp("clipboardTextParser",(function(t){return t(e,i,r)}));if(p)c=p;else{var d=i.marks(),f=t.state,h=f.schema,m=o["b"].fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=s.appendChild(document.createElement("p"));t&&e.appendChild(m.serializeNode(h.text(t,d)))}))}}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=Ee(n),a.webkit&&Ne(s);var v=s&&s.querySelector("[data-pm-slice]"),g=v&&/^(\d+) (\d+) (.*)/.exec(v.getAttribute("data-pm-slice"));if(!c){var y=t.someProp("clipboardParser")||t.someProp("domParser")||o["a"].fromSchema(t.state.schema);c=y.parseSlice(s,{preserveWhitespace:!(!u&&!g),context:i})}if(g)c=De(Me(c,+g[1],+g[2]),g[3]);else if(c=o["j"].maxOpen(be(c.content,i),!0),c.openStart||c.openEnd){for(var b=0,w=0,k=c.content.firstChild;b<c.openStart&&!k.type.spec.isolating;b++,k=k.firstChild);for(var x=c.content.lastChild;w<c.openEnd&&!x.type.spec.isolating;w++,x=x.lastChild);c=Me(c,b,w)}return t.someProp("transformPasted",(function(t){c=t(c)})),c}function be(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n),i=r.contentMatchAt(e.index(n)),a=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=i.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&a.length&&ke(n,a,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=xe(s[s.length-1],a.length));var r=we(t,n);s.push(r),i=i.matchType(r.type,r.attrs),a=n}}})),s)return{v:o["c"].from(s)}},r=e.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}function we(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,o["c"].from(t));return t}function ke(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){var a=ke(t,e,n,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));var s=r.contentMatchAt(r.childCount);if(s.matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(o["c"].from(we(n,t,i+1))))}}function xe(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,xe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(o["c"].empty,!0);return t.copy(n.append(r))}function Ce(t,e,n,r,i,a){var s=e<0?t.firstChild:t.lastChild,c=s.content;return i<r-1&&(c=Ce(c,e,n,r,i+1,a)),i>=n&&(c=e<0?s.contentMatchAt(0).fillBefore(c,t.childCount>1||a<=i).append(c):c.append(s.contentMatchAt(s.childCount).fillBefore(o["c"].empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(c))}function Me(t,e,n){return e<t.openStart&&(t=new o["j"](Ce(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new o["j"](Ce(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Te={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Se=null;function Oe(){return Se||(Se=document.implementation.createHTMLDocument("title"))}function Ee(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Oe().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);if((n=o&&Te[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join("")),r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}function Ne(t){for(var e=t.querySelectorAll(a.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var r=e[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function De(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(u){return t}for(var i=t.content,a=t.openStart,s=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o["c"].from(l.create(n[c+1],i)),a++,s++}return new o["j"](i,a,s)}var Le={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ie=a.ie&&a.ie_version<=11,Ae=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ae.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Ae.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Re=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);a.ie&&a.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Ae,Ie&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Re.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Re.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Re.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Le),Ie&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Re.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Ie&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Re.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Re.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Re.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Re.prototype.onSelectionChange=function(){if(Ut(this.view)){if(this.suppressingSelectionUpdates)return Pt(this.view);if(a.ie&&a.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&v(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Re.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Re.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Re.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Wt(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var c=0;c<t.length;c++){var l=this.registerMutation(t[c],s);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(a.gecko&&s.length>1){var u=s.filter((function(t){return"BR"==t.nodeName}));if(2==u.length){var p=u[0],d=u[1];p.parentNode&&p.parentNode.parentNode==d.parentNode?d.remove():p.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),Be(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||Pt(this.view),this.currentSelection.set(e))}},Re.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var o=t.previousSibling,i=t.nextSibling;if(a.ie&&a.ie_version<=11&&t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){var c=t.addedNodes[s],l=c.previousSibling,u=c.nextSibling;(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(o=l),(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(i=u)}var p=o&&o.parentNode==t.target?d(o)+1:0,f=n.localPosFromDOM(t.target,p,-1),h=i&&i.parentNode==t.target?d(i):t.target.childNodes.length,m=n.localPosFromDOM(t.target,h,1);return{from:f,to:m}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Pe=!1;function Be(t){Pe||(Pe=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var je={},Fe={};function He(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Re(t,(function(e,n,r,o){return pe(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=je[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!$e(t,e)||_e(t,e)||!t.editable&&e.type in Fe||n(t,e)})};for(var n in je)e(n);a.safari&&t.dom.addEventListener("input",(function(){return null})),qe(t)}function ze(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Ve(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}function qe(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return _e(t,e)})}))}function _e(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function $e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Ue(t,e){_e(t,e)||!je[e.type]||!t.editable&&e.type in Fe||je[e.type](t,e)}function We(t){return{left:t.clientX,top:t.clientY}}function Je(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ke(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),a=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},s=i.depth+1;s>0;s--){var c=a(s);if(c)return c.v}return!1}function Ge(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Xe(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r["c"].isSelectable(o))&&(Ge(t,new r["c"](n),"pointer"),!0)}function Ze(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r["c"]&&(n=i.node);for(var a=t.state.doc.resolve(e),s=a.depth+1;s>0;s--){var c=s>a.depth?a.nodeAfter:a.node(s);if(r["c"].isSelectable(c)){o=n&&i.$from.depth>0&&s>=i.$from.depth&&a.before(i.$from.depth+1)==i.$from.pos?a.before(i.$from.depth):a.before(s);break}}return null!=o&&(Ge(t,r["c"].create(t.state.doc,o),"pointer"),!0)}function Qe(t,e,n,r,o){return Ke(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?Ze(t,n):Xe(t,n))}function Ye(t,e,n,r){return Ke(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function tn(t,e,n,r){return Ke(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||en(t,n,r)}function en(t,e,n){if(0!=n.button)return!1;var o=t.state.doc;if(-1==e)return!!o.inlineContent&&(Ge(t,r["h"].create(o,0,o.content.size),"pointer"),!0);for(var i=o.resolve(e),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a),c=i.before(a);if(s.inlineContent)Ge(t,r["h"].create(o,c+1,c+1+s.content.size),"pointer");else{if(!r["c"].isSelectable(s))continue;Ge(t,r["c"].create(o,c),"pointer")}return!0}}function nn(t){return pn(t)}Fe.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!an(t,e))if(229!=e.keyCode&&t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!a.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||ce(t,e)?e.preventDefault():ze(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,C(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Fe.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Fe.keypress=function(t,e){if(!(an(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||a.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r["h"])||!n.$from.sameParent(n.$to)){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var rn=a.mac?"metaKey":"ctrlKey";je.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=nn(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&Je(e,t.lastClick)&&!e[rn]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(We(e));i&&("singleClick"==o?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new on(t,i,e,n)):("doubleClick"==o?Ye:tn)(t,i.pos,i.inside,e)?e.preventDefault():ze(t,"pointer"))};var on=function(t,e,n,o){var i,s,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[rn],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,e.inside>-1)i=t.state.doc.nodeAt(e.inside),s=e.inside;else{var l=t.state.doc.resolve(e.pos);i=l.parent,s=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,p=u?t.docView.nearestDesc(u,!0):null;this.target=p?p.dom:null;var d=t.state,f=d.selection;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||f instanceof r["c"]&&f.from<=s&&f.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&a.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){c.view.mouseDown==c&&c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ze(t,"pointer")};function an(t,e){return!!t.composing||!!(a.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}on.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return Pt(t.view)})),this.view.mouseDown=null},on.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(We(t))),this.allowDefault||!e?ze(this.view,"pointer"):Qe(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||a.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||a.chrome&&!(this.view.state.selection instanceof r["h"])&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Ge(this.view,r["f"].near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ze(this.view,"pointer")}},on.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),ze(this.view,"pointer"),0==t.buttons&&this.done()},je.touchdown=function(t){nn(t),ze(t,"pointer")},je.contextmenu=function(t){return nn(t)};var sn=a.android?5e3:-1;function cn(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return pn(t)}),e))}function ln(t){t.composing&&(t.composing=!1,t.compositionEndedAt=un());while(t.compositionNodes.length>0)t.compositionNodes.pop().markParentsDirty()}function un(){var t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function pn(t,e){if(t.domObserver.forceFlush(),ln(t),e||t.docView.dirty){var n=At(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}function dn(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}Fe.compositionstart=Fe.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),pn(t,!0),t.markCursor=null;else if(pn(t),a.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}t.composing=!0}cn(t,sn)},Fe.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,cn(t,20))};var fn=a.ie&&a.ie_version<15||a.ios&&a.webkit_version<604;function hn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function mn(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?vn(t,r.value,null,e):vn(t,r.textContent,r.innerHTML,e)}),50)}}function vn(t,e,n,r){var i=ye(t,e,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,r,i||o["j"].empty)})))return!0;if(!i)return!1;var a=hn(i),s=a?t.state.tr.replaceSelectionWith(a,t.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}je.copy=Fe.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=fn?null:e.clipboardData,i=n.content(),a=ge(t,i),s=a.dom,c=a.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",c)):dn(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Fe.paste=function(t,e){var n=fn?null:e.clipboardData;n&&vn(t,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():mn(t,e)};var gn=function(t,e){this.slice=t,this.move=e},yn=a.mac?"altKey":"ctrlKey";for(var bn in je.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(We(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r["c"]?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r["c"].create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var a=t.docView.nearestDesc(e.target,!0);a&&a.node.type.spec.draggable&&a!=t.docView&&t.dispatch(t.state.tr.setSelection(r["c"].create(t.state.doc,a.posBefore)))}var s=t.state.selection.content(),c=ge(t,s),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(fn?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",fn||e.dataTransfer.setData("text/plain",u),t.dragging=new gn(s,!e[yn])}},je.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},Fe.dragover=Fe.dragenter=function(t,e){return e.preventDefault()},Fe.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var a=t.posAtCoords(We(e));if(a){var s=t.state.doc.resolve(a.pos);if(s){var c=n&&n.slice;c?t.someProp("transformPasted",(function(t){c=t(c)})):c=ye(t,e.dataTransfer.getData(fn?"Text":"text/plain"),fn?null:e.dataTransfer.getData("text/html"),!1,s);var l=n&&!e[yn];if(t.someProp("handleDrop",(function(n){return n(t,e,c||o["j"].empty,l)})))e.preventDefault();else if(c){e.preventDefault();var u=c?Object(i["h"])(t.state.doc,s.pos,c):s.pos;null==u&&(u=s.pos);var p=t.state.tr;l&&p.deleteSelection();var d=p.mapping.map(u),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,h=p.doc;if(f?p.replaceRangeWith(d,d,c.content.firstChild):p.replaceRange(d,d,c),!p.doc.eq(h)){var m=p.doc.resolve(d);if(f&&r["c"].isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))p.setSelection(new r["c"](m));else{var v=p.mapping.map(u);p.mapping.maps[p.mapping.maps.length-1].forEach((function(t,e,n,r){return v=r})),p.setSelection($t(t,m,p.doc.resolve(v)))}t.focus(),t.dispatch(p.setMeta("uiEvent","drop"))}}}}}},je.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&Pt(t)}),20))},je.blur=function(t,e){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),e.relatedTarget&&t.dom.contains(e.relatedTarget)&&t.domObserver.currentSelection.set({}),t.focused=!1)},je.beforeinput=function(t,e){if(a.chrome&&a.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,C(8,"Backspace"))})))){var e=t.state.selection,r=e.$cursor;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},Fe)je[bn]=Fe[bn];function wn(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var kn=function(t,e){this.spec=e||On,this.side=this.spec.side||0,this.toDOM=t};kn.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos,a=o.deleted;return a?null:new Mn(i-n,i-n,this)},kn.prototype.valid=function(){return!0},kn.prototype.eq=function(t){return this==t||t instanceof kn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&wn(this.spec,t.spec))};var xn=function(t,e){this.spec=e||On,this.attrs=t};xn.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Mn(o,i,this)},xn.prototype.valid=function(t,e){return e.from<e.to},xn.prototype.eq=function(t){return this==t||t instanceof xn&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)},xn.is=function(t){return t.type instanceof xn};var Cn=function(t,e){this.spec=e||On,this.attrs=t};Cn.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Mn(o.pos-n,i.pos-n,this)},Cn.prototype.valid=function(t,e){var n,r=t.content.findIndex(e.from),o=r.index,i=r.offset;return i==e.from&&!(n=t.child(o)).isText&&i+n.nodeSize==e.to},Cn.prototype.eq=function(t){return this==t||t instanceof Cn&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)};var Mn=function(t,e,n){this.from=t,this.to=e,this.type=n},Tn={spec:{configurable:!0},inline:{configurable:!0}};Mn.prototype.copy=function(t,e){return new Mn(t,e,this.type)},Mn.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Mn.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Mn.widget=function(t,e,n){return new Mn(t,t,new kn(e,n))},Mn.inline=function(t,e,n,r){return new Mn(t,e,new xn(n,r))},Mn.node=function(t,e,n,r){return new Mn(t,e,new Cn(n,r))},Tn.spec.get=function(){return this.type.spec},Tn.inline.get=function(){return this.type instanceof xn},Object.defineProperties(Mn.prototype,Tn);var Sn=[],On={},En=function(t,e){this.local=t&&t.length?t:Sn,this.children=e&&e.length?e:Sn};En.create=function(t,e){return e.length?Bn(e,t,0,On):Nn},En.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},En.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=e&&a.to>=t&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){var c=this.children[s]+1;this.children[s+2].findInner(t-c,e-c,n,r+c,o)}},En.prototype.map=function(t,e,n){return this==Nn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||On)},En.prototype.mapInner=function(t,e,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(t,n,r);s&&s.type.valid(e,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?Ln(this.children,i,t,e,n,r,o):i?new En(i.sort(jn)):Nn},En.prototype.add=function(t,e){return e.length?this==Nn?En.create(t,e):this.addInner(t,e,0):this},En.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,a){var s,c=a+n;if(s=Rn(e,t,c)){r||(r=o.children.slice());while(i<r.length&&r[i]<a)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(t,s,c+1):r.splice(i,0,a,a+t.nodeSize,Bn(s,t,c+1,On)),i+=3}}));for(var a=In(i?Pn(e):e,-n),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||a.splice(s--,1);return new En(a.length?this.local.concat(a).sort(jn):this.local,r||this.children)},En.prototype.remove=function(t){return 0==t.length||this==Nn?this:this.removeInner(t,0)},En.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+e,s=n[o+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>a&&l.to<s&&(t[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=Nn?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,d=void 0;p<t.length;p++)if(d=t[p])for(var f=0;f<r.length;f++)r[f].eq(d,e)&&(r==this.local&&(r=this.local.slice()),r.splice(f--,1));return n==this.children&&r==this.local?this:r.length||n.length?new En(r,n):Nn},En.prototype.forChild=function(t,e){if(this==Nn)return this;if(e.isLeaf)return En.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,a=i+e.content.size,s=0;s<this.local.length;s++){var c=this.local[s];if(c.from<a&&c.to>i&&c.type instanceof xn){var l=Math.max(i,c.from)-i,u=Math.min(a,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var p=new En(r.sort(jn));return n?new Dn([p,n]):p}return n||Nn},En.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof En)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},En.prototype.locals=function(t){return Fn(this.localsInner(t))},En.prototype.localsInner=function(t){if(this==Nn)return Sn;if(t.inlineContent||!this.local.some(xn.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof xn||e.push(this.local[n]);return e};var Nn=new En;En.empty=Nn,En.removeOverlap=Fn;var Dn=function(t){this.members=t};function Ln(t,e,n,r,o,i,a){for(var s=t.slice(),c=function(t,e,n,r){for(var a=0;a<s.length;a+=3){var c=s[a+1],l=void 0;-1==c||t>c+i||(e>=s[a]+i?s[a+1]=-1:n>=o&&(l=r-n-(e-t))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,p=0;p<s.length;p+=3)if(-1==s[p+1]){var d=n.map(t[p]+i),f=d-o;if(f<0||f>=r.content.size){u=!0;continue}var h=n.map(t[p+1]+i,-1),m=h-o,v=r.content.findIndex(f),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==f&&y+b.nodeSize==m){var w=s[p+2].mapInner(n,b,d+1,t[p]+i+1,a);w!=Nn?(s[p]=f,s[p+1]=m,s[p+2]=w):(s[p+1]=-2,u=!0)}else u=!0}if(u){var k=An(s,t,e||[],n,o,i,a),x=Bn(k,r,0,a);e=x.local;for(var C=0;C<s.length;C+=3)s[C+1]<0&&(s.splice(C,3),C-=3);for(var M=0,T=0;M<x.children.length;M+=3){var S=x.children[M];while(T<s.length&&s[T]<S)T+=3;s.splice(T,0,x.children[M],x.children[M+1],x.children[M+2])}}return new En(e&&e.sort(jn),s)}function In(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Mn(o.from+e,o.to+e,o.type))}return n}function An(t,e,n,r,o,i,a){function s(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):a.onRemove&&a.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)s(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&s(t[c+2],e[c]+i+1);return n}function Rn(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,a=void 0;i<t.length;i++)(a=t[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),t[i]=null);return o}function Pn(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Bn(t,e,n,r){var o=[],i=!1;e.forEach((function(e,a){var s=Rn(t,e,a+n);if(s){i=!0;var c=Bn(s,e,n+a+1,r);c!=Nn&&o.push(a,a+e.nodeSize,c)}}));for(var a=In(i?Pn(t):t,-n).sort(jn),s=0;s<a.length;s++)a[s].type.valid(e,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new En(a,o):Nn}function jn(t,e){return t.from-e.from||t.to-e.to}function Fn(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Hn(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Hn(e,o+1,i.copy(r.to,i.to)))}}return e}function Hn(t,e,n){while(e<t.length&&jn(n,t[e])>0)e++;t.splice(e,0,n)}function zn(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Nn&&e.push(r)})),t.cursorWrapper&&e.push(En.create(t.state.doc,[t.cursorWrapper.deco])),Dn.from(e)}Dn.prototype.map=function(t,e){var n=this.members.map((function(n){return n.map(t,e,On)}));return Dn.from(n)},Dn.prototype.forChild=function(t,e){if(e.isLeaf)return En.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=Nn&&(o instanceof Dn?n=n.concat(o.members):n.push(o))}return Dn.from(n)},Dn.prototype.eq=function(t){if(!(t instanceof Dn)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Dn.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Fn(n?e:e.sort(jn)):Sn},Dn.from=function(t){switch(t.length){case 0:return Nn;case 1:return t[0];default:return new Dn(t)}};var Vn=function(t,e){this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Gn),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Un(this),this.markCursor=null,this.cursorWrapper=null,$n(this),this.nodeViews=Jn(this),this.docView=dt(this.state.doc,_n(this),zn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,He(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},qn={props:{configurable:!0},root:{configurable:!0}};function _n(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Mn.node(0,t.state.doc.content.size,e)]}function $n(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Mn.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Un(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Wn(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Jn(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function Kn(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r}function Gn(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}qn.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Vn.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qe(this),this._props=t,t.plugins&&(t.plugins.forEach(Gn),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)},Vn.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Vn.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Vn.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1,s=!1;if(t.storedMarks&&this.composing&&(ln(this),s=!0),this.state=t,e){var c=Jn(this);Kn(c,this.nodeViews)&&(this.nodeViews=c,i=!0),qe(this)}this.editable=Un(this),$n(this);var l=zn(this),u=_n(this),p=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(t.doc,u,l);!d&&t.selection.eq(o.selection)||(s=!0);var f="preserve"==p&&s&&null==this.dom.style.overflowAnchor&&E(this);if(s){this.domObserver.stop();var h=d&&(a.ie||a.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&Wn(o.selection,t.selection);if(d){var m=a.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(t.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=dt(t.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Jt(this))?Pt(this,h):(qt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==p)this.dom.scrollTop=0;else if("to selection"==p){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r["c"]?O(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),v):O(this,this.coordsAtPos(t.selection.head,1),v))}else f&&D(f)},Vn.prototype.destroyPluginViews=function(){var t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()},Vn.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}},Vn.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[t];if(null!=i&&(n=e?e(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var c=a[s].props[t];if(null!=c&&(n=e?e(c):c))return n}},Vn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Vn.prototype.focus=function(){this.domObserver.stop(),this.editable&&A(this.dom),Pt(this),this.domObserver.start()},qn.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Vn.prototype.posAtCoords=function(t){return V(this,t)},Vn.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),$(this,t,e)},Vn.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},Vn.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Vn.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Vn.prototype.endOfTextblock=function(t,e){return tt(this,e||this.state,t)},Vn.prototype.destroy=function(){this.docView&&(Ve(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Vn.prototype.dispatchEvent=function(t){return Ue(this,t)},Vn.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Vn.prototype,qn)},5865:function(t,e,n){"use strict";(function(t){var r=n("304a"),o=n("576a"),i=n("0ac0"),a=n("5313"),s=n("7f06"),c=n("0010"),l=n("f95e"),u=n("8726"),p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},p(t,e)};function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},f.apply(this,arguments)};function h(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}function m(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function v(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}var g=v;function y(t,e){var n,r,o,i,a=Object.prototype.hasOwnProperty;for(o=1,i=arguments.length;o<i;o+=1)for(r in n=arguments[o],n)a.call(n,r)&&(t[r]=n[r]);return t}var b=y;function w(t){return"string"===typeof t||t instanceof String}var k=w;function x(t){return t instanceof Array}var C=x;function M(t,e,n){var r=0,o=t.length;for(n=n||null;r<o;r+=1)if(!1===e.call(n,t[r],r,t))break}var T=M,S=C,O=T,E=g;function N(t,e,n){S(t)?O(t,e,n):E(t,e,n)}var D=N,L=k,I=D;function A(t,e,n){var r=t.style;L(e)?r[e]=n:I(e,(function(t,e){r[e]=t}))}var R=A,P=C;function B(t,e,n){var r,o;if(n=n||0,!P(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,r=n;n>=0&&r<o;r+=1)if(e[r]===t)return r;return-1}var j=B;function F(t){return void 0===t}var H=F,z=H;function V(t){return t&&t.className?z(t.className.baseVal)?t.className:t.className.baseVal:""}var q=V,_=C,$=H;function U(t,e){e=_(e)?e.join(" "):e,e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),$(t.className.baseVal)?t.className=e:t.className.baseVal=e}var W=U,J=D,K=j,G=q,X=W;function Z(t){var e,n=Array.prototype.slice.call(arguments,1),r=t.classList,o=[];r?J(n,(function(e){t.classList.add(e)})):(e=G(t),e&&(n=[].concat(e.split(/\s+/),n)),J(n,(function(t){K(t,o)<0&&o.push(t)})),X(t,o))}var Q=Z,Y=T,tt=j,et=q,nt=W;function rt(t){var e,n,r=Array.prototype.slice.call(arguments,1),o=t.classList;o?Y(r,(function(t){o.remove(t)})):(e=et(t).split(/\s+/),n=[],Y(e,(function(t){tt(t,r)<0&&n.push(t)})),nt(t,n))}var ot=rt;function it(t){return"number"===typeof t||t instanceof Number}var at=it;function st(t){return null===t}var ct=st,lt=g;function ut(t,e){var n=document.createElement("img"),r="";return lt(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}var pt=ut,dt=H,ft=pt,ht=6048e5;function mt(t){var e=(new Date).getTime();return e-t>ht}function vt(t,e){var n="https://www.google-analytics.com/collect",r=location.hostname,o="event",i="use",a="TOAST UI "+t+" for "+r+": Statistics",s=window.localStorage.getItem(a);(dt(window.tui)||!1!==window.tui.usageStatistics)&&(s&&!mt(s)||(window.localStorage.setItem(a,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||ft(n,{v:1,t:o,tid:e,cid:r,dp:r,dh:t,el:t,ec:i})}),1e3)))}var gt=vt;/Mac/.test(navigator.platform);var yt=/[\u0020]+/g,bt=/[>(){}[\]+-.!#|]/g,wt=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\/>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,kt=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,xt=/[*_~`]/g;function Ct(){gt("editor","UA-129966929-1")}function Mt(t,e){return-1!==t.indexOf(e)}var Tt=["rel","target","hreflang","type"],St={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function Ot(t){if(!t)return null;var e={};return Tt.forEach((function(n){H(t[n])||(e[n]=t[n])})),e}function Et(t,e){for(var n="",r=0;r<e;r+=1)n+=t;return n}function Nt(t){var e=!1;return g(St,(function(n){return n.test(t)&&(e=!0),!e})),e}function Dt(t){var e=function(t){return"\\"+t},n=t.replace(yt," ");return kt.test(n)&&(n=n.replace(kt,e)),n=n.replace(xt,e),wt.test(n)&&(n=n.replace(wt,e)),Nt(n)&&(n=n.replace(bt,e)),n}function Lt(t){var e;return e=-1===t.indexOf('"')?'""':-1===t.indexOf("'")?"''":"()",e[0]+t+e[1]}function It(t){return ct(t)||H(t)}function At(t,e){if(null===t&&t===e)return!0;if("object"!==typeof t||"object"!==typeof e||It(t)||It(e))return t===e;for(var n in t)if(t[n]!==e[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function Rt(t){return t[t.length-1]}function Pt(t,e,n){return t>=e&&t<=n}function Bt(t){return"object"===typeof t&&null!==t}function jt(t,e){var n=f({},t);return t&&e&&Object.keys(e).forEach((function(t){Bt(n[t])?Array.isArray(e[t])?n[t]=Ft(e[t]):n.hasOwnProperty(t)?n[t]=jt(n[t],e[t]):n[t]=Ht(e[t]):n[t]=e[t]})),n}function Ft(t){return t.map((function(t){return Bt(t)?Array.isArray(t)?Ft(t):Ht(t):t}))}function Ht(t){var e=Object.keys(t);return e.length?e.reduce((function(e,n){return Bt(t[n])?e[n]=Array.isArray(t[n])?Ft(t[n]):Ht(t[n]):e[n]=t[n],e}),{}):t}function zt(t,e){return void 0===e&&(e={}),Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&"object"===typeof t[n]?Array.isArray(e[n])?t[n]=e[n]:zt(t[n],e[n]):t[n]=e[n]})),t}function Vt(t,e){return t>e?[e,t]:[t,e]}function qt(t,e){var n=t.nodes.paragraph;return e?n.create(null,k(e)?t.text(e):e):n.createAndFill()}function _t(t,e,n){return t.text(e,n)}function $t(t,e,n){void 0===n&&(n=e);var r=t.doc.content.size,o=r>0?r-1:1;return a["h"].create(t.doc,Math.min(e,o),Math.min(n,o))}function Ut(t,e,n){var r=e.pos;return t.replaceWith(r,r,qt(n)),t.setSelection($t(t,r+1))}function Wt(t){for(var e=t.state,n=t.from,o=t.startIndex,i=t.endIndex,a=t.createText,s=e.tr,c=e.doc,l=e.schema,u=o;u<=i;u+=1){var p=c.child(u),d=p.nodeSize,f=p.textContent,h=p.content,m=a(f),v=m?_t(l,m):r["c"].empty,g=s.mapping.map(n),y=g+h.size;s.replaceWith(g,y,v),n+=d}return s}function Jt(t,e,n,r){var o=n.length;t.split(e).delete(e-o,e).insert(t.mapping.map(e),r).setSelection($t(t,t.mapping.map(e)-o))}function Kt(t){return t.sourcepos[0][0]}function Gt(t){return t.sourcepos[1][0]}function Xt(t){return t.sourcepos[0][1]}function Zt(t){return t.sourcepos[1][1]}function Qt(t){var e=t.type;return"htmlBlock"===e||"htmlInline"===e}function Yt(t){var e=t.type;return"strike"===e||"strong"===e||"emph"===e||"code"===e||"link"===e||"image"===e}function te(t){return t&&"codeBlock"===t.type}function ee(t){return t&&("item"===t.type||"list"===t.type)}function ne(t){return ee(t)&&"ordered"===t.listData.type}function re(t){return ee(t)&&"ordered"!==t.listData.type}function oe(t){return t&&("tableCell"===t.type||"tableDelimCell"===t.type)}function ie(t){switch(t.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}function ae(t,e,n){void 0===n&&(n=!0),t=n?t:t.parent;while(t&&"document"!==t.type){if(e(t))return t;t=t.parent}return null}function se(t,e,n){void 0===n&&(n=!0),t=n?t:t.parent;while(t&&"document"!==t.type)e(t),t=t.parent}function ce(t,e){return[t[0],t[1]+e]}function le(t,e){return[t[0],e]}function ue(t){var e=t.firstChild.literal;switch(t.type){case"emph":return"*"+e+"*";case"strong":return"**"+e+"**";case"strike":return"~~"+e+"~~";case"code":return"`"+e+"`";case"link":case"image":var n=t,r=n.destination,o=n.title,i="link"===t.type?"":"!";return i+"["+e+"]("+r+(o?' "'+o+'"':"")+")";default:return null}}function pe(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function de(t){var e=[],n=t.walker(),r=null;while(r=n.next()){var o=r.node;"text"===o.type&&e.push(o.literal)}return e.join("")}var fe=[],he={},me=/\$\$widget\d+\s/;function ve(t){var e=t.search(me);if(-1!==e){var n=t.substring(e),r=n.replace(me,"").replace("$$","");t=t.substring(0,e),t+=ve(r)}return t}function ge(t,e){return"$$"+t+" "+e+"$$"}function ye(t,e){var n=he[t],r=n.rule,o=n.toDOM;return e=ve(e).match(r)[0],o(e)}function be(){return fe}function we(t){fe=t,fe.forEach((function(t,e){he["widget"+e]=t}))}function ke(t,e,n,r){return t.concat(xe(e,n,r))}function xe(t,e,n){void 0===n&&(n=0);var r=[],o=(fe[n]||{}).rule,i=n+1;if(t=ve(t),o&&o.test(t)){var a=void 0;while(-1!==(a=t.search(o))){var s=t.substring(0,a);s&&(r=ke(r,s,e,i)),t=t.substring(a);var c=t.match(o)[0],l="widget"+n;r.push(e.nodes.widget.create({info:l},e.text(ge(l,c)))),t=t.substring(c.length)}t&&(r=ke(r,t,e,i))}else t&&(r=n<fe.length-1?ke(r,t,e,i):[e.text(t)]);return r}function Ce(t){var e,n="",r=t.walker();while(e=r.next()){var o=e.node,i=e.entering;i&&(o!==t&&"text"!==o.type?(n+=ue(o),r.resumeAt(t,!1),r.next()):"text"===o.type&&(n+=o.literal))}return n}function Me(){return{deleteSelection:function(){return c["c"]},selectAll:function(){return c["g"]},undo:function(){return u["c"]},redo:function(){return u["b"]}}}function Te(t){return new a["d"]({props:{decorations:function(e){var n=e.doc;if(t.text&&1===n.childCount&&n.firstChild.isTextblock&&0===n.firstChild.content.size){var r=document.createElement("span");return Q(r,"placeholder"),t.className&&Q(r,t.className),r.textContent=t.text,o["b"].create(n,[o["a"].widget(1,r)])}return null}}})}var Se=new a["e"]("widget"),Oe=function(){function t(t){var e=this;this.popup=null,this.removeWidget=function(){e.popup&&(document.body.removeChild(e.popup),e.popup=null)},this.eventEmitter=t,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return t.prototype.update=function(t){var e=Se.getState(t.state);if(this.removeWidget(),e){var n=e.node,r=e.style,o=t.coordsAtPos(e.pos),i=o.top,a=o.left,s=o.bottom,c=s-i;R(n,{position:"absolute",left:a+"px",opacity:"0"}),document.body.appendChild(n),R(n,{top:("bottom"===r?i+c:i-n.clientHeight-c)+"px",opacity:"1"}),this.popup=n,t.focus()}},t.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},t}();function Ee(t){return new a["d"]({key:Se,state:{init:function(){return null},apply:function(t){return t.getMeta("widget")}},view:function(){return new Oe(t)}})}var Ne=T;function De(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],Ne(t,(function(t){e.push(t)}))}return e}var Le=De;function Ie(t){t.listen("addImageBlobHook",(function(t,e){var n=new FileReader;n.onload=function(t){var n=t.target;return e(n.result)},n.readAsDataURL(t)}))}function Ae(t,e,n){var r=function(n,r){t.emit("command","addImage",{imageUrl:n,altText:r||e.name||"image"})};t.emit("addImageBlobHook",e,r,n)}function Re(t){var e=Le(t).filter((function(t){var e=t.type;return-1!==e.indexOf("image")}));if(1===e.length){var n=e[0];if(n)return n.getAsFile()}return null}function Pe(t){var e=t.eventEmitter;return new a["d"]({props:{handleDOMEvents:{drop:function(t,n){var r,o=null===(r=n.dataTransfer)||void 0===r?void 0:r.files;return o&&T(o,(function(t){return-1===t.type.indexOf("image")||(n.preventDefault(),n.stopPropagation(),Ae(e,t,n.type),!1)})),!0}}}})}var Be=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function je(t){var e=document.createElement("span"),n=ye(t.attrs.info,t.textContent);return e.className="tui-widget",e.appendChild(n),{dom:e}}function Fe(t){return"widget"===t.type.name}var He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(t){var e=t.textContent,n=e.match(/\$\$(widget\d+)/),r=n[1];return{info:r}}}]}},enumerable:!1,configurable:!0}),e}(Be),ze=function(){function t(t){this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=t,this.placeholder={text:""}}return t.prototype.createState=function(){return a["b"].create({schema:this.schema,plugins:this.createPlugins()})},t.prototype.initEvent=function(){var t=this,e=t.eventEmitter,n=t.view,r=t.editorType;n.dom.addEventListener("focus",(function(){return e.emit("focus",r)})),n.dom.addEventListener("blur",(function(){return e.emit("blur",r)}))},t.prototype.emitChangeEvent=function(t){this.eventEmitter.emit("caretChange",this.editorType),t.docChanged&&this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(t.prototype,"defaultPlugins",{get:function(){var t=Me(),e=t.undo,n=t.redo,r=this.createInputRules(),o=h(h([],this.keymaps),[Object(s["a"])(f({"Mod-z":e(),"Shift-Mod-z":n()},c["a"])),Object(u["a"])(),Te(this.placeholder),Ee(this.eventEmitter),Pe(this.context)]);return r?o.concat(r):o},enumerable:!1,configurable:!0}),t.prototype.createInputRules=function(){var t=be(),e=t.map((function(t){var e=t.rule;return new l["a"](e,(function(t,n,r,o){var i=t.schema,a=t.tr,s=t.doc,c=n.input.match(new RegExp(e,"g")),l=s.resolve(r),u=l.parent,p=0;if(Fe(u)&&(u=l.node(l.depth-1)),u.forEach((function(t){return Fe(t)&&(p+=1)})),c.length>p){var d=Rt(c),f=xe(d,i);return a.replaceWith(o-d.length+1,o,f)}return null}))}));return e.length?Object(l["b"])({rules:e}):null},t.prototype.createSchema=function(){return new r["i"]({nodes:this.specs.nodes,marks:this.specs.marks})},t.prototype.createKeymaps=function(t){return t?this.specs.keymaps():[]},t.prototype.createCommands=function(){return this.specs.commands(this.view)},t.prototype.createPluginProps=function(){var t=this;return this.extraPlugins.map((function(e){return e(t.eventEmitter)}))},t.prototype.focus=function(){var t=this;setTimeout((function(){t.view.focus(),t.view.dispatch(t.view.state.tr.scrollIntoView())}))},t.prototype.blur=function(){this.view.dom.blur()},t.prototype.destroy=function(){var t=this;this.view.destroy(),Object.keys(this).forEach((function(e){delete t[e]}))},t.prototype.moveCursorToStart=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection($t(e,1)).scrollIntoView()),t&&this.focus()},t.prototype.moveCursorToEnd=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection($t(e,e.doc.content.size-1)).scrollIntoView()),t&&this.focus()},t.prototype.setScrollTop=function(t){this.view.dom.scrollTop=t},t.prototype.getScrollTop=function(){return this.view.dom.scrollTop},t.prototype.setPlaceholder=function(t){this.placeholder.text=t,this.view.dispatch(this.view.state.tr.scrollIntoView())},t.prototype.setHeight=function(t){R(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){R(this.el,{minHeight:t+"px"})},t.prototype.getElement=function(){return this.el},t}();function Ve(t){return t instanceof Function}var qe=Ve;function _e(t,e,n){return t.focus(),e(n)(t.state,t.dispatch,t)}var $e=function(){function t(t){this.specs=t}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this.specs.filter((function(t){return"node"===t.type})).reduce((function(t,e){var n,r=e.name,o=e.schema;return f(f({},t),(n={},n[r]=o,n))}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marks",{get:function(){return this.specs.filter((function(t){return"mark"===t.type})).reduce((function(t,e){var n,r=e.name,o=e.schema;return f(f({},t),(n={},n[r]=o,n))}),{})},enumerable:!1,configurable:!0}),t.prototype.commands=function(t,e){var n=this.specs.filter((function(t){var e=t.commands;return e})).reduce((function(e,n){var r={},o=n.commands();return qe(o)?r[n.name]=function(e){return _e(t,o,e)}:Object.keys(o).forEach((function(e){r[e]=function(n){return _e(t,o[e],n)}})),f(f({},e),r)}),{}),r=Me();return Object.keys(r).forEach((function(e){n[e]=function(n){return _e(t,r[e],n)}})),e&&Object.keys(e).forEach((function(r){n[r]=function(n){return _e(t,e[r],n)}})),n},t.prototype.keymaps=function(){var t=this.specs.filter((function(t){return t.keymaps})).map((function(t){return t.keymaps()}));return t.map((function(t){return Object(s["a"])(t)}))},t.prototype.setContext=function(t){this.specs.forEach((function(e){e.setContext(t)}))},t}(),Ue=j,We=q;function Je(t,e){var n;return t.classList?t.classList.contains(e):(n=We(t).split(/\s+/),Ue(e,n)>-1)}var Ke=Je,Ge=j,Xe=Le,Ze=Element.prototype,Qe=Ze.matches||Ze.webkitMatchesSelector||Ze.mozMatchesSelector||Ze.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return Ge(this,Xe(e.querySelectorAll(t)))>-1};function Ye(t,e){return Qe.call(t,e)}var tn=Ye,en="[A-Za-z][A-Za-z0-9-]*",nn="[a-zA-Z_:][a-zA-Z0-9:._-]*",rn="[^\"'=<>`\\x00-\\x20]+",on="'[^']*'",an='"[^"]*"',sn="(?:"+rn+"|"+on+"|"+an+")",cn="(?:\\s*=\\s*"+sn+")",ln="(?:\\s+"+nn+cn+"?)",un="<("+en+")("+ln+")*\\s*/?>",pn="</("+en+")\\s*[>]",dn="(?:"+un+"|"+pn+")",fn=new RegExp("^"+dn,"i");function hn(t,e,n){var r=parseInt(t.left,10),o=parseInt(t.top,10),i=parseInt(t.width,10)+parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10),a=parseInt(t.height,10)+parseInt(t.paddingTop,10)+parseInt(t.paddingBottom,10);return e>=r&&e<=r+i&&n>=o&&n<=o+a}var mn="toastui-editor-";function vn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r],a=void 0;a=Array.isArray(i)?i[0]?i[1]:null:i,a&&n.push(""+mn+a)}return n.join(" ")}function gn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return mn+"md-"+t})).join(" ")}function yn(t){return(null===t||void 0===t?void 0:t.nodeType)===Node.TEXT_NODE}function bn(t){return t&&t.nodeType===Node.ELEMENT_NODE}function wn(t,e){var n=Le(t.querySelectorAll(e));return n.length?n:[]}function kn(t,e){e=C(e)?Le(e):[e],e.forEach((function(e){t.appendChild(e)}))}function xn(t,e){e.parentNode&&e.parentNode.insertBefore(t,e)}function Cn(t){t.parentNode&&t.parentNode.removeChild(t)}function Mn(t){var e=[];while(t.firstChild)e.push(t.firstChild),t.parentNode&&t.parentNode.insertBefore(t.firstChild,t);return Cn(t),e}function Tn(t,e,n){H(n)&&(n=!Ke(t,e));var r=n?Q:ot;r(t,e)}function Sn(t,e){var n=document.createElement("div");k(t)?n.innerHTML=t:n.appendChild(t);var r=n.firstChild;return e&&e.appendChild(r),r}function On(t){var e=window.getComputedStyle(t);return["margin-left","margin-right"].reduce((function(t,n){return t+parseInt(e.getPropertyValue(n),10)}),0)+t.offsetWidth}function En(t,e){var n;n=k(e)?function(t){return tn(t,e)}:function(t){return t===e};while(t&&t!==document){if(bn(t)&&n(t))return t;t=t.parentNode}return null}function Nn(t,e){var n=0,r=0;while(t&&t!==e){var o=t.offsetTop,i=t.offsetLeft,a=t.offsetParent;if(n+=o,r+=i,a===e.offsetParent)break;t=t.offsetParent}return{offsetTop:n,offsetLeft:r}}function Dn(t,e){var n;if(e)n=t.innerHTML;else{for(var r=document.createDocumentFragment(),o=Le(t.childNodes),i=o.length,a=0;a<i;a+=1)r.appendChild(o[a]);n=r}return n}function Ln(t,e){Object.keys(t).forEach((function(n){It(t[n])?e.removeAttribute(n):e.setAttribute(n,t[n])}))}function In(t){var e=/<br\s*\/*>/i,n=new RegExp(dn,"ig"),r=t.match(n);return null===r||void 0===r||r.forEach((function(n,o){if(e.test(n)){var i="";if(o){var a=r[o-1],s=a.match(un);if(s){var c=s[1];i="</"+c+"><"+c+">"}}t=t.replace(e,i)}})),t}function An(t){var e=t.from,n=t.to;return t instanceof a["a"]?[e+1,n-1]:[e,n]}function Rn(t){return t.index(0)+1}function Pn(t,e,n){void 0===n&&(n=1);var r=0;return t.forEach((function(t,o){Fe(t)&&o+2<e&&(r+=2*n)})),r}function Bn(t,e,n){void 0===n&&(n=e);var r=e===n,o=t.resolve(e),i=Rn(o),a=i,s=o.start(1),c=s;if(!r){var l=t.resolve(n===t.content.size?n-1:n);c=l.start(1),a=Rn(l),l.pos===t.content.size&&(n=t.content.size-2)}var u=Math.max(e-s+1,1),p=Math.max(n-c+1,1);return[[i,u+Pn(t.child(i-1),u,-1)],[a,p+Pn(t.child(a-1),p,-1)]]}function jn(t,e){for(var n=[],r=0,o=0;r<e;r+=1){var i=t.child(r);n[r]=o,o+=i.nodeSize}return n}function Fn(t,e,n){var r=jn(t,n[0]),o=e[0]-1,i=n[0]-1,a=t.child(o),s=t.child(i),c=r[o],l=r[i];return c+=e[1]+Pn(a,e[1]-1),l+=n[1]+Pn(s,n[1]-1),[c,Math.min(l,t.content.size)]}function Hn(t){var e=t.$from,n=t.$to,r=t.from,o=t.to,i=e.doc;return t instanceof a["a"]&&(e=i.resolve(r+1),n=i.resolve(o-1)),0===e.depth&&(e=i.resolve(r-1),n=e),{startFromOffset:e.start(1),endFromOffset:n.start(1),startToOffset:e.end(1),endToOffset:n.end(1),startIndex:e.index(0),endIndex:n.index(0),from:e.pos,to:n.pos}}function zn(t,e){for(var n=1,r=1,o=0,i=0;o<t.childCount;o+=1){var a=t.child(o).nodeSize;if(n=i+1,r=i+a-1,o===e)break;i+=a}return{startOffset:n,endOffset:r}}var Vn="heading",qn="blockQuote",_n="listItem",$n="table",Un="tableCell",Wn="codeBlock",Jn="thematicBreak",Kn="link",Gn="code",Xn="meta",Zn="delimiter",Qn="taskDelimiter",Yn="markedText",tr="html",er="customBlock",nr={strong:2,emph:1,strike:2};function rr(t,e,n,r){return{start:t,end:e,spec:{type:n,attrs:r}}}function or(t,e,n){var r=t.level,o=t.headingType,i=[rr(e,n,Vn,{level:r})];return"atx"===o?i.push(rr(e,ce(e,r),Zn)):i.push(rr(le(n,0),n,Vn,{seText:!0})),i}function ir(t,e,n){var r=t.type,o=ce(e,nr[r]),i=ce(n,-nr[r]);return[rr(o,i,r),rr(e,o,Zn),rr(i,n,Zn)]}function ar(t,e,n,r){return[rr(t,e,Kn),rr(le(t,n[1]+1),le(e,r),Kn,{desc:!0}),rr(le(e,r+2),ce(e,-1),Kn,{url:!0})]}function sr(t,e,n){var r=t.lastChild,o=r?Zt(r)+1:3,i=ce(e,1);return h([rr(e,i,Xn)],ar(e,n,i,o))}function cr(t,e,n){var r=t.lastChild,o=t.extendedAutolink,i=r?Zt(r)+1:2;return o?[rr(e,n,Kn,{desc:!0})]:ar(e,n,e,i)}function lr(t,e,n){var r=t.tickCount,o=ce(e,r),i=ce(n,-r);return[rr(e,n,Gn),rr(e,o,Gn,{start:!0}),rr(o,i,Gn,{marked:!0}),rr(i,n,Gn,{end:!0})]}function ur(t,e,n,r){var o={start:e,end:n,spec:{attrs:{className:r+"-line-background",codeStart:e[0],codeEnd:n[0]}},lineBackground:!0};return"item"!==t.type&&"blockQuote"!==t.type?[f(f({},o),{end:e,spec:{attrs:{className:r+"-line-background start"}}}),f(f({},o),{start:[Math.min(e[0]+1,n[0]),e[1]]})]:null}function pr(t,e,n,r){var o=t.fenceOffset,i=t.fenceLength,a=t.fenceChar,s=t.info,c=t.infoPadding,l=t.parent,u=o+i,p=[rr(le(e,1),n,Wn)];a&&p.push(rr(e,ce(e,u),Zn)),s&&p.push(rr(ce(e,i),ce(e,i+c+s.length),Xn));var d="^(\\s{0,4})("+a+"{"+i+",})",f=new RegExp(d);f.test(r)&&p.push(rr(le(n,1),n,Zn));var h=ur(l,e,n,"code-block");return h?p.concat(h):p}function dr(t,e,n){var r=t,o=r.offset,i=r.syntaxLength,a=r.info,s=r.parent,c=o+i,l=[rr(le(e,1),n,er)];l.push(rr(e,ce(e,c),Zn)),a&&l.push(rr(ce(e,c),ce(e,i+a.length),Xn)),l.push(rr(le(n,1),n,Zn));var u=ur(s,e,n,"custom-block");return u?l.concat(u):l}function fr(t,e){var n=[];while(t){var r=t.type;"paragraph"!==r&&"codeBlock"!==r||n.push(rr([Kt(t),Xt(t)-1],[Gt(t),Zt(t)+1],e)),t=t.next}return n}function hr(t){var e=[];while(t)e.push(rr([Kt(t),Xt(t)],[Gt(t),Zt(t)+1],Yn)),t=t.next;return e}function mr(t,e,n){var r=t.parent&&"blockQuote"!==t.parent.type?[rr(e,n,qn)]:[];if(t.firstChild){var o=[];"paragraph"===t.firstChild.type?o=hr(t.firstChild.firstChild):"list"===t.firstChild.type&&(o=fr(t.firstChild,Yn)),r=h(h([],r),o)}return r}function vr(t){var e=0;while(t.parent.parent&&"item"===t.parent.parent.type)t=t.parent.parent,e+=1;var n=[{odd:!0},{even:!0}][e%2];return[_n,f(f({},n),{listStyle:!0})]}function gr(t,e){var n=t.listData,r=n.padding,o=n.task,i=vr(t),a=[rr.apply(void 0,h([e,ce(e,r)],i))];return o&&(a.push(rr(ce(e,r),ce(e,r+3),Qn)),a.push(rr(ce(e,r+1),ce(e,r+2),Xn))),a.concat(fr(t.firstChild,Yn))}var yr={heading:or,strong:ir,emph:ir,strike:ir,link:cr,image:sr,code:lr,codeBlock:pr,blockQuote:mr,item:gr,customBlock:dr},br={thematicBreak:Jn,table:$n,tableCell:Un,htmlInline:tr};function wr(t,e,n,r){var o=t.type;return qe(yr[o])?yr[o](t,e,n,r):br[o]?[rr(e,n,br[o])]:null}var kr={};function xr(t){var e=t.schema,n=t.toastMark;return new a["d"]({appendTransaction:function(t,r,o){var i=t[0],a=o.tr;if(i.docChanged){var s=[],c=i.getMeta("editResult");c.forEach((function(t){var e=t.nodes,r=t.removedNodeRange;if(e.length){s=s.concat(Er(a,e));for(var o=0,i=e;o<i.length;o++){var c=i[o],l=c.walker(),u=l.next();while(u){var p=u.node,d=u.entering;d&&(s=s.concat(Nr(p,n))),u=l.next()}}}else if(r)for(var f=a.doc.childCount-1,h=r.line,m=h[0],v=h[1],g=Math.min(m,f),y=Math.min(v,f),b=g;b<=y;b+=1)kr[b]=!0})),Tr(a,e,s)}return a.setMeta("widget",i.getMeta("widget"))}})}function Cr(t,e,n){return Object.keys(n).some((function(r){return n[r]!==t.child(e).attrs[r]}))}function Mr(t,e,n,r,o){void 0===o&&(o={});for(var i=r.startIndex,a=r.endIndex,s=r.from,c=r.to,l=!1,u=i;u<=a;u+=1)delete kr[u],l=Cr(e,u,o);l&&t.setBlockType(s,c,n,o)}function Tr(t,e,n){var r=t.doc,o=e.nodes.paragraph,i=jn(r,r.childCount);n.forEach((function(n){var a=n.start,s=n.end,c=n.spec,l=n.lineBackground,u=Math.min(a[0],r.childCount)-1,p=Math.min(s[0],r.childCount)-1,d=r.child(u),f=r.child(p),h=i[u],m=i[p];if(h+=a[1]+Pn(d,a[1]-1),m+=s[1]+Pn(f,s[1]-1),c)if(l){var v={from:h,to:m,startIndex:u,endIndex:p};Mr(t,r,o,v,c.attrs)}else t.addMark(h,m,e.mark(c.type,c.attrs));else t.removeMark(h,m)})),Sr(t,i,o)}function Sr(t,e,n){Object.keys(kr).forEach((function(r){var o=Number(r),i=Math.min(Number(r)+1,t.doc.childCount-1),a=e[o],s=e[i]-1;o===i&&(s+=2),t.setBlockType(a,s,n)}))}function Or(t,e,n){var r=[];kr={};for(var o=e[0]-1;o<n[0];o+=1){var i=t.child(o),a=i.attrs.codeEnd,s=i.attrs.codeStart;if(s&&a&&!Mt(r,s)){r.push(s),a=Math.min(a,t.childCount);for(var c=s-1,l=n[0],u=c;u<l;u+=1)kr[u]=!0}}}function Er(t,e){var n=t.doc,r=e[0].sourcepos[0],o=Rt(e).sourcepos,i=o[1],a=[r[0],r[1]],s=[i[0],i[1]+1],c=[];return Or(n,r,i),c.push({start:a,end:s}),c}function Nr(t,e){var n=e.getLineTexts(),r=[Kt(t),Xt(t)],o=[Gt(t),Zt(t)+1],i=wr(t,r,o,n[o[0]-1]);return null!==i&&void 0!==i?i:[]}function Dr(t){return ee(t)?t.listData.task?"taskList":"ordered"===t.listData.type?"orderedList":"bulletList":-1!==t.type.indexOf("table")?"table":t.type}function Lr(t){var e={},n=!0;return se(t,(function(t){var r=Dr(t);"customBlock"!==r&&"image"!==r&&"link"!==r&&("bulletList"===r||"orderedList"===r?n&&(e[r]=!0,n=!1):e[r]=!0)})),e}function Ir(t){var e=t.toastMark,n=t.eventEmitter;return new a["d"]({view:function(){return{update:function(t,r){var o=t.state,i=o.doc,a=o.selection;if(!(r&&r.doc.eq(i)&&r.selection.eq(a))){var s=a.from,c=o.doc.resolve(s).start(),l=o.doc.content.findIndex(s).index+1,u=s-c;s===c&&(u+=1);var p=[l,u],d=e.findNodeAtPosition(p),f=Lr(d);n.emit("changeToolbarState",{cursorPos:p,mdNode:d,toolbarState:f}),n.emit("setFocusedNode",d)}}}}})}var Ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(Be),Rr=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),t.prototype.setContext=function(t){this.context=t},t}();function Pr(t,e){return Br(t,e-1)}function Br(t,e){return t.child(e).textContent}var jr=/^\s*> ?/,Fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("block-quote")},0]}}},enumerable:!1,configurable:!0}),e.prototype.createBlockQuoteText=function(t,e){return e?t.replace(jr,"").trim():"> "+t.trim()},e.prototype.extendBlockQuote=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.tr,a=e.schema,s=Hn(r),c=s.endFromOffset,l=s.endToOffset,u=s.endIndex,p=s.to,d=Br(o,u),f=jr.test(d);if(f&&p>c&&r.empty){var h=!d.replace(jr,"").trim();if(h)i.deleteRange(c,l).split(i.mapping.map(l));else{var m=d.slice(p-c).trim(),v=_t(a,t.createBlockQuoteText(m));Jt(i,l,m,v)}return n(i),!0}return!1}},e.prototype.commands=function(){var t=this;return function(){return function(e,n){var r=e.selection,o=e.doc,i=Hn(r),a=i.startFromOffset,s=i.endToOffset,c=i.startIndex,l=i.endIndex,u=jr.test(Br(o,c)),p=Wt({state:e,startIndex:c,endIndex:l,from:a,createText:function(e){return t.createBlockQuoteText(e,u)}});return n(p.setSelection($t(p,p.mapping.map(s)))),!0}}},e.prototype.keymaps=function(){var t=this.commands()();return{"alt-q":t,"alt-Q":t,Enter:this.extendBlockQuote()}},e}(Rr),Hr=/(^\s*)([-*+] |[\d]+\. )/,zr=/(^\s*)([\d])+\.( \[[ xX]])? /,Vr=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,qr=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,_r=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,$r=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,Ur=/(^\s*)([-*+])( \[[ xX]]) /;function Wr(t){return zr.test(t)?"ordered":"bullet"}function Jr(t){var e=0;while(t&&"document"!==t.type)"list"===t.type&&(e+=1),t=t.parent;return e}function Kr(t,e,n,r){var o=t.getLineTexts(),i=o.length,a=[],s=e;while(r?s<i:s>1){s=r?s+1:s-1;var c=t.findFirstNodeAtLine(s),l=Jr(c);if(l===n)a.push({line:s,depth:n,mdNode:c});else if(l<n)break}return a}function Gr(t){var e=t.toastMark,n=t.mdNode,r=t.line,o=Jr(n),i=Kr(e,r,o,!1).reverse(),a=Kr(e,r,o,!0);return i.concat([{line:r,depth:o,mdNode:n}]).concat(a)}function Xr(t){if(!Hr.test(t))return"* "+t;var e=Wr(t);return"bullet"===e&&qr.test(t)?t=t.replace(Ur,"$1$2 "):"ordered"===e&&(t=t.replace(zr,"$1* ")),t}function Zr(t,e){if(!Hr.test(t))return e+". "+t;var n=Wr(t);if("bullet"===n||"ordered"===n&&qr.test(t))t=t.replace(qr,"$1"+e+". ");else if("ordered"===n){var r=Vr.exec(t)[3];Number(r)!==e&&(t=t.replace(zr,"$1"+e+". "))}return t}function Qr(t,e,n,r){void 0===r&&(r=0);var o=Number.MAX_VALUE,i=0,a=e.map((function(e,a){var s=e.line;o=Math.min(s-1,o),i=Math.max(s-1,i);var c=Pr(t,s);return c="bullet"===n?Xr(c):Zr(c,a+1+r),{text:c,line:s}}));return{changedResults:a,firstIndex:o,lastIndex:i}}function Yr(t,e){var n=Gr(e);return Qr(e.doc,n,t)}var to={bullet:function(t){return Yr("bullet",t)},ordered:function(t){return Yr("ordered",t)},task:function(t){var e=t.mdNode,n=t.doc,r=t.line,o=Pr(n,r);return e.listData.task?o=o.replace($r,"$1$2"):ee(e)&&(o=o.replace(Hr,"$1$2[ ] ")),{changedResults:[{text:o,line:r}]}}},eo={bullet:function(t){var e=t.doc,n=t.line,r=Pr(e,n),o=[{text:"* "+r,line:n}];return{changedResults:o}},ordered:function(t){for(var e=t.toastMark,n=t.doc,r=t.line,o=t.startLine,i=Pr(n,r),a=1,s=o,c=0,l=o-1;l>0;l-=1){var u=e.findFirstNodeAtLine(l),p=Pr(n,l),d=p&&!!ae(u,(function(t){return ee(t)})),f=Vr.exec(Pr(n,l));if(!f&&!d)break;if(f||!d){var h=f,m=h[1],v=h[3];if(!m){a=Number(v),s=l;break}}else c+=1}var g=a+r-s-c,y=[{text:g+". "+i,line:r}];return{changedResults:y}},task:function(t){var e=t.doc,n=t.line,r=Pr(e,n),o=[{text:"* [ ] "+r,line:n}];return{changedResults:o}}},no={bullet:function(t){var e=t.line,n=t.doc,r=Pr(n,e),o=_r.exec(r),i=o[1],a=o[2];return{listSyntax:""+i+a}},ordered:function(t){var e=t.toastMark,n=t.line,r=t.mdNode,o=t.doc,i=Jr(r),a=Pr(o,n),s=Vr.exec(a),c=s[1],l=s[3],u=s[4],p=Number(l)+1,d=""+c+p+u,h=Kr(e,n,i,!0),m=h.filter((function(t){var e=Vr.exec(Pr(o,t.line));return e&&e[1].length===c.length&&!!ae(t.mdNode,(function(t){return ne(t)}))}));return f({listSyntax:d},Qr(o,m,"ordered",p))}};function ro(t,e,n,r,o){var i=[],a=Pr(t,n),s=Vr.exec(a);while(s){var c=s[1],l=s[4],u=s[5],p=c.length;if(p===o)i.push(_t(e,""+c+r+l+u)),r+=1,n+=1;else if(p>o){var d=ro(t,e,n,1,p);n=d.line,i=i.concat(d.nodes)}if(p<o||n>t.childCount)break;a=Pr(t,n),s=Vr.exec(a)}return{nodes:i,line:n}}var oo=/(^\s{1,4})(.*)/;function io(t,e,n){return t<e||Hr.test(n)||jr.test(n)}function ao(t,e,n){var r=n.$from;0===r.depth&&(r=t.resolve(r.pos-1));var o=r.node(1),i=r.start(1),a=o.content.size;return o.rangeHasMark(0,a,e.marks.table)&&r.pos-i!==a&&r.pos!==i}function so(t,e){var n=e.from,r=e.to;if("indent"===e.type){var o=4;n+=o,r+=(e.lineLen+1)*o}else{var i=e.spaceLenList;n-=i[0];for(var a=0;a<i.length;a+=1)r-=i[a]}return $t(t,n,r)}var co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(t){var e=t.attrs;return e.className?["div",{class:gn(e.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),e.prototype.reorderList=function(t,e){var n=this.context,r=n.view,o=n.toastMark,i=n.schema,a=r.state,s=a.tr,c=a.selection,l=a.doc,u=o.findFirstNodeAtLine(t),p=u;while(u&&!re(u)&&"document"!==u.parent.type)if(u=u.parent,ne(u)){p=u;break}p&&(t=p.sourcepos[0][0]);var d=Vr.exec(Pr(l,t)),f=d[1],h=d[3],m=f.length,v=ro(l,i,t,Number(h),m),g=v.line,y=v.nodes;e=Math.max(e,g-1);for(var b=zn(l,t-1).startOffset,w=t-1;w<=e-1;w+=1){var k=l.child(w),x=k.nodeSize,C=k.content,M=s.mapping.map(b),T=M+C.size;s.replaceWith(M,T,y[w-t+1]),b+=x}var S=$t(s,c.from,c.to);r.dispatch(s.setSelection(S))},e.prototype.indent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var o=n.schema,i=n.selection,a=n.doc,s=Hn(i),c=s.from,l=s.to,u=s.startFromOffset,p=s.startIndex,d=s.endIndex;if(t&&ao(a,o,i))return!1;var f=Br(a,p);if(t&&io(c,l,f)||!t&&Hr.test(f)){var h=Wt({state:n,from:u,startIndex:p,endIndex:d,createText:function(t){return"    "+t}}),m={type:"indent",from:c,to:l,lineLen:d-p};r(h.setSelection(so(h,m))),Vr.test(f)&&e.reorderList(p+1,d+1)}else t&&r(n.tr.insert(l,_t(o,"    ")));return!0}}},e.prototype.outdent=function(t){var e=this;return void 0===t&&(t=!1),function(){return function(n,r){var o=n.selection,i=n.doc,a=n.schema,s=Hn(o),c=s.from,l=s.to,u=s.startFromOffset,p=s.startIndex,d=s.endIndex;if(t&&ao(i,a,o))return!1;var f=Br(i,p);if(t&&io(c,l,f)||!t&&Hr.test(f)){var h=[],m=Wt({state:n,from:u,startIndex:p,endIndex:d,createText:function(t){var e=oo.exec(t);return h.push(e?e[1].length:0),t.replace(oo,"$2")}}),v={type:"outdent",from:c,to:l,spaceLenList:h};r(m.setSelection(so(m,v))),Vr.test(f)&&e.reorderList(p+1,d+1)}else if(t){var g=f.slice(0,l-u),y=g.replace(/\s{1,4}$/,""),b=l-(g.length-y.length);r(n.tr.delete(b,l))}return!0}}},e.prototype.deleteLines=function(){var t=this;return function(e,n){var r=t.context.view,o=Hn(e.selection),i=o.startFromOffset,a=o.endToOffset,s=function(){return n(e.tr.deleteRange(i,a)),!0};return Object(c["b"])(s,c["e"])(e,n,r)}},e.prototype.moveDown=function(){return function(t,e){var n=t.doc,r=t.tr,o=t.selection,i=t.schema,a=Hn(o),s=a.startFromOffset,c=a.endToOffset,l=a.endIndex;if(l<n.content.childCount-1){var u=n.child(l+1),p=u.nodeSize,d=u.textContent;return r.delete(c,c+p).split(s).insert(r.mapping.map(s)-2,_t(i,d)),e(r),!0}return!1}},e.prototype.moveUp=function(){return function(t,e){var n=t.tr,r=t.doc,o=t.selection,i=t.schema,a=Hn(o),s=a.startFromOffset,c=a.endToOffset,l=a.startIndex;if(l>0){var u=r.child(l-1),p=u.nodeSize,d=u.textContent;return n.delete(s-p,s).split(n.mapping.map(c)).insert(n.mapping.map(c),_t(i,d)),e(n),!0}return!1}},e.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},e.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},e}(Be),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e}(Be),uo=/^#{1,6}\s/,po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.level,r=e.seText,o="heading|heading"+n;return r&&(o+="|delimiter|setext"),["span",{class:gn.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.createHeadingText=function(t,e,n){var r=e.replace(n,"").trim(),o="";while(t>0)o+="#",t-=1;return o+" "+r},e.prototype.commands=function(){var t=this;return function(e){return function(n,r){var o=e.level,i=Hn(n.selection),a=i.startFromOffset,s=i.endToOffset,c=i.startIndex,l=i.endIndex,u=Wt({state:n,from:a,startIndex:c,endIndex:l,createText:function(e){var n=e.match(uo),r=n?n[0]:"";return t.createHeadingText(o,e,r)}});return r(u.setSelection($t(u,u.mapping.map(s)))),!0}}},e}(Rr),fo="```",ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("code-block")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=t.tr,i=Hn(n),a=i.startFromOffset,s=i.endToOffset,c=_t(r,fo);return o.insert(a,c).split(a+fo.length),o.split(o.mapping.map(s)).insert(o.mapping.map(s),c),e(o.setSelection($t(o,o.mapping.map(s)-(fo.length+2)))),!0}}},e.prototype.keepIndentation=function(){var t=this;return function(e,n){var r=e.selection,o=e.tr,i=e.doc,a=e.schema,s=t.context.toastMark,c=Hn(r),l=c.startFromOffset,u=c.endToOffset,p=c.endIndex,d=c.from,f=c.to,h=Br(i,p);if(d===f&&h.trim()){var m=h.match(/^\s+/),v=s.findFirstNodeAtLine(p+1);if(te(v)&&m){var g=m[0],y=h.slice(f-l),b=_t(a,g+y);return Jt(o,u,y,b),n(o),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,Enter:this.keepIndentation()}},e}(Rr),mo=/\||\s/g;function vo(t){return[yo(t),yo(t,!0)]}function go(t,e){for(var n=[],r=0;r<e;r+=1)n.push(yo(t));return n}function yo(t,e){for(var n="|",r=0;r<t;r+=1)n+=e?" --- |":"  |";return n}function bo(t){return t?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("table")},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendTable=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.tr,a=e.schema;if(!r.empty)return!1;var s=Hn(r),c=s.endFromOffset,l=s.endToOffset,u=s.endIndex,p=s.to,d=Br(o,u),f=[u+1,p-c+1],h=t.context.toastMark.findNodeAtPosition(f),m=ae(h,(function(t){return oe(t)&&("tableDelimRow"===t.parent.type||"tableBody"===t.parent.parent.type)}));if(m){var v=!d.replace(mo,"").trim(),g=m.parent,y=g.parent.parent.columns.length,b=yo(y);return v?i.deleteRange(c,l).split(i.mapping.map(l)):i.split(l).insert(i.mapping.map(l),_t(a,b)).setSelection($t(i,i.mapping.map(l)-2)),n(i),!0}return!1}},e.prototype.moveTableCell=function(t){var e=this;return function(n,r){var o=n.selection,i=n.tr,a=Hn(o),s=a.endFromOffset,c=a.endIndex,l=a.to,u=[c+1,l-s],p=e.context.toastMark.findNodeAtPosition(u),d=ae(p,(function(t){return oe(t)}));if(d){var f=d.parent,h=bo(t),m=h.type,v=h.parentType,g=h.childType,y=Zt(d);if(d[m])y=Zt(d[m])-1;else{var b=f[m]||f.parent.type!==v?f[m]:f.parent[m][g];if("next"===m){var w=b?Zt(b[g]):0;y+=w+2}else"prev"===m&&(y=b?-4:0)}return r(i.setSelection($t(i,s+y))),!0}return!1}},e.prototype.addTable=function(){return function(t){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=t,s=a.columnCount,c=a.rowCount,l=Hn(r).endToOffset,u=vo(s),p=go(s,c-1),d=h(h([],u),p);return d.forEach((function(t){o.split(o.mapping.map(l)).insert(o.mapping.map(l),_t(i,t))})),n(o.setSelection($t(o,l+4))),!0}}},e.prototype.commands=function(){return{addTable:this.addTable()}},e.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},e}(Rr),ko="***",xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("thematic-break")},0]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=t.tr,i=Hn(n),a=i.from,s=i.to,c=i.endToOffset,l=_t(r,ko);return o.split(a).replaceWith(o.mapping.map(a),o.mapping.map(s),l).split(o.mapping.map(s)).setSelection($t(o,o.mapping.map(c))),e(o),!0}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(Rr);function Co(t){var e=t.type;return"codeBlock"===e||"heading"===e||-1!==e.indexOf("table")}var Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.odd,r=e.even,o=e.listStyle,i="list-item";return o&&(i+="|list-item-style"),n&&(i+="|list-item-odd"),r&&(i+="|list-item-even"),["span",{class:gn.apply(void 0,i.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.extendList=function(){var t=this;return function(e,n){var r=e.selection,o=e.doc,i=e.schema,a=e.tr,s=t.context.toastMark,c=Hn(r),l=c.to,u=c.startFromOffset,p=c.endFromOffset,d=c.endIndex,f=c.endToOffset,h=Br(o,d),m=Hr.test(h);if(!m||r.from===u||!r.empty)return!1;var v=!h.replace(qr,"").trim();if(v)a.deleteRange(p,f).split(a.mapping.map(f));else{var g=Wr(h),y=s.findFirstNodeAtLine(d+1),b=h.slice(l-p),w={toastMark:s,mdNode:y,doc:o,line:d+1},k=no[g](w),x=k.listSyntax,C=k.changedResults;if(null===C||void 0===C?void 0:C.length){a.split(l),C.unshift({text:x+b,line:d+1}),t.changeToListPerLine(a,C,{from:l,startLine:C[0].line,endLine:Rt(C).line});var M=a.mapping.map(f)-b.length;a.setSelection($t(a,M))}else{var T=_t(i,x+b);Jt(a,f,b,T)}}return n(a),!0}},e.prototype.toList=function(t){var e=this;return function(){return function(n,r){for(var o=n.doc,i=n.tr,a=n.selection,s=e.context.toastMark,c=Hn(a),l=c.startIndex+1,u=c.endIndex+1,p=c.endToOffset,d=[],f=l;f<=u;f+=1){var h=s.findFirstNodeAtLine(f);if(h&&Co(h))break;if(-1===d.indexOf(f)){var m={toastMark:s,mdNode:h,doc:o,line:f,startLine:l},v=(ee(h)?to[t](m):eo[t](m)).changedResults,g=e.changeToListPerLine(i,v,{from:zn(o,v[0].line-1).startOffset,startLine:v[0].line,endLine:Rt(v).line,indexDiff:1});p=Math.max(g,p),v&&(d=d.concat(v.map((function(t){return t.line}))))}}return r(i.setSelection($t(i,i.mapping.map(p)))),!0}}},e.prototype.changeToListPerLine=function(t,e,n){for(var r=n.from,o=n.startLine,i=n.endLine,a=n.indexDiff,s=void 0===a?0:a,c=0,l=function(n){var o=t.doc.child(n),i=o.nodeSize,a=o.content,l=t.mapping.map(r),p=l+a.size,d=e.filter((function(t){return t.line-s===n}))[0];d&&(t.replaceWith(l,p,_t(u.context.schema,d.text)),c=Math.max(c,r+a.size)),r+=i},u=this,p=o-s;p<=i-s;p+=1)l(p);return c},e.prototype.toggleTask=function(){var t=this;return function(e,n){for(var r=e.selection,o=e.tr,i=e.doc,a=e.schema,s=t.context.toastMark,c=Hn(r),l=c.startIndex,u=c.endIndex,p=null,d=l;d<=u;d+=1){var f=s.findFirstNodeAtLine(d+1);if(ee(f)&&f.listData.task){var h=f.listData,m=h.checked,v=h.padding,g=m?" ":"x",y=f.sourcepos[0],b=zn(i,y[0]-1).startOffset;b+=y[1]+v,p=o.replaceWith(b,b+1,a.text(g))}}return!!p&&(n(p),!0)}},e.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},e.prototype.keymaps=function(){var t=this.toList("bullet")(),e=this.toList("ordered")(),n=this.toList("task")(),r=this.toggleTask();return{"Mod-u":t,"Mod-U":t,"Mod-o":e,"Mod-O":e,"alt-t":n,"alt-T":n,"Shift-Ctrl-x":r,"Shift-Ctrl-X":r,Enter:this.extendList()}},e}(Rr);function To(t,e){return function(){return function(n,r){var o=n.tr,i=n.selection,a=qe(t)?t:function(e){return t.test(e)},s=e.length,c=o.doc,l=An(i),u=l[0],p=l[1],d=Math.max(u-s,1),f=Math.min(p+s,c.content.size-1),h=i.content(),m=h.content.textBetween(0,h.content.size,"\n"),v=c.textBetween(d,u,"\n"),g=c.textBetween(p,f,"\n");if(m=""+v+m+g,v&&g&&a(m))o.delete(f-s,f).delete(d,d+s);else{o.insertText(e,p).insertText(e,u);var y=i.empty?$t(o,u+s):$t(o,u+s,p+s);o.setSelection(y)}return r(o),!0}}}var So=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,Oo="**",Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("strong")},0]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return To(So,Oo)},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Rr),No=/^(~{2}).*([\s\S]*)\1$/m,Do="~~",Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("strike")},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return To(No,Do)},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Rr),Io=/^(\*|_).*([\s\S]*)\1$/m,Ao="*",Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("emph")},0]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return To(Io,Ao)},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Rr),Po=/^(`).*([\s\S]*)\1$/m,Bo="`",jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.start,r=e.end,o=e.marked,i="code";return n&&(i+="|delimiter|start"),r&&(i+="|delimiter|end"),o&&(i+="|marked-text"),["span",{class:gn.apply(void 0,i.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return To(Po,Bo)},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Rr),Fo=[{regExp:/\(/g,encoded:"%28",escaped:"\\("},{regExp:/\)/g,encoded:"%29",escaped:"\\)"},{regExp:/\[/g,encoded:"%5B",escaped:"\\["},{regExp:/\]/g,encoded:"%5D",escaped:"\\]"},{regExp:/</g,encoded:"%3C",escaped:"\\<"},{regExp:/>/g,encoded:"%3E",escaped:"\\>"},{regExp:/ /g,encoded:"%20",escaped:" "}];function Ho(t){return Fo.reduce((function(t,e){var n=e.regExp,r=e.escaped;return t.replace(n,r)}),t)}function zo(t){return Fo.reduce((function(t,e){var n=e.regExp,r=e.encoded;return t.replace(n,r)}),t)}var Vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(t){var e=t.attrs,n=e.url,r=e.desc,o="link";return n&&(o+="|link-url|marked-text"),r&&(o+="|link-desc|marked-text"),["span",{class:gn.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),e.prototype.addLinkOrImage=function(t){return function(e){return function(n,r){var o=n.selection,i=n.tr,a=n.schema,s=An(o),c=s[0],l=s[1],u=e,p=u.linkText,d=u.altText,f=u.linkUrl,h=u.imageUrl,m=p,v=f,g="";return"image"===t&&(m=d,v=h,g="!"),m=Ho(m),v=zo(v),g+="["+m+"]("+v+")",r(i.replaceWith(c,l,_t(a,g))),!0}}},e.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},e}(Rr),qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),_o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("delimiter")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),$o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("meta")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("marked-text")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("table-cell")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),Jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("html")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:gn("custom-block")},0]}}},enumerable:!1,configurable:!0}),e}(Rr),Go=/x|backspace/i,Xo=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function Zo(t){var e=t.schema,n=t.toastMark;return new a["d"]({props:{handleDOMEvents:{keyup:function(t,r){var o,i=t.state,a=i.doc,s=i.tr,c=i.selection;if(c.empty&&Go.test(r.key)){var l=Hn(c),u=l.startIndex,p=l.startFromOffset,d=l.from,f=[u+1,d-p+1],h=n.findNodeAtPosition(f),m=ae(h,(function(t){var e;return"paragraph"===t.type&&"item"===(null===(e=t.parent)||void 0===e?void 0:e.type)}));if(null===(o=null===m||void 0===m?void 0:m.firstChild)||void 0===o?void 0:o.literal){var v=m.firstChild,g=v.literal.match(Xo);if(g){var y=v.sourcepos[0],b=g[1],w=g[2],k=g[3],x=b.length+k.length,C=zn(a,y[0]-1).startOffset,M=y[1]+C;if(w){var T=x?x+1:0;s.replaceWith(M,T+M,e.text(w)),t.dispatch(s)}else x||(s.insertText(" ",M),t.dispatch(s))}}}return!1}}}})}var Qo="cut",Yo=/\r\n|\n|\r/,ti=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.toastMark,i=n.useCommandShortcut,a=void 0===i||i,s=n.mdPlugins,c=void 0===s?[]:s;return r.editorType="markdown",r.el.classList.add("md-mode"),r.toastMark=o,r.extraPlugins=c,r.specs=r.createSpecs(),r.schema=r.createSchema(),r.context=r.createContext(),r.keymaps=r.createKeymaps(a),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(f(f({},r.context),{view:r.view})),r.createClipboard(),r.eventEmitter.listen("changePreviewTabWrite",(function(){return r.toggleActive(!0)})),r.eventEmitter.listen("changePreviewTabPreview",(function(){return r.toggleActive(!1)})),r.initEvent(),r}return d(e,t),e.prototype.toggleActive=function(t){Tn(this.el,"active",t),t?this.focus():this.blur()},e.prototype.createClipboard=function(){var t=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=vn("pseudo-clipboard"),this.clipboard.addEventListener("paste",(function(e){var n=e.clipboardData||window.clipboardData,r=n&&n.items;if(r){var o=Re(r);o&&(e.preventDefault(),Ae(t.eventEmitter,o,e.type))}})),this.clipboard.addEventListener("input",(function(e){var n=e.target.value;t.replaceSelection(n),e.preventDefault(),e.target.value=""})),this.el.insertBefore(this.clipboard,this.view.dom)},e.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSpecs=function(){return new $e([new Ar,new co,new He,new lo,new po,new Fr,new ho,new Ko,new wo,new Wo,new xo,new Mo,new Eo,new Lo,new Ro,new jo,new Vo,new _o,new qo,new Uo,new $o,new Jo])},e.prototype.createPlugins=function(){return this.defaultPlugins.concat(h([xr(this.context),Ir(this.context),Zo(this.context)],this.createPluginProps()))},e.prototype.createView=function(){var t=this;return new o["c"](this.el,{state:this.createState(),dispatchTransaction:function(e){t.updateMarkdown(e);var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e)},handleKeyDown:function(e,n){return(n.metaKey||n.ctrlKey)&&"V"===n.key.toUpperCase()&&t.clipboard.focus(),t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{copy:function(e,n){return t.captureCopy(n)},cut:function(e,n){return t.captureCopy(n,Qo)},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1}},nodeViews:{widget:je}})},e.prototype.createCommands=function(){return this.specs.commands(this.view)},e.prototype.captureCopy=function(t,e){t.preventDefault();var n=this.view.state,r=n.selection,o=n.tr;if(r.empty)return!0;var i=this.getChanged(r.content());return t.clipboardData?t.clipboardData.setData("text/plain",i):window.clipboardData.setData("Text",i),e===Qo&&this.view.dispatch(o.deleteSelection().scrollIntoView().setMeta("uiEvent",Qo)),!0},e.prototype.updateMarkdown=function(t){var e=this;t.docChanged&&t.steps.forEach((function(n,r){if(n.slice&&!(n instanceof i["b"])){var o=t.docs[r],a=[n.from,n.to],s=a[0],c=a[1],l=Bn(o,s,c),u=l[0],p=l[1],d=e.getChanged(n.slice);u[0]===p[0]&&u[1]===p[1]&&""===d&&(d="\n");var f=e.toastMark.editMarkdown(u,p,d);e.eventEmitter.emit("updatePreview",f),t.setMeta("editResult",f).scrollIntoView()}}))},e.prototype.getChanged=function(t){var e="",n=0,r=t.content.size;return t.content.nodesBetween(n,r,(function(t,o){t.isText?e+=t.text.slice(Math.max(n,o)-o,r-o):t.isBlock&&o>0&&(e+="\n")})),e},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=Fn(n.doc,t,e),o=r[0],i=r[1];this.view.dispatch(n.setSelection($t(n,o,i)).scrollIntoView())},e.prototype.replaceSelection=function(t,e,n){var o,i=this.view.state,a=i.tr,s=i.schema,c=i.doc,l=t.split(Yo),u=l.map((function(t){return qt(s,xe(t,s))})),p=new r["j"](r["c"].from(u),1,1);if(this.focus(),e&&n){var d=Fn(c,e,n),f=d[0],h=d[1];o=a.replaceRange(f,h,p)}else o=a.replaceSelection(p);this.view.dispatch(o.scrollIntoView())},e.prototype.deleteSelection=function(t,e){var n,r=this.view.state,o=r.tr,i=r.doc;if(t&&e){var a=Fn(i,t,e),s=a[0],c=a[1];n=o.deleteRange(s,c)}else n=o.deleteSelection();this.view.dispatch(n.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,o=n.selection,i=o.from,a=o.to;if(t&&e){var s=Fn(r,t,e);i=s[0],a=s[1]}return r.textBetween(i,a,"\n")},e.prototype.getSelection=function(){var t=this.view.state.selection,e=t.from,n=t.to;return Bn(this.view.state.tr.doc,e,n)},e.prototype.setMarkdown=function(t,e){void 0===e&&(e=!0);var n=t.split(Yo),r=this.view.state,o=r.tr,i=r.doc,a=r.schema,s=n.map((function(t){return qt(a,xe(t,a))}));this.view.dispatch(o.replaceWith(0,i.content.size,s)),e&&this.moveCursorToEnd(!0)},e.prototype.addWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.doc,a=r.selection,s=n?Fn(i,n,n)[0]:a.to;this.view.dispatch(o.setMeta("widget",{pos:s,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.schema,a=r.doc,s=Fn(a,t,e),c=xe(n,i);this.view.dispatch(o.replaceWith(s[0],s[1],c))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,o=t||Bn(n,r.from)[0],i=this.toastMark.findNodeAtPosition(o);return"text"===i.type&&"paragraph"!==i.parent.type&&(i=i.parent),i.sourcepos[1][1]+=1,{range:i.sourcepos,type:i.type}},e.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map((function(t){return ve(t)})).join("\n")},e.prototype.getToastMark=function(){return this.toastMark},e}(ze),ei="_feEventKey";function ni(t,e){var n,r=t[ei];return r||(r=t[ei]={}),n=r[e],n||(n=r[e]=[]),n}var ri=ni,oi=k,ii=D,ai=ri;function si(t,e,n){oi(e)?ii(e.split(/\s+/g),(function(e){ci(t,e,n)})):ii(e,(function(e,n){ci(t,n,e)}))}function ci(t,e,n){var r,o=ai(t,e);n?(ii(o,(function(o,i){return n!==o.handler||(li(t,e,o.wrappedHandler),r=i,!1)})),o.splice(r,1)):(ii(o,(function(n){li(t,e,n.wrappedHandler)})),o.splice(0,o.length))}function li(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}var ui=si,pi=k,di=D,fi=ri;function hi(t,e,n,r){pi(e)?di(e.split(/\s+/g),(function(e){mi(t,e,n,r)})):di(e,(function(e,r){mi(t,r,e,n)}))}function mi(t,e,n,r){function o(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),vi(t,e,n,o)}function vi(t,e,n,r){var o=fi(t,e),i=!1;di(o,(function(t){return t.handler!==n||(i=!0,!1)})),i||o.push({handler:n,wrappedHandler:r})}var gi=hi,yi=function(t,e){return yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},yi(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}yi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var wi=function(){return wi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},wi.apply(this,arguments)};function ki(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var xi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},Ci={};function Mi(t){var e,n,r=Ci[t];if(r)return r;for(r=Ci[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function Ti(t,e,n){var r,o,i,a,s,c="";for("string"!==typeof e&&(n=e,e=Ti.defaultChars),"undefined"===typeof n&&(n=!0),s=Mi(e),r=0,o=t.length;r<o;r++)if(i=t.charCodeAt(r),n&&37===i&&r+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3)))c+=t.slice(r,r+3),r+=2;else if(i<128)c+=s[i];else if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&r+1<o&&(a=t.charCodeAt(r+1),a>=56320&&a<=57343)){c+=encodeURIComponent(t[r]+t[r+1]),r++;continue}c+="%EF%BF%BD"}else c+=encodeURIComponent(t[r]);return c}Ti.defaultChars=";/?:@&=+$,-_.!~*'()#",Ti.componentChars="-_.!~*'()";var Si=Ti,Oi={},Ei={},Ni="",Di="",Li="",Ii="",Ai="",Ri="",Pi="",Bi="",ji="",Fi="",Hi="",zi="",Vi="",qi="",_i="",$i="",Ui="",Wi="",Ji="",Ki="",Gi="",Xi="",Zi="",Qi="",Yi="",ta="",ea="&",na="&",ra="",oa="",ia="",aa="",sa="",ca="",la="",ua="",pa="",da="",fa="",ha="",ma="",va="",ga="",ya="",ba="",wa="",ka="",xa="",Ca="",Ma="",Ta="",Sa="",Oa="",Ea="",Na="",Da="",La="",Ia="",Aa="",Ra="",Pa="",Ba="'",ja="",Fa="",Ha="",za="",Va="",qa="",_a="",$a="",Ua="*",Wa="",Ja="",Ka="",Ga="",Xa="",Za="",Qa="",Ya="",ts="",es="",ns="",rs="",os="",is="",as="",ss="",cs="",ls="",us="",ps="",ds="",fs="",hs="",ms="",vs="",gs="",ys="",bs="",ws="",ks="",xs="",Cs="",Ms="",Ts="",Ss="",Os="",Es="",Ns="",Ds="",Ls="",Is="",As="",Rs="",Ps="",Bs="",js="",Fs="",Hs="",zs="",Vs="",qs="",_s="",$s="",Us="",Ws="",Js="",Ks="",Gs="",Xs="",Zs="",Qs="",Ys="",tc="",ec="=",nc="",rc="",oc="",ic="",ac="",sc="",cc="",lc="",uc="",pc="",dc="",fc="",hc="",mc="",vc="",gc="",yc="",bc="",wc="",kc="",xc="",Cc="",Mc="",Tc="",Sc="",Oc="",Ec="",Nc="",Dc="",Lc="",Ic="",Ac="",Rc="",Pc="",Bc="",jc="",Fc="",Hc="",zc="",Vc="",qc="",_c="",$c="",Uc="",Wc="",Jc="",Kc="",Gc="",Xc="",Zc="",Qc="",Yc="",tl="",el="",nl="",rl="",ol="",il="",al="",sl="",cl="",ll="",ul="\\",pl="",dl="",fl="",hl="",ml="",vl="",gl="",yl="",bl="",wl="",kl="",xl="",Cl="",Ml="",Tl="",Sl="",Ol="",El="",Nl="",Dl="",Ll="",Il="",Al="",Rl="",Pl="",Bl="",jl="",Fl="",Hl="",zl="",Vl="",ql="",_l="",$l="",Ul="",Wl="",Jl="",Kl="",Gl="",Xl="",Zl="",Ql="",Yl="",tu="",eu="",nu="",ru="",ou="",iu="",au="",su="",cu="",lu="",uu="",pu="",du="",fu="",hu="",mu="",vu="",gu="",yu="",bu="",wu="",ku="",xu="",Cu="",Mu="",Tu="",Su="",Ou="",Eu="",Nu=":",Du="",Lu="",Iu="",Au="",Ru=",",Pu="@",Bu="",ju="",Fu="",Hu="",zu="",Vu="",qu="",_u="",$u="",Uu="",Wu="",Ju="",Ku="",Gu="",Xu="",Zu="",Qu="",Yu="",tp="",ep="",np="",rp="",op="",ip="",ap="",sp="",cp="",lp="",up="",pp="",dp="",fp="",hp="",mp="",vp="",gp="",yp="",bp="",wp="",kp="",xp="",Cp="",Mp="",Tp="",Sp="",Op="",Ep="",Np="",Dp="",Lp="",Ip="",Ap="",Rp="",Pp="",Bp="",jp="",Fp="",Hp="",zp="",Vp="",qp="",_p="",$p="",Up="",Wp="",Jp="",Kp="",Gp="",Xp="",Zp="",Qp="",Yp="",td="",ed="",nd="",rd="",od="",id="",ad="",sd="",cd="",ld="",ud="",pd="",dd="",fd="",hd="",md="",vd="",gd="",yd="",bd="",wd="`",kd="",xd="",Cd="",Md="",Td="",Sd="",Od="",Ed="",Nd="",Dd="",Ld="",Id="",Ad="",Rd="",Pd="",Bd="",jd="",Fd="",Hd="$",zd="",Vd="",qd="",_d="",$d="",Ud="",Wd="",Jd="",Kd="",Gd="",Xd="",Zd="",Qd="",Yd="",tf="",ef="",nf="",rf="",of="",af="",sf="",cf="",lf="",uf="",pf="",df="",ff="",hf="",mf="",vf="",gf="",yf="",bf="",wf="",kf="",xf="",Cf="",Mf="",Tf="",Sf="",Of="",Ef="",Nf="",Df="",Lf="",If="",Af="",Rf="",Pf="",Bf="",jf="",Ff="",Hf="",zf="",Vf="",qf="",_f="",$f="",Uf="",Wf="",Jf="",Kf="",Gf="",Xf="",Zf="",Qf="",Yf="",th="",eh="",nh="",rh="",oh="",ih="",ah="",sh="",ch="",lh="",uh="",ph="",dh="",fh="",hh="",mh="",vh="",gh="",yh="",bh="",wh="",kh="",xh="",Ch="",Mh="",Th="",Sh="",Oh="",Eh="",Nh="",Dh="",Lh="",Ih="",Ah="",Rh="",Ph="",Bh="",jh="",Fh="",Hh="",zh="",Vh="",qh="",_h="",$h="",Uh="",Wh="",Jh="",Kh="",Gh="",Xh="",Zh="",Qh="",Yh="",tm="",em="",nm="=",rm="",om="",im="",am="",sm="",cm="",lm="",um="",pm="",dm="",fm="",hm="",mm="",vm="",gm="",ym="",bm="",wm="",km="",xm="",Cm="!",Mm="",Tm="",Sm="",Om="",Em="",Nm="",Dm="",Lm="",Im="",Am="",Rm="",Pm="",Bm="",jm="",Fm="",Hm="",zm="",Vm="fj",qm="",_m="",$m="",Um="",Wm="",Jm="",Km="",Gm="",Xm="",Zm="",Qm="",Ym="",tv="",ev="",nv="",rv="",ov="",iv="",av="",sv="",cv="",lv="",uv="",pv="",dv="",fv="",hv="",mv="",vv="",gv="",yv="",bv="",wv="",kv="",xv="",Cv="",Mv="",Tv="",Sv="",Ov="",Ev="",Nv="",Dv="",Lv="",Iv="",Av="",Rv="",Pv="",Bv="",jv="",Fv="",Hv="",zv="",Vv="",qv="",_v="",$v="",Uv="",Wv="",Jv="",Kv="",Gv="",Xv="",Zv="",Qv="",Yv="",tg="",eg="",ng="",rg="",og="",ig="",ag="",sg="",cg="",lg="",ug="",pg="",dg="",fg="",hg="",mg="`",vg="",gg="",yg="",bg="",wg="",kg="",xg="",Cg="",Mg="",Tg="",Sg="",Og="",Eg="",Ng="",Dg=">",Lg=">",Ig="",Ag="",Rg="",Pg="",Bg="",jg="",Fg="",Hg="",zg="",Vg="",qg="",_g="",$g="",Ug="",Wg="",Jg="",Kg="",Gg="",Xg="",Zg="",Qg="",Yg="",ty="",ey="^",ny="",ry="",oy="",iy="",ay="",sy="",cy="",ly="",uy="",py="",dy="",fy="",hy="",my="",vy="",gy="",yy="",by="",wy="",ky="",xy="",Cy="",My="",Ty="",Sy="",Oy="",Ey="",Ny="",Dy="",Ly="",Iy="",Ay="",Ry="",Py="",By="",jy="",Fy="",Hy="",zy="",Vy="",qy="",_y="",$y="",Uy="",Wy="",Jy="",Ky="",Gy="",Xy="",Zy="",Qy="",Yy="",tb="",eb="",nb="",rb="",ob="",ib="",ab="",sb="",cb="",lb="",ub="",pb="",db="",fb="",hb="",mb="",vb="",gb="",yb="",bb="",wb="",kb="",xb="",Cb="",Mb="",Tb="",Sb="",Ob="",Eb="",Nb="",Db="",Lb="",Ib="",Ab="",Rb="",Pb="",Bb="",jb="",Fb="",Hb="",zb="",Vb="",qb="",_b="",$b="",Ub="",Wb="",Jb="",Kb="",Gb="",Xb="",Zb="",Qb="",Yb="",tw="",ew="",nw="",rw="",ow="",iw="",aw="",sw="",cw="",lw="",uw="",pw="",dw="",fw="",hw="",mw="",vw="",gw="",yw="",bw="",ww="",kw="",xw="",Cw="",Mw="",Tw="",Sw="",Ow="",Ew="",Nw="",Dw="",Lw="",Iw="",Aw="",Rw="",Pw="",Bw="",jw="",Fw="",Hw="",zw="",Vw="",qw="",_w="",$w="",Uw="",Ww="",Jw="",Kw="",Gw="",Xw="",Zw="",Qw="",Yw="",tk="",ek="",nk="",rk="",ok="",ik="",ak="",sk="",ck="",lk="{",uk="[",pk="",dk="",fk="",hk="",mk="",vk="",gk="",yk="",bk="{",wk="",kk="",xk="",Ck="",Mk="",Tk="",Sk="",Ok="",Ek="",Nk="",Dk="",Lk="",Ik="",Ak="",Rk="",Pk="",Bk="",jk="",Fk="",Hk="",zk="",Vk="",qk="",_k="",$k="",Uk="",Wk="",Jk="",Kk="",Gk="",Xk="",Zk="",Qk="",Yk="",tx="",ex="",nx="",rx="",ox="",ix="",ax="",sx="",cx="",lx="",ux="",px="",dx="",fx="",hx="",mx="",vx="",gx="",yx="",bx="",wx="",kx="",xx="",Cx="",Mx="",Tx="",Sx="",Ox="",Ex="",Nx="",Dx="",Lx="",Ix="",Ax="",Rx="",Px="",Bx="",jx="",Fx="",Hx="",zx="",Vx="",qx="",_x="",$x="",Ux="",Wx="",Jx="",Kx="",Gx="",Xx="",Zx="",Qx="",Yx="",tC="",eC="",nC="",rC="",oC="",iC="",aC="",sC="",cC="",lC="",uC="",pC="",dC="",fC="",hC="",mC="",vC="",gC="",yC="",bC="",wC="",kC="",xC="",CC="",MC="",TC="",SC="",OC="",EC="",NC="",DC="",LC="",IC="",AC="",RC="_",PC="",BC="",jC="",FC="",HC="",zC="(",VC="",qC="",_C="",$C="",UC="",WC="",JC="",KC="",GC="",XC="",ZC="",QC="",YC="",tM="",eM="",nM="[",rM="",oM="",iM="",aM="",sM="",cM="",lM="<",uM="<",pM="",dM="",fM="",hM="",mM="",vM="",gM="",yM="",bM="",wM="",kM="",xM="",CM="",MM="",TM="",SM="",OM="",EM="",NM="",DM="",LM="",IM="",AM="",RM="",PM="",BM="",jM="",FM="",HM="",zM="",VM="",qM="",_M="",$M="",UM="",WM="",JM="*",KM="",GM="",XM="",ZM="",QM="",YM="",tT="",eT="",nT="",rT="",oT="",iT="",aT="",sT="",cT="",lT="",uT="",pT="",dT="",fT="",hT="",mT="",vT="",gT="",yT="",bT="",wT="",kT="",xT="",CT="",MT="",TT="",ST="",OT="",ET="",NT="",DT="",LT="",IT="",AT="",RT="",PT="",BT="",jT="",FT="",HT="",zT="",VT="",qT="",_T="",$T="",UT="",WT="",JT="",KT="",GT="",XT="",ZT="",QT="",YT="",tS="",eS="",nS="",rS="\n",oS="",iS="",aS="",sS="",cS="",lS="",uS="",pS="",dS="",fS="",hS="",mS="",vS="",gS="",yS="",bS="",wS="",kS="",xS="",CS="",MS="",TS="",SS="",OS="",ES="",NS="",DS="",LS="",IS="",AS="",RS="",PS="",BS="",jS="",FS="",HS="",zS="",VS="",qS="",_S="",$S="",US="",WS="",JS="",KS="",GS="",XS="",ZS="",QS="",YS="",tO="",eO="",nO="",rO="",oO="",iO="",aO="",sO="",cO="",lO="",uO="",pO="",dO="",fO="",hO="",mO="",vO="",gO="",yO="",bO="",wO="",kO="",xO="",CO="",MO="",TO="",SO="",OO="",EO="",NO="",DO="",LO="",IO="",AO="",RO="",PO="",BO="",jO="",FO="",HO="",zO="",VO="",qO="",_O="",$O="",UO="",WO="",JO="",KO="",GO="",XO="",ZO="",QO="",YO="",tE="",eE="",nE="",rE="",oE="",iE="",aE="",sE="",cE="",lE="",uE="",pE="",dE="",fE="",hE="",mE="",vE="",gE="",yE="",bE="",wE="",kE="",xE="",CE="",ME="",TE="",SE="",OE="",EE="",NE="",DE="",LE="",IE="",AE="",RE="",PE="",BE="",jE="",FE="",HE="",zE="",VE="",qE="",_E="",$E="",UE="",WE="",JE="",KE="",GE="",XE="",ZE="",QE="",YE="",tN="",eN="",nN="",rN="",oN="",iN="",aN="",sN="",cN="",lN="",uN="",pN="",dN="#",fN="",hN="",mN="",vN="",gN="",yN="",bN="",wN="",kN=">",xN="",CN="",MN="",TN="",SN="<",ON="",EN="",NN="",DN="",LN="",IN="",AN="",RN="",PN="",BN="",jN="",FN="",HN="",zN="",VN="",qN="",_N="",$N="",UN="",WN="",JN="",KN="",GN="",XN="",ZN="",QN="",YN="",tD="",eD="",nD="",rD="",oD="",iD="",aD="",sD="",cD="",lD="",uD="",pD="",dD="",fD="",hD="",mD="",vD="",gD="",yD="",bD="",wD="",kD="",xD="",CD="",MD="",TD="",SD="",OD="",ED="",ND="",DD="",LD="",ID="",AD="",RD="",PD="",BD="",jD="",FD="",HD="",zD="",VD="",qD="",_D="",$D="",UD="",WD="",JD="",KD="",GD="",XD="",ZD="",QD="",YD="",tL="",eL="",nL="",rL="",oL="",iL="",aL="",sL="",cL="",lL="",uL="",pL="",dL="",fL="%",hL=".",mL="",vL="",gL="",yL="",bL="",wL="",kL="",xL="",CL="",ML="",TL="",SL="",OL="",EL="",NL="",DL="",LL="",IL="",AL="",RL="",PL="+",BL="",jL="",FL="",HL="",zL="",VL="",qL="",_L="",$L="",UL="",WL="",JL="",KL="",GL="",XL="",ZL="",QL="",YL="",tI="",eI="",nI="",rI="",oI="",iI="",aI="",sI="",cI="",lI="",uI="",pI="",dI="",fI="",hI="",mI="",vI="",gI="",yI="",bI="",wI="",kI="",xI="",CI="",MI="",TI="",SI="",OI="",EI="",NI="",DI="",LI="",II="",AI="",RI="",PI="",BI="",jI="",FI="",HI="",zI="",VI="",qI="",_I="",$I="",UI="?",WI="",JI='"',KI='"',GI="",XI="",ZI="",QI="",YI="",tA="",eA="",nA="",rA="",oA="",iA="",aA="",sA="",cA="",lA="",uA="",pA="",dA="",fA="",hA="",mA="",vA="",gA="",yA="",bA="",wA="",kA="",xA="",CA="",MA="",TA="",SA="",OA="",EA="",NA="",DA="}",LA="]",IA="",AA="",RA="",PA="",BA="",jA="",FA="",HA="",zA="}",VA="",qA="",_A="",$A="",UA="",WA="",JA="",KA="",GA="",XA="",ZA="",QA="",YA="",tR="",eR="",nR="",rR="",oR="",iR="",aR="",sR="",cR="",lR="",uR="",pR="",dR="",fR="",hR="",mR="",vR="",gR="",yR="",bR="",wR="",kR="",xR="",CR="",MR="",TR="",SR="",OR="",ER="",NR="",DR="",LR="",IR="",AR="",RR="",PR="",BR="",jR="",FR="",HR="",zR="",VR="",qR="",_R="",$R="",UR="",WR="",JR="",KR="",GR="",XR="",ZR="",QR="",YR="",tP="",eP="",nP="",rP="",oP="",iP="",aP="",sP="",cP="",lP="",uP="",pP=")",dP="",fP="",hP="",mP="",vP="",gP="",yP="",bP="",wP="",kP="]",xP="",CP="",MP="",TP="",SP="",OP="",EP="",NP="",DP="",LP="",IP="",AP="",RP="",PP="",BP="",jP="",FP="",HP="",zP="",VP="",qP="",_P="",$P="",UP="",WP="",JP="",KP="",GP="",XP="",ZP="",QP="",YP="",tB="",eB="",nB="",rB="",oB="",iB="",aB="",sB="",cB="",lB=";",uB="",pB="",dB="",fB="",hB="",mB="",vB="",gB="",yB="",bB="",wB="",kB="",xB="",CB="",MB="",TB="",SB="",OB="",EB="",NB="",DB="",LB="",IB="",AB="",RB="",PB="",BB="",jB="",FB="",HB="",zB="",VB="",qB="",_B="",$B="",UB="",WB="",JB="",KB="",GB="",XB="",ZB="",QB="",YB="",tj="",ej="",nj="",rj="",oj="/",ij="",aj="",sj="",cj="",lj="",uj="",pj="",dj="",fj="",hj="",mj="",vj="",gj="",yj="",bj="",wj="",kj="",xj="",Cj="",Mj="",Tj="",Sj="",Oj="",Ej="",Nj="",Dj="",Lj="",Ij="",Aj="",Rj="",Pj="",Bj="",jj="",Fj="",Hj="",zj="",Vj="",qj="",_j="",$j="",Uj="",Wj="",Jj="",Kj="",Gj="",Xj="",Zj="",Qj="",Yj="",tF="",eF="",nF="",rF="",oF="",iF="",aF="",sF="",cF="",lF="",uF="",pF="",dF="",fF="",hF="",mF="",vF="",gF="",yF="",bF="",wF="",kF="",xF="",CF="",MF="",TF="",SF="",OF="",EF="",NF="",DF="",LF="",IF="",AF="",RF="",PF="",BF="",jF="",FF="",HF="",zF="",VF="",qF="",_F="",$F="",UF="",WF="",JF="",KF="",GF="",XF="",ZF="",QF="",YF="",tH="",eH="",nH="",rH="",oH="",iH="",aH="",sH="",cH="",lH="\t",uH="",pH="",dH="",fH="",hH="",mH="",vH="",gH="",yH="",bH="",wH="",kH="",xH="",CH="",MH="",TH="",SH="",OH="",EH="",NH="",DH="",LH="",IH="",AH="",RH="",PH="",BH="",jH="",FH="",HH="",zH="",VH="",qH="",_H="",$H="",UH="",WH="",JH="",KH="",GH="",XH="",ZH="",QH="",YH="",tz="",ez="",nz="",rz="",oz="",iz="",az="",sz="",cz="",lz="",uz="",pz="",dz="",fz="",hz="",mz="",vz="",gz="",yz="",bz="",wz="",kz="",xz="",Cz="",Mz="",Tz="",Sz="",Oz="",Ez="",Nz="",Dz="",Lz="",Iz="",Az="",Rz="",Pz="",Bz="",jz="",Fz="",Hz="",zz="",Vz="",qz="",_z="",$z="",Uz="",Wz="",Jz="",Kz="",Gz="",Xz="",Zz="",Qz="",Yz="",tV="",eV="",nV="",rV="",oV="",iV="",aV="",sV="",cV="",lV="",uV="",pV="",dV="",fV="_",hV="",mV="",vV="",gV="",yV="",bV="",wV="",kV="",xV="",CV="",MV="",TV="",SV="",OV="",EV="",NV="",DV="",LV="",IV="",AV="",RV="",PV="",BV="",jV="",FV="",HV="",zV="",VV="",qV="",_V="",$V="",UV="",WV="",JV="",KV="",GV="",XV="",ZV="",QV="",YV="",tq="",eq="",nq="",rq="",oq="",iq="",aq="",sq="",cq="",lq="",uq="",pq="",dq="",fq="",hq="",mq="",vq="",gq="",yq="",bq="",wq="",kq="",xq="",Cq="",Mq="",Tq="",Sq="",Oq="",Eq="",Nq="",Dq="",Lq="",Iq="",Aq="",Rq="",Pq="",Bq="",jq="",Fq="",Hq="",zq="",Vq="|",qq="",_q="|",$q="",Uq="",Wq="|",Jq="",Kq="",Gq="",Xq="",Zq="",Qq="",Yq="",t_="",e_="",n_="",r_="",o_="",i_="",a_="",s_="",c_="",l_="",u_="",p_="",d_="",f_="",h_="",m_="",v_="",g_="",y_="",b_="",w_="",k_="",x_="",C_="",M_="",T_="",S_="",O_="",E_="",N_="",D_="",L_="",I_="",A_="",R_="",P_="",B_="",j_="",F_="",H_="",z_="",V_="",q_="",__="",$_="",U_="",W_="",J_="",K_="",G_="",X_="",Z_="",Q_="",Y_="",t$="",e$="",n$="",r$="",o$="",i$="",a$="",s$="",c$="",l$="",u$="",p$="",d$="",f$="",h$="",m$="",v$="",g$="",y$="",b$="",w$="",k$="",x$="",C$="",M$="",T$="",S$="",O$="",E$="",N$="",D$="",L$="",I$="",A$="",R$="",P$="",B$="",j$="",F$="",H$="",z$="",V$="",q$="",_$="",$$="",U$="",W$="",J$={Aacute:Ni,aacute:Di,Abreve:Li,abreve:Ii,ac:Ai,acd:Ri,acE:Pi,Acirc:Bi,acirc:ji,acute:Fi,Acy:Hi,acy:zi,AElig:Vi,aelig:qi,af:_i,Afr:$i,afr:Ui,Agrave:Wi,agrave:Ji,alefsym:Ki,aleph:Gi,Alpha:Xi,alpha:Zi,Amacr:Qi,amacr:Yi,amalg:ta,amp:ea,AMP:na,andand:ra,And:oa,and:ia,andd:aa,andslope:sa,andv:ca,ang:la,ange:ua,angle:pa,angmsdaa:da,angmsdab:fa,angmsdac:ha,angmsdad:ma,angmsdae:va,angmsdaf:ga,angmsdag:ya,angmsdah:ba,angmsd:wa,angrt:ka,angrtvb:xa,angrtvbd:Ca,angsph:Ma,angst:Ta,angzarr:Sa,Aogon:Oa,aogon:Ea,Aopf:Na,aopf:Da,apacir:La,ap:Ia,apE:Aa,ape:Ra,apid:Pa,apos:Ba,ApplyFunction:ja,approx:Fa,approxeq:Ha,Aring:za,aring:Va,Ascr:qa,ascr:_a,Assign:$a,ast:Ua,asymp:Wa,asympeq:Ja,Atilde:Ka,atilde:Ga,Auml:Xa,auml:Za,awconint:Qa,awint:Ya,backcong:ts,backepsilon:es,backprime:ns,backsim:rs,backsimeq:os,Backslash:is,Barv:as,barvee:ss,barwed:cs,Barwed:ls,barwedge:us,bbrk:ps,bbrktbrk:ds,bcong:fs,Bcy:hs,bcy:ms,bdquo:vs,becaus:gs,because:ys,Because:bs,bemptyv:ws,bepsi:ks,bernou:xs,Bernoullis:Cs,Beta:Ms,beta:Ts,beth:Ss,between:Os,Bfr:Es,bfr:Ns,bigcap:Ds,bigcirc:Ls,bigcup:Is,bigodot:As,bigoplus:Rs,bigotimes:Ps,bigsqcup:Bs,bigstar:js,bigtriangledown:Fs,bigtriangleup:Hs,biguplus:zs,bigvee:Vs,bigwedge:qs,bkarow:_s,blacklozenge:$s,blacksquare:Us,blacktriangle:Ws,blacktriangledown:Js,blacktriangleleft:Ks,blacktriangleright:Gs,blank:Xs,blk12:Zs,blk14:Qs,blk34:Ys,block:tc,bne:ec,bnequiv:nc,bNot:rc,bnot:oc,Bopf:ic,bopf:ac,bot:sc,bottom:cc,bowtie:lc,boxbox:uc,boxdl:pc,boxdL:dc,boxDl:fc,boxDL:hc,boxdr:mc,boxdR:vc,boxDr:gc,boxDR:yc,boxh:bc,boxH:wc,boxhd:kc,boxHd:xc,boxhD:Cc,boxHD:Mc,boxhu:Tc,boxHu:Sc,boxhU:Oc,boxHU:Ec,boxminus:Nc,boxplus:Dc,boxtimes:Lc,boxul:Ic,boxuL:Ac,boxUl:Rc,boxUL:Pc,boxur:Bc,boxuR:jc,boxUr:Fc,boxUR:Hc,boxv:zc,boxV:Vc,boxvh:qc,boxvH:_c,boxVh:$c,boxVH:Uc,boxvl:Wc,boxvL:Jc,boxVl:Kc,boxVL:Gc,boxvr:Xc,boxvR:Zc,boxVr:Qc,boxVR:Yc,bprime:tl,breve:el,Breve:nl,brvbar:rl,bscr:ol,Bscr:il,bsemi:al,bsim:sl,bsime:cl,bsolb:ll,bsol:ul,bsolhsub:pl,bull:dl,bullet:fl,bump:hl,bumpE:ml,bumpe:vl,Bumpeq:gl,bumpeq:yl,Cacute:bl,cacute:wl,capand:kl,capbrcup:xl,capcap:Cl,cap:Ml,Cap:Tl,capcup:Sl,capdot:Ol,CapitalDifferentialD:El,caps:Nl,caret:Dl,caron:Ll,Cayleys:Il,ccaps:Al,Ccaron:Rl,ccaron:Pl,Ccedil:Bl,ccedil:jl,Ccirc:Fl,ccirc:Hl,Cconint:zl,ccups:Vl,ccupssm:ql,Cdot:_l,cdot:$l,cedil:Ul,Cedilla:Wl,cemptyv:Jl,cent:Kl,centerdot:Gl,CenterDot:Xl,cfr:Zl,Cfr:Ql,CHcy:Yl,chcy:tu,check:eu,checkmark:nu,Chi:ru,chi:ou,circ:iu,circeq:au,circlearrowleft:su,circlearrowright:cu,circledast:lu,circledcirc:uu,circleddash:pu,CircleDot:du,circledR:fu,circledS:hu,CircleMinus:mu,CirclePlus:vu,CircleTimes:gu,cir:yu,cirE:bu,cire:wu,cirfnint:ku,cirmid:xu,cirscir:Cu,ClockwiseContourIntegral:Mu,CloseCurlyDoubleQuote:Tu,CloseCurlyQuote:Su,clubs:Ou,clubsuit:Eu,colon:Nu,Colon:Du,Colone:Lu,colone:Iu,coloneq:Au,comma:Ru,commat:Pu,comp:Bu,compfn:ju,complement:Fu,complexes:Hu,cong:zu,congdot:Vu,Congruent:qu,conint:_u,Conint:$u,ContourIntegral:Uu,copf:Wu,Copf:Ju,coprod:Ku,Coproduct:Gu,copy:Xu,COPY:Zu,copysr:Qu,CounterClockwiseContourIntegral:Yu,crarr:tp,cross:ep,Cross:np,Cscr:rp,cscr:op,csub:ip,csube:ap,csup:sp,csupe:cp,ctdot:lp,cudarrl:up,cudarrr:pp,cuepr:dp,cuesc:fp,cularr:hp,cularrp:mp,cupbrcap:vp,cupcap:gp,CupCap:yp,cup:bp,Cup:wp,cupcup:kp,cupdot:xp,cupor:Cp,cups:Mp,curarr:Tp,curarrm:Sp,curlyeqprec:Op,curlyeqsucc:Ep,curlyvee:Np,curlywedge:Dp,curren:Lp,curvearrowleft:Ip,curvearrowright:Ap,cuvee:Rp,cuwed:Pp,cwconint:Bp,cwint:jp,cylcty:Fp,dagger:Hp,Dagger:zp,daleth:Vp,darr:qp,Darr:_p,dArr:$p,dash:Up,Dashv:Wp,dashv:Jp,dbkarow:Kp,dblac:Gp,Dcaron:Xp,dcaron:Zp,Dcy:Qp,dcy:Yp,ddagger:td,ddarr:ed,DD:nd,dd:rd,DDotrahd:od,ddotseq:id,deg:ad,Del:sd,Delta:cd,delta:ld,demptyv:ud,dfisht:pd,Dfr:dd,dfr:fd,dHar:hd,dharl:md,dharr:vd,DiacriticalAcute:gd,DiacriticalDot:yd,DiacriticalDoubleAcute:bd,DiacriticalGrave:wd,DiacriticalTilde:kd,diam:xd,diamond:Cd,Diamond:Md,diamondsuit:Td,diams:Sd,die:Od,DifferentialD:Ed,digamma:Nd,disin:Dd,div:Ld,divide:Id,divideontimes:Ad,divonx:Rd,DJcy:Pd,djcy:Bd,dlcorn:jd,dlcrop:Fd,dollar:Hd,Dopf:zd,dopf:Vd,Dot:qd,dot:_d,DotDot:$d,doteq:Ud,doteqdot:Wd,DotEqual:Jd,dotminus:Kd,dotplus:Gd,dotsquare:Xd,doublebarwedge:Zd,DoubleContourIntegral:Qd,DoubleDot:Yd,DoubleDownArrow:tf,DoubleLeftArrow:ef,DoubleLeftRightArrow:nf,DoubleLeftTee:rf,DoubleLongLeftArrow:of,DoubleLongLeftRightArrow:af,DoubleLongRightArrow:sf,DoubleRightArrow:cf,DoubleRightTee:lf,DoubleUpArrow:uf,DoubleUpDownArrow:pf,DoubleVerticalBar:df,DownArrowBar:ff,downarrow:hf,DownArrow:mf,Downarrow:vf,DownArrowUpArrow:gf,DownBreve:yf,downdownarrows:bf,downharpoonleft:wf,downharpoonright:kf,DownLeftRightVector:xf,DownLeftTeeVector:Cf,DownLeftVectorBar:Mf,DownLeftVector:Tf,DownRightTeeVector:Sf,DownRightVectorBar:Of,DownRightVector:Ef,DownTeeArrow:Nf,DownTee:Df,drbkarow:Lf,drcorn:If,drcrop:Af,Dscr:Rf,dscr:Pf,DScy:Bf,dscy:jf,dsol:Ff,Dstrok:Hf,dstrok:zf,dtdot:Vf,dtri:qf,dtrif:_f,duarr:$f,duhar:Uf,dwangle:Wf,DZcy:Jf,dzcy:Kf,dzigrarr:Gf,Eacute:Xf,eacute:Zf,easter:Qf,Ecaron:Yf,ecaron:th,Ecirc:eh,ecirc:nh,ecir:rh,ecolon:oh,Ecy:ih,ecy:ah,eDDot:sh,Edot:ch,edot:lh,eDot:uh,ee:ph,efDot:dh,Efr:fh,efr:hh,eg:mh,Egrave:vh,egrave:gh,egs:yh,egsdot:bh,el:wh,Element:kh,elinters:xh,ell:Ch,els:Mh,elsdot:Th,Emacr:Sh,emacr:Oh,empty:Eh,emptyset:Nh,EmptySmallSquare:Dh,emptyv:Lh,EmptyVerySmallSquare:Ih,emsp13:Ah,emsp14:Rh,emsp:Ph,ENG:Bh,eng:jh,ensp:Fh,Eogon:Hh,eogon:zh,Eopf:Vh,eopf:qh,epar:_h,eparsl:$h,eplus:Uh,epsi:Wh,Epsilon:Jh,epsilon:Kh,epsiv:Gh,eqcirc:Xh,eqcolon:Zh,eqsim:Qh,eqslantgtr:Yh,eqslantless:tm,Equal:em,equals:nm,EqualTilde:rm,equest:om,Equilibrium:im,equiv:am,equivDD:sm,eqvparsl:cm,erarr:lm,erDot:um,escr:pm,Escr:dm,esdot:fm,Esim:hm,esim:mm,Eta:vm,eta:gm,ETH:ym,eth:bm,Euml:wm,euml:km,euro:xm,excl:Cm,exist:Mm,Exists:Tm,expectation:Sm,exponentiale:Om,ExponentialE:Em,fallingdotseq:Nm,Fcy:Dm,fcy:Lm,female:Im,ffilig:Am,fflig:Rm,ffllig:Pm,Ffr:Bm,ffr:jm,filig:Fm,FilledSmallSquare:Hm,FilledVerySmallSquare:zm,fjlig:Vm,flat:qm,fllig:_m,fltns:$m,fnof:Um,Fopf:Wm,fopf:Jm,forall:Km,ForAll:Gm,fork:Xm,forkv:Zm,Fouriertrf:Qm,fpartint:Ym,frac12:tv,frac13:ev,frac14:nv,frac15:rv,frac16:ov,frac18:iv,frac23:av,frac25:sv,frac34:cv,frac35:lv,frac38:uv,frac45:pv,frac56:dv,frac58:fv,frac78:hv,frasl:mv,frown:vv,fscr:gv,Fscr:yv,gacute:bv,Gamma:wv,gamma:kv,Gammad:xv,gammad:Cv,gap:Mv,Gbreve:Tv,gbreve:Sv,Gcedil:Ov,Gcirc:Ev,gcirc:Nv,Gcy:Dv,gcy:Lv,Gdot:Iv,gdot:Av,ge:Rv,gE:Pv,gEl:Bv,gel:jv,geq:Fv,geqq:Hv,geqslant:zv,gescc:Vv,ges:qv,gesdot:_v,gesdoto:$v,gesdotol:Uv,gesl:Wv,gesles:Jv,Gfr:Kv,gfr:Gv,gg:Xv,Gg:Zv,ggg:Qv,gimel:Yv,GJcy:tg,gjcy:eg,gla:ng,gl:rg,glE:og,glj:ig,gnap:ag,gnapprox:sg,gne:cg,gnE:lg,gneq:ug,gneqq:pg,gnsim:dg,Gopf:fg,gopf:hg,grave:mg,GreaterEqual:vg,GreaterEqualLess:gg,GreaterFullEqual:yg,GreaterGreater:bg,GreaterLess:wg,GreaterSlantEqual:kg,GreaterTilde:xg,Gscr:Cg,gscr:Mg,gsim:Tg,gsime:Sg,gsiml:Og,gtcc:Eg,gtcir:Ng,gt:Dg,GT:Lg,Gt:Ig,gtdot:Ag,gtlPar:Rg,gtquest:Pg,gtrapprox:Bg,gtrarr:jg,gtrdot:Fg,gtreqless:Hg,gtreqqless:zg,gtrless:Vg,gtrsim:qg,gvertneqq:_g,gvnE:$g,Hacek:Ug,hairsp:Wg,half:Jg,hamilt:Kg,HARDcy:Gg,hardcy:Xg,harrcir:Zg,harr:Qg,hArr:Yg,harrw:ty,Hat:ey,hbar:ny,Hcirc:ry,hcirc:oy,hearts:iy,heartsuit:ay,hellip:sy,hercon:cy,hfr:ly,Hfr:uy,HilbertSpace:py,hksearow:dy,hkswarow:fy,hoarr:hy,homtht:my,hookleftarrow:vy,hookrightarrow:gy,hopf:yy,Hopf:by,horbar:wy,HorizontalLine:ky,hscr:xy,Hscr:Cy,hslash:My,Hstrok:Ty,hstrok:Sy,HumpDownHump:Oy,HumpEqual:Ey,hybull:Ny,hyphen:Dy,Iacute:Ly,iacute:Iy,ic:Ay,Icirc:Ry,icirc:Py,Icy:By,icy:jy,Idot:Fy,IEcy:Hy,iecy:zy,iexcl:Vy,iff:qy,ifr:_y,Ifr:$y,Igrave:Uy,igrave:Wy,ii:Jy,iiiint:Ky,iiint:Gy,iinfin:Xy,iiota:Zy,IJlig:Qy,ijlig:Yy,Imacr:tb,imacr:eb,image:nb,ImaginaryI:rb,imagline:ob,imagpart:ib,imath:ab,Im:sb,imof:cb,imped:lb,Implies:ub,incare:pb,in:"",infin:db,infintie:fb,inodot:hb,intcal:mb,int:vb,Int:gb,integers:yb,Integral:bb,intercal:wb,Intersection:kb,intlarhk:xb,intprod:Cb,InvisibleComma:Mb,InvisibleTimes:Tb,IOcy:Sb,iocy:Ob,Iogon:Eb,iogon:Nb,Iopf:Db,iopf:Lb,Iota:Ib,iota:Ab,iprod:Rb,iquest:Pb,iscr:Bb,Iscr:jb,isin:Fb,isindot:Hb,isinE:zb,isins:Vb,isinsv:qb,isinv:_b,it:$b,Itilde:Ub,itilde:Wb,Iukcy:Jb,iukcy:Kb,Iuml:Gb,iuml:Xb,Jcirc:Zb,jcirc:Qb,Jcy:Yb,jcy:tw,Jfr:ew,jfr:nw,jmath:rw,Jopf:ow,jopf:iw,Jscr:aw,jscr:sw,Jsercy:cw,jsercy:lw,Jukcy:uw,jukcy:pw,Kappa:dw,kappa:fw,kappav:hw,Kcedil:mw,kcedil:vw,Kcy:gw,kcy:yw,Kfr:bw,kfr:ww,kgreen:kw,KHcy:xw,khcy:Cw,KJcy:Mw,kjcy:Tw,Kopf:Sw,kopf:Ow,Kscr:Ew,kscr:Nw,lAarr:Dw,Lacute:Lw,lacute:Iw,laemptyv:Aw,lagran:Rw,Lambda:Pw,lambda:Bw,lang:jw,Lang:Fw,langd:Hw,langle:zw,lap:Vw,Laplacetrf:qw,laquo:_w,larrb:$w,larrbfs:Uw,larr:Ww,Larr:Jw,lArr:Kw,larrfs:Gw,larrhk:Xw,larrlp:Zw,larrpl:Qw,larrsim:Yw,larrtl:tk,latail:ek,lAtail:nk,lat:rk,late:ok,lates:ik,lbarr:ak,lBarr:sk,lbbrk:ck,lbrace:lk,lbrack:uk,lbrke:pk,lbrksld:dk,lbrkslu:fk,Lcaron:hk,lcaron:mk,Lcedil:vk,lcedil:gk,lceil:yk,lcub:bk,Lcy:wk,lcy:kk,ldca:xk,ldquo:Ck,ldquor:Mk,ldrdhar:Tk,ldrushar:Sk,ldsh:Ok,le:Ek,lE:Nk,LeftAngleBracket:Dk,LeftArrowBar:Lk,leftarrow:Ik,LeftArrow:Ak,Leftarrow:Rk,LeftArrowRightArrow:Pk,leftarrowtail:Bk,LeftCeiling:jk,LeftDoubleBracket:Fk,LeftDownTeeVector:Hk,LeftDownVectorBar:zk,LeftDownVector:Vk,LeftFloor:qk,leftharpoondown:_k,leftharpoonup:$k,leftleftarrows:Uk,leftrightarrow:Wk,LeftRightArrow:Jk,Leftrightarrow:Kk,leftrightarrows:Gk,leftrightharpoons:Xk,leftrightsquigarrow:Zk,LeftRightVector:Qk,LeftTeeArrow:Yk,LeftTee:tx,LeftTeeVector:ex,leftthreetimes:nx,LeftTriangleBar:rx,LeftTriangle:ox,LeftTriangleEqual:ix,LeftUpDownVector:ax,LeftUpTeeVector:sx,LeftUpVectorBar:cx,LeftUpVector:lx,LeftVectorBar:ux,LeftVector:px,lEg:dx,leg:fx,leq:hx,leqq:mx,leqslant:vx,lescc:gx,les:yx,lesdot:bx,lesdoto:wx,lesdotor:kx,lesg:xx,lesges:Cx,lessapprox:Mx,lessdot:Tx,lesseqgtr:Sx,lesseqqgtr:Ox,LessEqualGreater:Ex,LessFullEqual:Nx,LessGreater:Dx,lessgtr:Lx,LessLess:Ix,lesssim:Ax,LessSlantEqual:Rx,LessTilde:Px,lfisht:Bx,lfloor:jx,Lfr:Fx,lfr:Hx,lg:zx,lgE:Vx,lHar:qx,lhard:_x,lharu:$x,lharul:Ux,lhblk:Wx,LJcy:Jx,ljcy:Kx,llarr:Gx,ll:Xx,Ll:Zx,llcorner:Qx,Lleftarrow:Yx,llhard:tC,lltri:eC,Lmidot:nC,lmidot:rC,lmoustache:oC,lmoust:iC,lnap:aC,lnapprox:sC,lne:cC,lnE:lC,lneq:uC,lneqq:pC,lnsim:dC,loang:fC,loarr:hC,lobrk:mC,longleftarrow:vC,LongLeftArrow:gC,Longleftarrow:yC,longleftrightarrow:bC,LongLeftRightArrow:wC,Longleftrightarrow:kC,longmapsto:xC,longrightarrow:CC,LongRightArrow:MC,Longrightarrow:TC,looparrowleft:SC,looparrowright:OC,lopar:EC,Lopf:NC,lopf:DC,loplus:LC,lotimes:IC,lowast:AC,lowbar:RC,LowerLeftArrow:PC,LowerRightArrow:BC,loz:jC,lozenge:FC,lozf:HC,lpar:zC,lparlt:VC,lrarr:qC,lrcorner:_C,lrhar:$C,lrhard:UC,lrm:WC,lrtri:JC,lsaquo:KC,lscr:GC,Lscr:XC,lsh:ZC,Lsh:QC,lsim:YC,lsime:tM,lsimg:eM,lsqb:nM,lsquo:rM,lsquor:oM,Lstrok:iM,lstrok:aM,ltcc:sM,ltcir:cM,lt:lM,LT:uM,Lt:pM,ltdot:dM,lthree:fM,ltimes:hM,ltlarr:mM,ltquest:vM,ltri:gM,ltrie:yM,ltrif:bM,ltrPar:wM,lurdshar:kM,luruhar:xM,lvertneqq:CM,lvnE:MM,macr:TM,male:SM,malt:OM,maltese:EM,Map:"",map:NM,mapsto:DM,mapstodown:LM,mapstoleft:IM,mapstoup:AM,marker:RM,mcomma:PM,Mcy:BM,mcy:jM,mdash:FM,mDDot:HM,measuredangle:zM,MediumSpace:VM,Mellintrf:qM,Mfr:_M,mfr:$M,mho:UM,micro:WM,midast:JM,midcir:KM,mid:GM,middot:XM,minusb:ZM,minus:QM,minusd:YM,minusdu:tT,MinusPlus:eT,mlcp:nT,mldr:rT,mnplus:oT,models:iT,Mopf:aT,mopf:sT,mp:cT,mscr:lT,Mscr:uT,mstpos:pT,Mu:dT,mu:fT,multimap:hT,mumap:mT,nabla:vT,Nacute:gT,nacute:yT,nang:bT,nap:wT,napE:kT,napid:xT,napos:CT,napprox:MT,natural:TT,naturals:ST,natur:OT,nbsp:ET,nbump:NT,nbumpe:DT,ncap:LT,Ncaron:IT,ncaron:AT,Ncedil:RT,ncedil:PT,ncong:BT,ncongdot:jT,ncup:FT,Ncy:HT,ncy:zT,ndash:VT,nearhk:qT,nearr:_T,neArr:$T,nearrow:UT,ne:WT,nedot:JT,NegativeMediumSpace:KT,NegativeThickSpace:GT,NegativeThinSpace:XT,NegativeVeryThinSpace:ZT,nequiv:QT,nesear:YT,nesim:tS,NestedGreaterGreater:eS,NestedLessLess:nS,NewLine:rS,nexist:oS,nexists:iS,Nfr:aS,nfr:sS,ngE:cS,nge:lS,ngeq:uS,ngeqq:pS,ngeqslant:dS,nges:fS,nGg:hS,ngsim:mS,nGt:vS,ngt:gS,ngtr:yS,nGtv:bS,nharr:wS,nhArr:kS,nhpar:xS,ni:CS,nis:MS,nisd:TS,niv:SS,NJcy:OS,njcy:ES,nlarr:NS,nlArr:DS,nldr:LS,nlE:IS,nle:AS,nleftarrow:RS,nLeftarrow:PS,nleftrightarrow:BS,nLeftrightarrow:jS,nleq:FS,nleqq:HS,nleqslant:zS,nles:VS,nless:qS,nLl:_S,nlsim:$S,nLt:US,nlt:WS,nltri:JS,nltrie:KS,nLtv:GS,nmid:XS,NoBreak:ZS,NonBreakingSpace:QS,nopf:YS,Nopf:tO,Not:eO,not:nO,NotCongruent:rO,NotCupCap:oO,NotDoubleVerticalBar:iO,NotElement:aO,NotEqual:sO,NotEqualTilde:cO,NotExists:lO,NotGreater:uO,NotGreaterEqual:pO,NotGreaterFullEqual:dO,NotGreaterGreater:fO,NotGreaterLess:hO,NotGreaterSlantEqual:mO,NotGreaterTilde:vO,NotHumpDownHump:gO,NotHumpEqual:yO,notin:bO,notindot:wO,notinE:kO,notinva:xO,notinvb:CO,notinvc:MO,NotLeftTriangleBar:TO,NotLeftTriangle:SO,NotLeftTriangleEqual:OO,NotLess:EO,NotLessEqual:NO,NotLessGreater:DO,NotLessLess:LO,NotLessSlantEqual:IO,NotLessTilde:AO,NotNestedGreaterGreater:RO,NotNestedLessLess:PO,notni:BO,notniva:jO,notnivb:FO,notnivc:HO,NotPrecedes:zO,NotPrecedesEqual:VO,NotPrecedesSlantEqual:qO,NotReverseElement:_O,NotRightTriangleBar:$O,NotRightTriangle:UO,NotRightTriangleEqual:WO,NotSquareSubset:JO,NotSquareSubsetEqual:KO,NotSquareSuperset:GO,NotSquareSupersetEqual:XO,NotSubset:ZO,NotSubsetEqual:QO,NotSucceeds:YO,NotSucceedsEqual:tE,NotSucceedsSlantEqual:eE,NotSucceedsTilde:nE,NotSuperset:rE,NotSupersetEqual:oE,NotTilde:iE,NotTildeEqual:aE,NotTildeFullEqual:sE,NotTildeTilde:cE,NotVerticalBar:lE,nparallel:uE,npar:pE,nparsl:dE,npart:fE,npolint:hE,npr:mE,nprcue:vE,nprec:gE,npreceq:yE,npre:bE,nrarrc:wE,nrarr:kE,nrArr:xE,nrarrw:CE,nrightarrow:ME,nRightarrow:TE,nrtri:SE,nrtrie:OE,nsc:EE,nsccue:NE,nsce:DE,Nscr:LE,nscr:IE,nshortmid:AE,nshortparallel:RE,nsim:PE,nsime:BE,nsimeq:jE,nsmid:FE,nspar:HE,nsqsube:zE,nsqsupe:VE,nsub:qE,nsubE:_E,nsube:$E,nsubset:UE,nsubseteq:WE,nsubseteqq:JE,nsucc:KE,nsucceq:GE,nsup:XE,nsupE:ZE,nsupe:QE,nsupset:YE,nsupseteq:tN,nsupseteqq:eN,ntgl:nN,Ntilde:rN,ntilde:oN,ntlg:iN,ntriangleleft:aN,ntrianglelefteq:sN,ntriangleright:cN,ntrianglerighteq:lN,Nu:uN,nu:pN,num:dN,numero:fN,numsp:hN,nvap:mN,nvdash:vN,nvDash:gN,nVdash:yN,nVDash:bN,nvge:wN,nvgt:kN,nvHarr:xN,nvinfin:CN,nvlArr:MN,nvle:TN,nvlt:SN,nvltrie:ON,nvrArr:EN,nvrtrie:NN,nvsim:DN,nwarhk:LN,nwarr:IN,nwArr:AN,nwarrow:RN,nwnear:PN,Oacute:BN,oacute:jN,oast:FN,Ocirc:HN,ocirc:zN,ocir:VN,Ocy:qN,ocy:_N,odash:$N,Odblac:UN,odblac:WN,odiv:JN,odot:KN,odsold:GN,OElig:XN,oelig:ZN,ofcir:QN,Ofr:YN,ofr:tD,ogon:eD,Ograve:nD,ograve:rD,ogt:oD,ohbar:iD,ohm:aD,oint:sD,olarr:cD,olcir:lD,olcross:uD,oline:pD,olt:dD,Omacr:fD,omacr:hD,Omega:mD,omega:vD,Omicron:gD,omicron:yD,omid:bD,ominus:wD,Oopf:kD,oopf:xD,opar:CD,OpenCurlyDoubleQuote:MD,OpenCurlyQuote:TD,operp:SD,oplus:OD,orarr:ED,Or:ND,or:DD,ord:LD,order:ID,orderof:AD,ordf:RD,ordm:PD,origof:BD,oror:jD,orslope:FD,orv:HD,oS:zD,Oscr:VD,oscr:qD,Oslash:_D,oslash:$D,osol:UD,Otilde:WD,otilde:JD,otimesas:KD,Otimes:GD,otimes:XD,Ouml:ZD,ouml:QD,ovbar:YD,OverBar:tL,OverBrace:eL,OverBracket:nL,OverParenthesis:rL,para:oL,parallel:iL,par:aL,parsim:sL,parsl:cL,part:lL,PartialD:uL,Pcy:pL,pcy:dL,percnt:fL,period:hL,permil:mL,perp:vL,pertenk:gL,Pfr:yL,pfr:bL,Phi:wL,phi:kL,phiv:xL,phmmat:CL,phone:ML,Pi:TL,pi:SL,pitchfork:OL,piv:EL,planck:NL,planckh:DL,plankv:LL,plusacir:IL,plusb:AL,pluscir:RL,plus:PL,plusdo:BL,plusdu:jL,pluse:FL,PlusMinus:HL,plusmn:zL,plussim:VL,plustwo:qL,pm:_L,Poincareplane:$L,pointint:UL,popf:WL,Popf:JL,pound:KL,prap:GL,Pr:XL,pr:ZL,prcue:QL,precapprox:YL,prec:tI,preccurlyeq:eI,Precedes:nI,PrecedesEqual:rI,PrecedesSlantEqual:oI,PrecedesTilde:iI,preceq:aI,precnapprox:sI,precneqq:cI,precnsim:lI,pre:uI,prE:pI,precsim:dI,prime:fI,Prime:hI,primes:mI,prnap:vI,prnE:gI,prnsim:yI,prod:bI,Product:wI,profalar:kI,profline:xI,profsurf:CI,prop:MI,Proportional:TI,Proportion:SI,propto:OI,prsim:EI,prurel:NI,Pscr:DI,pscr:LI,Psi:II,psi:AI,puncsp:RI,Qfr:PI,qfr:BI,qint:jI,qopf:FI,Qopf:HI,qprime:zI,Qscr:VI,qscr:qI,quaternions:_I,quatint:$I,quest:UI,questeq:WI,quot:JI,QUOT:KI,rAarr:GI,race:XI,Racute:ZI,racute:QI,radic:YI,raemptyv:tA,rang:eA,Rang:nA,rangd:rA,range:oA,rangle:iA,raquo:aA,rarrap:sA,rarrb:cA,rarrbfs:lA,rarrc:uA,rarr:pA,Rarr:dA,rArr:fA,rarrfs:hA,rarrhk:mA,rarrlp:vA,rarrpl:gA,rarrsim:yA,Rarrtl:bA,rarrtl:wA,rarrw:kA,ratail:xA,rAtail:CA,ratio:MA,rationals:TA,rbarr:SA,rBarr:OA,RBarr:EA,rbbrk:NA,rbrace:DA,rbrack:LA,rbrke:IA,rbrksld:AA,rbrkslu:RA,Rcaron:PA,rcaron:BA,Rcedil:jA,rcedil:FA,rceil:HA,rcub:zA,Rcy:VA,rcy:qA,rdca:_A,rdldhar:$A,rdquo:UA,rdquor:WA,rdsh:JA,real:KA,realine:GA,realpart:XA,reals:ZA,Re:QA,rect:YA,reg:tR,REG:eR,ReverseElement:nR,ReverseEquilibrium:rR,ReverseUpEquilibrium:oR,rfisht:iR,rfloor:aR,rfr:sR,Rfr:cR,rHar:lR,rhard:uR,rharu:pR,rharul:dR,Rho:fR,rho:hR,rhov:mR,RightAngleBracket:vR,RightArrowBar:gR,rightarrow:yR,RightArrow:bR,Rightarrow:wR,RightArrowLeftArrow:kR,rightarrowtail:xR,RightCeiling:CR,RightDoubleBracket:MR,RightDownTeeVector:TR,RightDownVectorBar:SR,RightDownVector:OR,RightFloor:ER,rightharpoondown:NR,rightharpoonup:DR,rightleftarrows:LR,rightleftharpoons:IR,rightrightarrows:AR,rightsquigarrow:RR,RightTeeArrow:PR,RightTee:BR,RightTeeVector:jR,rightthreetimes:FR,RightTriangleBar:HR,RightTriangle:zR,RightTriangleEqual:VR,RightUpDownVector:qR,RightUpTeeVector:_R,RightUpVectorBar:$R,RightUpVector:UR,RightVectorBar:WR,RightVector:JR,ring:KR,risingdotseq:GR,rlarr:XR,rlhar:ZR,rlm:QR,rmoustache:YR,rmoust:tP,rnmid:eP,roang:nP,roarr:rP,robrk:oP,ropar:iP,ropf:aP,Ropf:sP,roplus:cP,rotimes:lP,RoundImplies:uP,rpar:pP,rpargt:dP,rppolint:fP,rrarr:hP,Rrightarrow:mP,rsaquo:vP,rscr:gP,Rscr:yP,rsh:bP,Rsh:wP,rsqb:kP,rsquo:xP,rsquor:CP,rthree:MP,rtimes:TP,rtri:SP,rtrie:OP,rtrif:EP,rtriltri:NP,RuleDelayed:DP,ruluhar:LP,rx:IP,Sacute:AP,sacute:RP,sbquo:PP,scap:BP,Scaron:jP,scaron:FP,Sc:HP,sc:zP,sccue:VP,sce:qP,scE:_P,Scedil:$P,scedil:UP,Scirc:WP,scirc:JP,scnap:KP,scnE:GP,scnsim:XP,scpolint:ZP,scsim:QP,Scy:YP,scy:tB,sdotb:eB,sdot:nB,sdote:rB,searhk:oB,searr:iB,seArr:aB,searrow:sB,sect:cB,semi:lB,seswar:uB,setminus:pB,setmn:dB,sext:fB,Sfr:hB,sfr:mB,sfrown:vB,sharp:gB,SHCHcy:yB,shchcy:bB,SHcy:wB,shcy:kB,ShortDownArrow:xB,ShortLeftArrow:CB,shortmid:MB,shortparallel:TB,ShortRightArrow:SB,ShortUpArrow:OB,shy:EB,Sigma:NB,sigma:DB,sigmaf:LB,sigmav:IB,sim:AB,simdot:RB,sime:PB,simeq:BB,simg:jB,simgE:FB,siml:HB,simlE:zB,simne:VB,simplus:qB,simrarr:_B,slarr:$B,SmallCircle:UB,smallsetminus:WB,smashp:JB,smeparsl:KB,smid:GB,smile:XB,smt:ZB,smte:QB,smtes:YB,SOFTcy:tj,softcy:ej,solbar:nj,solb:rj,sol:oj,Sopf:ij,sopf:aj,spades:sj,spadesuit:cj,spar:lj,sqcap:uj,sqcaps:pj,sqcup:dj,sqcups:fj,Sqrt:hj,sqsub:mj,sqsube:vj,sqsubset:gj,sqsubseteq:yj,sqsup:bj,sqsupe:wj,sqsupset:kj,sqsupseteq:xj,square:Cj,Square:Mj,SquareIntersection:Tj,SquareSubset:Sj,SquareSubsetEqual:Oj,SquareSuperset:Ej,SquareSupersetEqual:Nj,SquareUnion:Dj,squarf:Lj,squ:Ij,squf:Aj,srarr:Rj,Sscr:Pj,sscr:Bj,ssetmn:jj,ssmile:Fj,sstarf:Hj,Star:zj,star:Vj,starf:qj,straightepsilon:_j,straightphi:$j,strns:Uj,sub:Wj,Sub:Jj,subdot:Kj,subE:Gj,sube:Xj,subedot:Zj,submult:Qj,subnE:Yj,subne:tF,subplus:eF,subrarr:nF,subset:rF,Subset:oF,subseteq:iF,subseteqq:aF,SubsetEqual:sF,subsetneq:cF,subsetneqq:lF,subsim:uF,subsub:pF,subsup:dF,succapprox:fF,succ:hF,succcurlyeq:mF,Succeeds:vF,SucceedsEqual:gF,SucceedsSlantEqual:yF,SucceedsTilde:bF,succeq:wF,succnapprox:kF,succneqq:xF,succnsim:CF,succsim:MF,SuchThat:TF,sum:SF,Sum:OF,sung:EF,sup1:NF,sup2:DF,sup3:LF,sup:IF,Sup:AF,supdot:RF,supdsub:PF,supE:BF,supe:jF,supedot:FF,Superset:HF,SupersetEqual:zF,suphsol:VF,suphsub:qF,suplarr:_F,supmult:$F,supnE:UF,supne:WF,supplus:JF,supset:KF,Supset:GF,supseteq:XF,supseteqq:ZF,supsetneq:QF,supsetneqq:YF,supsim:tH,supsub:eH,supsup:nH,swarhk:rH,swarr:oH,swArr:iH,swarrow:aH,swnwar:sH,szlig:cH,Tab:lH,target:uH,Tau:pH,tau:dH,tbrk:fH,Tcaron:hH,tcaron:mH,Tcedil:vH,tcedil:gH,Tcy:yH,tcy:bH,tdot:wH,telrec:kH,Tfr:xH,tfr:CH,there4:MH,therefore:TH,Therefore:SH,Theta:OH,theta:EH,thetasym:NH,thetav:DH,thickapprox:LH,thicksim:IH,ThickSpace:AH,ThinSpace:RH,thinsp:PH,thkap:BH,thksim:jH,THORN:FH,thorn:HH,tilde:zH,Tilde:VH,TildeEqual:qH,TildeFullEqual:_H,TildeTilde:$H,timesbar:UH,timesb:WH,times:JH,timesd:KH,tint:GH,toea:XH,topbot:ZH,topcir:QH,top:YH,Topf:tz,topf:ez,topfork:nz,tosa:rz,tprime:oz,trade:iz,TRADE:az,triangle:sz,triangledown:cz,triangleleft:lz,trianglelefteq:uz,triangleq:pz,triangleright:dz,trianglerighteq:fz,tridot:hz,trie:mz,triminus:vz,TripleDot:gz,triplus:yz,trisb:bz,tritime:wz,trpezium:kz,Tscr:xz,tscr:Cz,TScy:Mz,tscy:Tz,TSHcy:Sz,tshcy:Oz,Tstrok:Ez,tstrok:Nz,twixt:Dz,twoheadleftarrow:Lz,twoheadrightarrow:Iz,Uacute:Az,uacute:Rz,uarr:Pz,Uarr:Bz,uArr:jz,Uarrocir:Fz,Ubrcy:Hz,ubrcy:zz,Ubreve:Vz,ubreve:qz,Ucirc:_z,ucirc:$z,Ucy:Uz,ucy:Wz,udarr:Jz,Udblac:Kz,udblac:Gz,udhar:Xz,ufisht:Zz,Ufr:Qz,ufr:Yz,Ugrave:tV,ugrave:eV,uHar:nV,uharl:rV,uharr:oV,uhblk:iV,ulcorn:aV,ulcorner:sV,ulcrop:cV,ultri:lV,Umacr:uV,umacr:pV,uml:dV,UnderBar:fV,UnderBrace:hV,UnderBracket:mV,UnderParenthesis:vV,Union:gV,UnionPlus:yV,Uogon:bV,uogon:wV,Uopf:kV,uopf:xV,UpArrowBar:CV,uparrow:MV,UpArrow:TV,Uparrow:SV,UpArrowDownArrow:OV,updownarrow:EV,UpDownArrow:NV,Updownarrow:DV,UpEquilibrium:LV,upharpoonleft:IV,upharpoonright:AV,uplus:RV,UpperLeftArrow:PV,UpperRightArrow:BV,upsi:jV,Upsi:FV,upsih:HV,Upsilon:zV,upsilon:VV,UpTeeArrow:qV,UpTee:_V,upuparrows:$V,urcorn:UV,urcorner:WV,urcrop:JV,Uring:KV,uring:GV,urtri:XV,Uscr:ZV,uscr:QV,utdot:YV,Utilde:tq,utilde:eq,utri:nq,utrif:rq,uuarr:oq,Uuml:iq,uuml:aq,uwangle:sq,vangrt:cq,varepsilon:lq,varkappa:uq,varnothing:pq,varphi:dq,varpi:fq,varpropto:hq,varr:mq,vArr:vq,varrho:gq,varsigma:yq,varsubsetneq:bq,varsubsetneqq:wq,varsupsetneq:kq,varsupsetneqq:xq,vartheta:Cq,vartriangleleft:Mq,vartriangleright:Tq,vBar:Sq,Vbar:Oq,vBarv:Eq,Vcy:Nq,vcy:Dq,vdash:Lq,vDash:Iq,Vdash:Aq,VDash:Rq,Vdashl:Pq,veebar:Bq,vee:jq,Vee:Fq,veeeq:Hq,vellip:zq,verbar:Vq,Verbar:qq,vert:_q,Vert:$q,VerticalBar:Uq,VerticalLine:Wq,VerticalSeparator:Jq,VerticalTilde:Kq,VeryThinSpace:Gq,Vfr:Xq,vfr:Zq,vltri:Qq,vnsub:Yq,vnsup:t_,Vopf:e_,vopf:n_,vprop:r_,vrtri:o_,Vscr:i_,vscr:a_,vsubnE:s_,vsubne:c_,vsupnE:l_,vsupne:u_,Vvdash:p_,vzigzag:d_,Wcirc:f_,wcirc:h_,wedbar:m_,wedge:v_,Wedge:g_,wedgeq:y_,weierp:b_,Wfr:w_,wfr:k_,Wopf:x_,wopf:C_,wp:M_,wr:T_,wreath:S_,Wscr:O_,wscr:E_,xcap:N_,xcirc:D_,xcup:L_,xdtri:I_,Xfr:A_,xfr:R_,xharr:P_,xhArr:B_,Xi:j_,xi:F_,xlarr:H_,xlArr:z_,xmap:V_,xnis:q_,xodot:__,Xopf:$_,xopf:U_,xoplus:W_,xotime:J_,xrarr:K_,xrArr:G_,Xscr:X_,xscr:Z_,xsqcup:Q_,xuplus:Y_,xutri:t$,xvee:e$,xwedge:n$,Yacute:r$,yacute:o$,YAcy:i$,yacy:a$,Ycirc:s$,ycirc:c$,Ycy:l$,ycy:u$,yen:p$,Yfr:d$,yfr:f$,YIcy:h$,yicy:m$,Yopf:v$,yopf:g$,Yscr:y$,yscr:b$,YUcy:w$,yucy:k$,yuml:x$,Yuml:C$,Zacute:M$,zacute:T$,Zcaron:S$,zcaron:O$,Zcy:E$,zcy:N$,Zdot:D$,zdot:L$,zeetrf:I$,ZeroWidthSpace:A$,Zeta:R$,zeta:P$,zfr:B$,Zfr:j$,ZHcy:F$,zhcy:H$,zigrarr:z$,zopf:V$,Zopf:q$,Zscr:_$,zscr:$$,zwj:U$,zwnj:W$},K$="",G$="",X$="",Z$="",Q$="",Y$="",tU="",eU="",nU="",rU="&",oU="&",iU="",aU="",sU="",cU="",lU="",uU="",pU="",dU="",fU="",hU="",mU="",vU="",gU="",yU="",bU="",wU="",kU="",xU="",CU="",MU="",TU="",SU="",OU="",EU="",NU="",DU="",LU="",IU="",AU="",RU=">",PU=">",BU="",jU="",FU="",HU="",zU="",VU="",qU="",_U="",$U="",UU="",WU="",JU="<",KU="<",GU="",XU="",ZU="",QU="",YU="",tW="",eW="",nW="",rW="",oW="",iW="",aW="",sW="",cW="",lW="",uW="",pW="",dW="",fW="",hW="",mW="",vW="",gW="",yW="",bW='"',wW='"',kW="",xW="",CW="",MW="",TW="",SW="",OW="",EW="",NW="",DW="",LW="",IW="",AW="",RW="",PW="",BW="",jW="",FW="",HW="",zW="",VW="",qW="",_W="",$W="",UW="",WW={Aacute:K$,aacute:G$,Acirc:X$,acirc:Z$,acute:Q$,AElig:Y$,aelig:tU,Agrave:eU,agrave:nU,amp:rU,AMP:oU,Aring:iU,aring:aU,Atilde:sU,atilde:cU,Auml:lU,auml:uU,brvbar:pU,Ccedil:dU,ccedil:fU,cedil:hU,cent:mU,copy:vU,COPY:gU,curren:yU,deg:bU,divide:wU,Eacute:kU,eacute:xU,Ecirc:CU,ecirc:MU,Egrave:TU,egrave:SU,ETH:OU,eth:EU,Euml:NU,euml:DU,frac12:LU,frac14:IU,frac34:AU,gt:RU,GT:PU,Iacute:BU,iacute:jU,Icirc:FU,icirc:HU,iexcl:zU,Igrave:VU,igrave:qU,iquest:_U,Iuml:$U,iuml:UU,laquo:WU,lt:JU,LT:KU,macr:GU,micro:XU,middot:ZU,nbsp:QU,not:YU,Ntilde:tW,ntilde:eW,Oacute:nW,oacute:rW,Ocirc:oW,ocirc:iW,Ograve:aW,ograve:sW,ordf:cW,ordm:lW,Oslash:uW,oslash:pW,Otilde:dW,otilde:fW,Ouml:hW,ouml:mW,para:vW,plusmn:gW,pound:yW,quot:bW,QUOT:wW,raquo:kW,reg:xW,REG:CW,sect:MW,shy:TW,sup1:SW,sup2:OW,sup3:EW,szlig:NW,THORN:DW,thorn:LW,times:IW,Uacute:AW,uacute:RW,Ucirc:PW,ucirc:BW,Ugrave:jW,ugrave:FW,uml:HW,Uuml:zW,uuml:VW,Yacute:qW,yacute:_W,yen:$W,yuml:UW},JW="&",KW="'",GW=">",XW="<",ZW='"',QW={amp:JW,apos:KW,gt:GW,lt:XW,quot:ZW},YW={},tJ={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},eJ=xi&&xi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(YW,"__esModule",{value:!0});var nJ=eJ(tJ),rJ=String.fromCodePoint||function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t),e};function oJ(t){return t>=55296&&t<=57343||t>1114111?"":(t in nJ.default&&(t=nJ.default[t]),rJ(t))}YW.default=oJ;var iJ=xi&&xi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.decodeHTML=Ei.decodeHTMLStrict=Ei.decodeXML=void 0;var aJ=iJ(J$),sJ=iJ(WW),cJ=iJ(QW),lJ=iJ(YW),uJ=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function pJ(t){var e=fJ(t);return function(t){return String(t).replace(uJ,e)}}Ei.decodeXML=pJ(cJ.default),Ei.decodeHTMLStrict=pJ(aJ.default);var dJ=function(t,e){return t<e?1:-1};function fJ(t){return function(e){if("#"===e.charAt(1)){var n=e.charAt(2);return"X"===n||"x"===n?lJ.default(parseInt(e.substr(3),16)):lJ.default(parseInt(e.substr(2),10))}return t[e.slice(1,-1)]||e}}Ei.decodeHTML=function(){for(var t=Object.keys(sJ.default).sort(dJ),e=Object.keys(aJ.default).sort(dJ),n=0,r=0;n<e.length;n++)t[r]===e[n]?(e[n]+=";?",r++):e[n]+=";";var o=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),i=fJ(aJ.default);function a(t){return";"!==t.substr(-1)&&(t+=";"),i(t)}return function(t){return String(t).replace(o,a)}}();var hJ={},mJ=xi&&xi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hJ,"__esModule",{value:!0}),hJ.escapeUTF8=hJ.escape=hJ.encodeNonAsciiHTML=hJ.encodeHTML=hJ.encodeXML=void 0;var vJ=mJ(QW),gJ=xJ(vJ.default),yJ=CJ(gJ);hJ.encodeXML=LJ(gJ);var bJ=mJ(J$),wJ=xJ(bJ.default),kJ=CJ(wJ);function xJ(t){return Object.keys(t).sort().reduce((function(e,n){return e[t[n]]="&"+n+";",e}),{})}function CJ(t){for(var e=[],n=[],r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];1===i.length?e.push("\\"+i):n.push(i)}e.sort();for(var a=0;a<e.length-1;a++){var s=a;while(s<e.length-1&&e[s].charCodeAt(1)+1===e[s+1].charCodeAt(1))s+=1;var c=1+s-a;c<3||e.splice(a,c,e[a]+"-"+e[s])}return n.unshift("["+e.join("")+"]"),new RegExp(n.join("|"),"g")}hJ.encodeHTML=OJ(wJ,kJ),hJ.encodeNonAsciiHTML=LJ(wJ);var MJ=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,TJ=null!=String.prototype.codePointAt?function(t){return t.codePointAt(0)}:function(t){return 1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536};function SJ(t){return"&#x"+(t.length>1?TJ(t):t.charCodeAt(0)).toString(16).toUpperCase()+";"}function OJ(t,e){return function(n){return n.replace(e,(function(e){return t[e]})).replace(MJ,SJ)}}var EJ=new RegExp(yJ.source+"|"+MJ.source,"g");function NJ(t){return t.replace(EJ,SJ)}function DJ(t){return t.replace(yJ,SJ)}function LJ(t){return function(e){return e.replace(EJ,(function(e){return t[e]||SJ(e)}))}}hJ.escape=NJ,hJ.escapeUTF8=DJ,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var e=Ei,n=hJ;function r(t,n){return(!n||n<=0?e.decodeXML:e.decodeHTML)(t)}function o(t,n){return(!n||n<=0?e.decodeXML:e.decodeHTMLStrict)(t)}function i(t,e){return(!e||e<=0?n.encodeXML:n.encodeHTML)(t)}t.decode=r,t.decodeStrict=o,t.encode=i;var a=hJ;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return a.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return a.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return a.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return a.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return a.encodeHTML}});var s=Ei;Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return s.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return s.decodeXML}})}(Oi);var IJ="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",AJ=92,RJ=/[\\&]/,PJ="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",BJ=new RegExp("\\\\"+PJ+"|"+IJ,"gi"),jJ='[&<>"]',FJ=new RegExp(jJ,"g"),HJ=function(t){return t.charCodeAt(0)===AJ?t.charAt(1):Oi.decodeHTML(t)};function zJ(t){return RJ.test(t)?t.replace(BJ,HJ):t}function VJ(t){try{return Si(t)}catch(e){return t}}function qJ(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}}function _J(t){return FJ.test(t)?t.replace(FJ,qJ):t}function $J(t,e){for(var n=[],r=0;r<e;r++)n.push(t);return n.join("")}function UJ(t){return!t||!/[^ \t]+/.test(t)}var WJ=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.next=function(){var t=this.current,e=this.entering;if(null===t)return null;var n=JJ(t);return e&&n?t.firstChild?(this.current=t.firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:null===t.next?(this.current=t.parent,this.entering=!1):(this.current=t.next,this.entering=!0),{entering:e,node:t}},t.prototype.resumeAt=function(t,e){this.current=t,this.entering=!0===e},t}();function JJ(t){switch(t.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var KJ=1,GJ={};function XJ(t){return GJ[t]}function ZJ(t){delete GJ[t]}function QJ(){GJ={}}var YJ=function(){function t(t,e){this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,this.id="document"===t?-1:KJ++,this.type=t,this.sourcepos=e,GJ[this.id]=this}return t.prototype.isContainer=function(){return JJ(this)},t.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next),this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev),this.parent=null,this.next=null,this.prev=null},t.prototype.replaceWith=function(t){this.insertBefore(t),this.unlink()},t.prototype.insertAfter=function(t){t.unlink(),t.next=this.next,t.next&&(t.next.prev=t),t.prev=this,this.next=t,this.parent&&(t.parent=this.parent,t.next||(t.parent.lastChild=t))},t.prototype.insertBefore=function(t){t.unlink(),t.prev=this.prev,t.prev&&(t.prev.next=t),t.next=this,this.prev=t,t.parent=this.parent,t.prev||(t.parent.firstChild=t)},t.prototype.appendChild=function(t){t.unlink(),t.parent=this,this.lastChild?(this.lastChild.next=t,t.prev=this.lastChild,this.lastChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.prependChild=function(t){t.unlink(),t.parent=this,this.firstChild?(this.firstChild.prev=t,t.next=this.firstChild,this.firstChild=t):(this.firstChild=t,this.lastChild=t)},t.prototype.walker=function(){return new WJ(this)},t}(),tK=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.open=!0,r.lineOffsets=null,r.stringContent=null,r.lastLineBlank=!1,r.lastLineChecked=!1,r.type=e,r}return bi(e,t),e}(YJ),eK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listData=null,e}return bi(e,t),e}(tK),nK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.headingType="atx",e}return bi(e,t),e}(tK),rK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFenced=!1,e.fenceChar=null,e.fenceLength=0,e.fenceOffset=-1,e.info=null,e.infoPadding=0,e}return bi(e,t),e}(tK),oK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columns=[],e}return bi(e,t),e}(tK),iK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startIdx=0,e.endIdx=0,e.paddingLeft=0,e.paddingRight=0,e.ignored=!1,e}return bi(e,t),e}(tK),aK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="",e.dest="",e.label="",e}return bi(e,t),e}(tK),sK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syntaxLength=0,e.offset=-1,e.info="",e}return bi(e,t),e}(tK),cK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.htmlBlockType=-1,e}return bi(e,t),e}(tK),lK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destination=null,e.title=null,e.extendedAutolink=!1,e}return bi(e,t),e}(YJ),uK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tickCount=0,e}return bi(e,t),e}(YJ),pK=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info="",e}return bi(e,t),e}(YJ);function dK(t,e){switch(t){case"heading":return new nK(t,e);case"list":case"item":return new eK(t,e);case"link":case"image":return new lK(t,e);case"codeBlock":return new rK(t,e);case"htmlBlock":return new cK(t,e);case"table":return new oK(t,e);case"tableCell":return new iK(t,e);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new tK(t,e);case"code":return new uK(t,e);case"refDef":return new aK(t,e);case"customBlock":return new sK(t,e);case"customInline":return new pK(t,e);default:return new YJ(t,e)}}function fK(t){return"codeBlock"===t.type}function hK(t){return"htmlBlock"===t.type}function mK(t){return"heading"===t.type}function vK(t){return"list"===t.type}function gK(t){return"table"===t.type}function yK(t){return"refDef"===t.type}function bK(t){return"customBlock"===t.type}function wK(t){return"customInline"===t.type}function kK(t,e){var n=dK("text",e);return n.literal=t,n}var xK,CK="[A-Za-z][A-Za-z0-9-]*",MK="[a-zA-Z_:][a-zA-Z0-9:._-]*",TK="[^\"'=<>`\\x00-\\x20]+",SK="'[^']*'",OK='"[^"]*"',EK="(?:"+TK+"|"+SK+"|"+OK+")",NK="(?:\\s*=\\s*"+EK+")",DK="(?:\\s+"+MK+NK+"?)",LK="<"+CK+DK+"*\\s*/?>",IK="</"+CK+"\\s*[>]",AK="\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e",RK="[<][?].*?[?][>]",PK="<![A-Z]+\\s+[^>]*>",BK="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",jK="(?:"+LK+"|"+IK+"|"+AK+"|"+RK+"|"+PK+"|"+BK+")",FK=new RegExp("^"+jK,"i");if(String.fromCodePoint)xK=function(t){try{return String.fromCodePoint(t)}catch(e){if(e instanceof RangeError)return String.fromCharCode(65533);throw e}};else{var HK=String.fromCharCode,zK=Math.floor;xK=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,o=16384,i=[],a=-1,s=t.length;if(!s)return"";var c="";while(++a<s){var l=Number(t[a]);if(!isFinite(l)||l<0||l>1114111||zK(l)!==l)return String.fromCharCode(65533);l<=65535?i.push(l):(l-=65536,n=55296+(l>>10),r=l%1024+56320,i.push(n,r)),(a+1===s||i.length>o)&&(c+=HK.apply(void 0,i),i.length=0)}return c}}var VK=xK,qK="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+",_K="[^<\\s]*[^<?!.,:*_?~\\s]",$K="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function UK(t){var e=/\)+$/.exec(t);if(e){for(var n=0,r=0,o=t;r<o.length;r++){var i=o[r];"("===i?n<0?n=1:n+=1:")"===i&&(n-=1)}if(n<0){var a=Math.min(-n,e[0].length);return t.substring(0,t.length-a)}}return t}function WK(t){return t.replace(/&[A-Za-z0-9]+;$/,"")}function JK(t){var e,n=new RegExp($K,"g"),r=[];while(e=n.exec(t)){var o=e[0];/[_-]+$/.test(o)||r.push({text:o,range:[e.index,e.index+o.length-1],url:"mailto:"+o})}return r}function KK(t){var e,n=new RegExp("(www|https?://)."+qK+_K,"g"),r=[];while(e=n.exec(t)){var o=WK(UK(e[0])),i="www"===e[1]?"http://":"";r.push({text:o,range:[e.index,e.index+o.length-1],url:""+i+o})}return r}function GK(t){return ki(ki([],KK(t)),JK(t)).sort((function(t,e){return t.range[0]-e.range[0]}))}function XK(t,e){var n;"boolean"===typeof e&&(e=GK);var r=function(){var t=n.entering,r=n.node;if(t&&"text"===r.type&&"link"!==r.parent.type){var o=r.literal,i=e(o);if(!i||!i.length)return"continue";for(var a=0,s=r.sourcepos[0],c=s[0],l=s[1],u=function(t,e){return[[c,l+t],[c,l+e]]},p=[],d=0,f=i;d<f.length;d++){var h=f[d],m=h.range,v=h.url,g=h.text;m[0]>a&&p.push(kK(o.substring(a,m[0]),u(a,m[0]-1)));var y=dK("link",u.apply(void 0,m));y.appendChild(kK(g,u.apply(void 0,m))),y.destination=v,y.extendedAutolink=!0,p.push(y),a=m[1]+1}a<o.length&&p.push(kK(o.substring(a),u(a,o.length-1)));for(var b=0,w=p;b<w.length;b++){var k=w[b];r.insertBefore(k)}r.unlink()}};while(n=t.next())r()}function ZK(t){return t[t.length-1]}function QK(t){return t.slice(1,t.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function YK(t,e){Object.keys(t).forEach((function(n){e(n,t[n])}))}function tG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=wi({},t);return e.forEach((function(t){delete r[t]})),r}function eG(t){return!Object.keys(t).length}function nG(t){Object.keys(t).forEach((function(e){delete t[e]}))}var rG=10,oG=42,iG=95,aG=96,sG=91,cG=93,lG=126,uG=60,pG=33,dG=92,fG=38,hG=40,mG=41,vG=58,gG=39,yG=34,bG=36,wG="\\\\"+PJ,kG=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),xG=new RegExp('^(?:"('+wG+'|[^"\\x00])*"|\'('+wG+"|[^'\\x00])*'|\\(("+wG+"|[^()\\x00])*\\))"),CG=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,MG=new RegExp("^"+PJ),TG=new RegExp("^"+IJ,"i"),SG=/`+/,OG=/^`+/,EG=/\.\.\./g,NG=/--+/g,DG=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,LG=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,IG=/^ *(?:\n *)?/,AG=/^[ \t\n\x0b\x0c\x0d]/,RG=/^\s/,PG=/ *$/,BG=/^ */,jG=/^ *(?:\n|$)/,FG=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,HG=/^[^\n`\[\]\\!<&*_'"~$]+/m,zG=function(){function t(t){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=t}return t.prototype.sourcepos=function(t,e){var n=this.linePosOffset+this.lineOffsets[this.lineIdx],r=this.lineStartNum+this.lineIdx,o=[r,t+n];return"number"===typeof e?[o,[r,e+n]]:o},t.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},t.prototype.match=function(t){var e=t.exec(this.subject.slice(this.pos));return null===e?null:(this.pos+=e.index+e[0].length,e[0])},t.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},t.prototype.spnl=function(){return this.match(IG),!0},t.prototype.parseBackticks=function(t){var e=this.pos+1,n=this.match(OG);if(null===n)return!1;var r,o=this.pos;while(null!==(r=this.match(SG)))if(r===n){var i=this.subject.slice(o,this.pos-n.length),a=this.sourcepos(e,this.pos),s=i.split("\n");if(s.length>1){var c=ZK(s);this.lineIdx+=s.length-1,this.linePosOffset=-(this.pos-c.length-n.length),a[1]=this.sourcepos(this.pos),i=s.join(" ")}var l=dK("code",a);return i.length>0&&null!==i.match(/[^ ]/)&&" "==i[0]&&" "==i[i.length-1]?l.literal=i.slice(1,i.length-1):l.literal=i,l.tickCount=n.length,t.appendChild(l),!0}return this.pos=o,t.appendChild(kK(n,this.sourcepos(e,this.pos-1))),!0},t.prototype.parseBackslash=function(t){var e,n=this.subject;this.pos+=1;var r=this.pos;return this.peek()===rG?(this.pos+=1,e=dK("linebreak",this.sourcepos(this.pos-1,this.pos)),t.appendChild(e),this.nextLine()):MG.test(n.charAt(this.pos))?(t.appendChild(kK(n.charAt(this.pos),this.sourcepos(r,this.pos))),this.pos+=1):t.appendChild(kK("\\",this.sourcepos(r,r))),!0},t.prototype.parseAutolink=function(t){var e,n,r,o=this.pos+1;return(e=this.match(DG))?(n=e.slice(1,e.length-1),r=dK("link",this.sourcepos(o,this.pos)),r.destination=VJ("mailto:"+n),r.title="",r.appendChild(kK(n,this.sourcepos(o+1,this.pos-1))),t.appendChild(r),!0):!!(e=this.match(LG))&&(n=e.slice(1,e.length-1),r=dK("link",this.sourcepos(o,this.pos)),r.destination=VJ(n),r.title="",r.appendChild(kK(n,this.sourcepos(o+1,this.pos-1))),t.appendChild(r),!0)},t.prototype.parseHtmlTag=function(t){var e=this.pos+1,n=this.match(FK);if(null===n)return!1;var r=dK("htmlInline",this.sourcepos(e,this.pos));return r.literal=n,t.appendChild(r),!0},t.prototype.scanDelims=function(t){var e=0,n=this.pos;if(t===gG||t===yG)e++,this.pos++;else while(this.peek()===t)e++,this.pos++;if(0===e||e<2&&(t===lG||t===bG))return this.pos=n,null;var r,o=0===n?"\n":this.subject.charAt(n-1),i=this.peek();r=-1===i?"\n":VK(i);var a,s,c=RG.test(r),l=kG.test(r),u=RG.test(o),p=kG.test(o),d=!c&&(!l||u||p),f=!u&&(!p||c||l);return t===iG?(a=d&&(!f||p),s=f&&(!d||l)):t===gG||t===yG?(a=d&&!f,s=f):t===bG?(a=!c,s=!u):(a=d,s=f),this.pos=n,{numdelims:e,canOpen:a,canClose:s}},t.prototype.handleDelim=function(t,e){var n=this.scanDelims(t);if(!n)return!1;var r,o=n.numdelims,i=this.pos+1;this.pos+=o,r=t===gG?"":t===yG?"":this.subject.slice(i-1,this.pos);var a=kK(r,this.sourcepos(i,this.pos));return e.appendChild(a),(n.canOpen||n.canClose)&&(this.options.smart||t!==gG&&t!==yG)&&(this.delimiters={cc:t,numdelims:o,origdelims:o,node:a,previous:this.delimiters,next:null,canOpen:n.canOpen,canClose:n.canClose},this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)),!0},t.prototype.removeDelimiter=function(t){null!==t.previous&&(t.previous.next=t.next),null===t.next?this.delimiters=t.previous:t.next.previous=t.previous},t.prototype.removeDelimitersBetween=function(t,e){t.next!==e&&(t.next=e,e.previous=t)},t.prototype.processEmphasis=function(t){var e,n,r,o,i,a,s,c=!1,l=(e={},e[iG]=[t,t,t],e[oG]=[t,t,t],e[gG]=[t],e[yG]=[t],e[lG]=[t],e[bG]=[t],e);r=this.delimiters;while(null!==r&&r.previous!==t)r=r.previous;while(null!==r){var u=r.cc,p=u===iG||u===oG;if(r.canClose){n=r.previous,s=!1;while(null!==n&&n!==t&&n!==l[u][p?r.origdelims%3:0]){if(c=p&&(r.canOpen||n.canClose)&&r.origdelims%3!==0&&(n.origdelims+r.origdelims)%3===0,n.cc===r.cc&&n.canOpen&&!c){s=!0;break}n=n.previous}if(o=r,p||u===lG||u===bG)if(s){if(n){var d=r.numdelims>=2&&n.numdelims>=2?2:1,f=p?0:1;i=n.node,a=r.node;var h=p?1===d?"emph":"strong":"strike";u===bG&&(h="customInline");var m=dK(h),v=i.sourcepos[1],g=a.sourcepos[0];m.sourcepos=[[v[0],v[1]-d+1],[g[0],g[1]+d-1]],i.sourcepos[1][1]-=d,a.sourcepos[0][1]+=d,i.literal=i.literal.slice(d),a.literal=a.literal.slice(d),n.numdelims-=d,r.numdelims-=d;var y=i.next,b=void 0;while(y&&y!==a)b=y.next,y.unlink(),m.appendChild(y),y=b;if(u===bG){var w=m.firstChild,k=w.literal||"",x=k.split(/\s/)[0];m.info=x,k.length===x.length+1?w.unlink():(w.sourcepos[0][1]+=x.length,w.literal=k.replace(x+" ",""))}if(i.insertAfter(m),this.removeDelimitersBetween(n,r),n.numdelims<=f&&(0===n.numdelims&&i.unlink(),this.removeDelimiter(n)),r.numdelims<=f){0===r.numdelims&&a.unlink();var C=r.next;this.removeDelimiter(r),r=C}}}else r=r.next;else u===gG?(r.node.literal="",s&&(n.node.literal=""),r=r.next):u===yG&&(r.node.literal="",s&&(n.node.literal=""),r=r.next);s||(l[u][p?o.origdelims%3:0]=o.previous,o.canOpen||this.removeDelimiter(o))}else r=r.next}while(null!==this.delimiters&&this.delimiters!==t)this.removeDelimiter(this.delimiters)},t.prototype.parseLinkTitle=function(){var t=this.match(xG);return null===t?null:zJ(t.substr(1,t.length-2))},t.prototype.parseLinkDestination=function(){var t=this.match(CG);if(null===t){if(this.peek()===uG)return null;var e=this.pos,n=0,r=void 0;while(-1!==(r=this.peek()))if(r===dG&&MG.test(this.subject.charAt(this.pos+1)))this.pos+=1,-1!==this.peek()&&(this.pos+=1);else if(r===hG)this.pos+=1,n+=1;else if(r===mG){if(n<1)break;this.pos+=1,n-=1}else{if(null!==AG.exec(VK(r)))break;this.pos+=1}return this.pos===e&&r!==mG||0!==n?null:(t=this.subject.substr(e,this.pos-e),VJ(zJ(t)))}return VJ(zJ(t.substr(1,t.length-2)))},t.prototype.parseLinkLabel=function(){var t=this.match(FG);return null===t||t.length>1001?0:t.length},t.prototype.parseOpenBracket=function(t){var e=this.pos;this.pos+=1;var n=kK("[",this.sourcepos(this.pos,this.pos));return t.appendChild(n),this.addBracket(n,e,!1),!0},t.prototype.parseBang=function(t){var e=this.pos;if(this.pos+=1,this.peek()===sG){this.pos+=1;var n=kK("![",this.sourcepos(this.pos-1,this.pos));t.appendChild(n),this.addBracket(n,e+1,!0)}else{n=kK("!",this.sourcepos(this.pos,this.pos));t.appendChild(n)}return!0},t.prototype.parseCloseBracket=function(t){var e=null,n=null,r=!1;this.pos+=1;var o=this.pos,i=this.brackets;if(null===i)return t.appendChild(kK("]",this.sourcepos(o,o))),!0;if(!i.active)return t.appendChild(kK("]",this.sourcepos(o,o))),this.removeBracket(),!0;var a=i.image,s=this.pos;this.peek()===hG&&(this.pos++,this.spnl()&&null!==(e=this.parseLinkDestination())&&this.spnl()&&(AG.test(this.subject.charAt(this.pos-1))&&(n=this.parseLinkTitle()),1)&&this.spnl()&&this.peek()===mG?(this.pos+=1,r=!0):this.pos=s);var c="";if(!r){var l=this.pos,u=this.parseLinkLabel();if(u>2?c=this.subject.slice(l,l+u):i.bracketAfter||(c=this.subject.slice(i.index,o)),0===u&&(this.pos=s),c){c=QK(c);var p=this.refMap[c];p&&(e=p.destination,n=p.title,r=!0)}}if(r){var d=dK(a?"image":"link");d.destination=e,d.title=n||"",d.sourcepos=[i.startpos,this.sourcepos(this.pos)];var f=i.node.next,h=void 0;while(f)h=f.next,f.unlink(),d.appendChild(f),f=h;if(t.appendChild(d),this.processEmphasis(i.previousDelimiter),this.removeBracket(),i.node.unlink(),!a){i=this.brackets;while(null!==i)i.image||(i.active=!1),i=i.previous}return this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:c}),!0}return this.removeBracket(),this.pos=o,t.appendChild(kK("]",this.sourcepos(o,o))),this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:c}),!0},t.prototype.addBracket=function(t,e,n){null!==this.brackets&&(this.brackets.bracketAfter=!0),this.brackets={node:t,startpos:this.sourcepos(e+(n?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:e,image:n,active:!0}},t.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)},t.prototype.parseEntity=function(t){var e,n=this.pos+1;return!!(e=this.match(TG))&&(t.appendChild(kK(Oi.decodeHTML(e),this.sourcepos(n,this.pos))),!0)},t.prototype.parseString=function(t){var e,n=this.pos+1;if(e=this.match(HG)){if(this.options.smart){var r=e.replace(EG,"").replace(NG,(function(t){var e=0,n=0;return t.length%3===0?n=t.length/3:t.length%2===0?e=t.length/2:t.length%3===2?(e=1,n=(t.length-2)/3):(e=2,n=(t.length-4)/3),$J("",n)+$J("",e)}));t.appendChild(kK(r,this.sourcepos(n,this.pos)))}else{var o=kK(e,this.sourcepos(n,this.pos));t.appendChild(o)}return!0}return!1},t.prototype.parseNewline=function(t){this.pos+=1;var e=t.lastChild;if(e&&"text"===e.type&&" "===e.literal[e.literal.length-1]){var n=" "===e.literal[e.literal.length-2],r=e.literal.length;e.literal=e.literal.replace(PG,"");var o=r-e.literal.length;e.sourcepos[1][1]-=o,t.appendChild(dK(n?"linebreak":"softbreak",this.sourcepos(this.pos-o,this.pos)))}else t.appendChild(dK("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(BG),!0},t.prototype.parseReference=function(t,e){if(!this.options.referenceDefinition)return 0;this.subject=t.stringContent,this.pos=0;var n=null,r=this.pos,o=this.parseLinkLabel();if(0===o)return 0;var i=this.subject.substr(0,o);if(this.peek()!==vG)return this.pos=r,0;this.pos++,this.spnl();var a=this.parseLinkDestination();if(null===a)return this.pos=r,0;var s=this.pos;this.spnl(),this.pos!==s&&(n=this.parseLinkTitle()),null===n&&(n="",this.pos=s);var c=!0;if(null===this.match(jG)&&(""===n?c=!1:(n="",this.pos=s,c=null!==this.match(jG))),!c)return this.pos=r,0;var l=QK(i);if(""===l)return this.pos=r,0;var u=this.getReferenceDefSourcepos(t);t.sourcepos[0][0]=u[1][0]+1;var p=dK("refDef",u);return p.title=n,p.dest=a,p.label=l,t.insertBefore(p),e[l]?this.refDefCandidateMap[p.id]=p:e[l]=MZ(p),this.pos-r},t.prototype.mergeTextNodes=function(t){var e,n=[];while(e=t.next()){var r=e.entering,o=e.node;if(r&&"text"===o.type)n.push(o);else if(1===n.length)n=[];else if(n.length>1){var i=n[0],a=n[n.length-1];i.sourcepos&&a.sourcepos&&(i.sourcepos[1]=a.sourcepos[1]),i.next=a.next,i.next&&(i.next.prev=i);for(var s=1;s<n.length;s+=1)i.literal+=n[s].literal,n[s].unlink();n=[]}}},t.prototype.getReferenceDefSourcepos=function(t){for(var e=t.stringContent.split(/\n|\r\n/),n=!1,r=0,o={line:0,ch:0},i=0;i<e.length;i+=1){var a=e[i];if(AG.test(a))break;if(/\:/.test(a)&&0===r){if(n)break;var s=a.indexOf(":")===a.length-1?i+1:i;o={line:s,ch:e[s].length},n=!0}var c=a.match(/'|"/g);if(c&&(r+=c.length),2===r){o={line:i,ch:a.length};break}}return[[t.sourcepos[0][0],t.sourcepos[0][1]],[t.sourcepos[0][0]+o.line,o.ch]]},t.prototype.parseInline=function(t){var e,n=!1,r=this.peek();if(-1===r)return!1;switch(r){case rG:n=this.parseNewline(t);break;case dG:n=this.parseBackslash(t);break;case aG:n=this.parseBackticks(t);break;case oG:case iG:case lG:case bG:n=this.handleDelim(r,t);break;case gG:case yG:n=!!(null===(e=this.options)||void 0===e?void 0:e.smart)&&this.handleDelim(r,t);break;case sG:n=this.parseOpenBracket(t);break;case pG:n=this.parseBang(t);break;case cG:n=this.parseCloseBracket(t);break;case uG:n=this.parseAutolink(t)||this.parseHtmlTag(t);break;case fG:n=this.parseEntity(t);break;default:n=this.parseString(t);break}return n||(this.pos+=1,t.appendChild(kK(VK(r),this.sourcepos(this.pos,this.pos+1)))),!0},t.prototype.parse=function(t){this.subject=t.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=t.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=t.sourcepos[0][0],mK(t)&&(this.lineOffsets[0]+=t.level+1);while(this.parseInline(t));t.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(t.walker());var e=this.options,n=e.extendedAutolinks,r=e.customParser;if(n&&XK(t.walker(),n),r&&t.firstChild){var o,i=t.firstChild.walker();while(o=i.next()){var a=o.node,s=o.entering;r[a.type]&&r[a.type](a,{entering:s,options:this.options})}}},t}(),VG=/^\[([ \txX])\][ \t]+/;function qG(t,e){if(e.firstChild&&"paragraph"===e.firstChild.type){var n=e.firstChild,r=n.stringContent.match(VG);if(r){var o=r[0].length;n.stringContent=n.stringContent.substring(o-1),n.sourcepos[0][1]+=o,n.lineOffsets[0]+=o,e.listData.task=!0,e.listData.checked=/[xX]/.test(r[1])}}}var _G={continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableHead"===t||"tableBody"===t},acceptsLines:!1},$G={continue:function(){return 0},finalize:function(){},canContain:function(t){return"tableRow"===t},acceptsLines:!1},UG={continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableRow"===t||"tableDelimRow"===t},acceptsLines:!1},WG={continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableDelimCell"===t},acceptsLines:!1},JG={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},KG={continue:function(){return 1},finalize:function(){},canContain:function(t){return"tableCell"===t},acceptsLines:!1},GG={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},XG=4,ZG=9,QG=62,YG=60,tX=32,eX=91,nX=/[^ \t\f\v\r\n]/,rX=/^(?:`{3,}|~{3,})(?= *$)/;function oX(t){var e=t;while(e){if(e.lastLineBlank)return!0;var n=e.type;if(e.lastLineChecked||"list"!==n&&"item"!==n){e.lastLineChecked=!0;break}e.lastLineChecked=!0,e=e.lastChild}return!1}function iX(t,e){return e<t.length?t.charCodeAt(e):-1}function aX(t){return!nX.test(t)}function sX(t){return t===tX||t===ZG}var cX=/^\$\$$/,lX={continue:function(t,e){var n=t.currentLine,r=n.match(cX);if(r)return t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2;var o=e.offset;while(o>0&&sX(iX(n,t.offset)))t.advanceOffset(1,!0),o--;return 0},finalize:function(t,e){if(null!==e.stringContent){var n=e.stringContent,r=n.indexOf("\n"),o=n.slice(0,r),i=n.slice(r+1),a=o.match(/^(\s*)(.*)/);e.info=zJ(a[2].trim()),e.literal=i,e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},uX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},pX={continue:function(){return 0},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},dX={continue:function(){return 0},finalize:function(t,e){var n=e.firstChild;while(n){if(oX(n)&&n.next){e.listData.tight=!1;break}var r=n.firstChild;while(r){if(oX(r)&&(n.next||r.next)){e.listData.tight=!1;break}r=r.next}n=n.next}},canContain:function(t){return"item"===t},acceptsLines:!1},fX={continue:function(t){var e=t.currentLine;return t.indented||iX(e,t.nextNonspace)!==QG?1:(t.advanceNextNonspace(),t.advanceOffset(1,!1),sX(iX(e,t.offset))&&t.advanceOffset(1,!0),0)},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},hX={continue:function(t,e){if(t.blank){if(null===e.firstChild)return 1;t.advanceNextNonspace()}else{if(!(t.indent>=e.listData.markerOffset+e.listData.padding))return 1;t.advanceOffset(e.listData.markerOffset+e.listData.padding,!0)}return 0},finalize:qG,canContain:function(t){return"item"!==t},acceptsLines:!1},mX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},vX={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},gX={continue:function(t,e){var n=t.currentLine,r=t.indent;if(e.isFenced){var o=r<=3&&n.charAt(t.nextNonspace)===e.fenceChar&&n.slice(t.nextNonspace).match(rX);if(o&&o[0].length>=e.fenceLength)return t.lastLineLength=t.offset+r+o[0].length,t.finalize(e,t.lineNumber),2;var i=e.fenceOffset;while(i>0&&sX(iX(n,t.offset)))t.advanceOffset(1,!0),i--}else if(r>=XG)t.advanceOffset(XG,!0);else{if(!t.blank)return 1;t.advanceNextNonspace()}return 0},finalize:function(t,e){var n;if(null!==e.stringContent){if(e.isFenced){var r=e.stringContent,o=r.indexOf("\n"),i=r.slice(0,o),a=r.slice(o+1),s=i.match(/^(\s*)(.*)/);e.infoPadding=s[1].length,e.info=zJ(s[2].trim()),e.literal=a}else e.literal=null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,"\n");e.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},yX={continue:function(t,e){return!t.blank||6!==e.htmlBlockType&&7!==e.htmlBlockType?0:1},finalize:function(t,e){var n;e.literal=(null===(n=e.stringContent)||void 0===n?void 0:n.replace(/(\n *)+$/,""))||null,e.stringContent=null},canContain:function(){return!1},acceptsLines:!0},bX={continue:function(t){return t.blank?1:0},finalize:function(t,e){if(null!==e.stringContent){var n,r=!1;while(iX(e.stringContent,0)===eX&&(n=t.inlineParser.parseReference(e,t.refMap)))e.stringContent=e.stringContent.slice(n),r=!0;r&&aX(e.stringContent)&&e.unlink()}},canContain:function(){return!1},acceptsLines:!0},wX=uX,kX=uX,xX={document:pX,list:dX,blockQuote:fX,item:hX,heading:mX,thematicBreak:vX,codeBlock:gX,htmlBlock:yX,paragraph:bX,table:_G,tableBody:$G,tableHead:UG,tableRow:KG,tableCell:GG,tableDelimRow:WG,tableDelimCell:JG,refDef:wX,customBlock:lX,frontMatter:kX};function CX(t){for(var e=0,n=0,r=[],o=0;o<t.length;o+=1)if("|"===t[o]&&"\\"!==t[o-1]){var i=t.substring(e,o);0===e&&UJ(i)?n=o+1:r.push(i),e=o+1}if(e<t.length){i=t.substring(e,t.length);UJ(i)||r.push(i)}return[n,r]}function MX(t,e,n,r){for(var o=[],i=0,a=e;i<a.length;i++){var s=a[i],c=s.match(/^[ \t]+/),l=c?c[0].length:0,u=void 0,p=void 0;if(l===s.length)l=0,u=0,p="";else{var d=s.match(/[ \t]+$/);u=d?d[0].length:0,p=s.slice(l,s.length-u)}var f=r+l,h=dK(t,[[n,r],[n,r+s.length-1]]);h.stringContent=p.replace(/\\\|/g,"|"),h.startIdx=o.length,h.endIdx=o.length,h.lineOffsets=[f-1],h.paddingLeft=l,h.paddingRight=u,o.push(h),r+=s.length+1}return o}function TX(t){var e=null,n=t.stringContent,r=n[0],o=n[n.length-1];return":"===o?e=":"===r?"center":"right":":"===r&&(e="left"),{align:e}}var SX=function(t,e){var n=e.stringContent;if("paragraph"===e.type&&!t.indented&&!t.blank){var r=n.length-1,o=n.lastIndexOf("\n",r-1)+1,i=n.slice(o,r),a=t.currentLine.slice(t.nextNonspace),s=CX(i),c=s[0],l=s[1],u=CX(a),p=u[0],d=u[1],f=/^[ \t]*:?-+:?[ \t]*$/;if(!l.length||!d.length||d.some((function(t){return!f.test(t)}))||1===d.length&&0!==a.indexOf("|"))return 0;var h=e.lineOffsets,m=t.lineNumber-1,v=ZK(h)+1,g=dK("table",[[m,v],[t.lineNumber,t.offset]]);if(g.columns=d.map((function(){return{align:null}})),e.insertAfter(g),1===h.length)e.unlink();else{e.stringContent=n.slice(0,o);var y=n.lastIndexOf("\n",o-2)+1,b=o-y-1;t.lastLineLength=h[h.length-2]+b,t.finalize(e,m-1)}t.advanceOffset(t.currentLine.length-t.offset,!1);var w=dK("tableHead",[[m,v],[t.lineNumber,t.offset]]);g.appendChild(w);var k=dK("tableRow",[[m,v],[m,v+i.length-1]]),x=dK("tableDelimRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.offset]]);w.appendChild(k),w.appendChild(x),MX("tableCell",l,m,v+c).forEach((function(t){k.appendChild(t)}));var C=MX("tableDelimCell",d,t.lineNumber,t.nextNonspace+1+p);return C.forEach((function(t){x.appendChild(t)})),g.columns=C.map(TX),t.tip=g,2}return 0},OX=function(t,e){if("table"!==e.type&&"tableBody"!==e.type||!t.blank&&-1===t.currentLine.indexOf("|"))return 0;if(t.advanceOffset(t.currentLine.length-t.offset,!1),t.blank){var n=e;return"tableBody"===e.type&&(n=e.parent,t.finalize(e,t.lineNumber-1)),t.finalize(n,t.lineNumber-1),0}var r=e;"table"===e.type&&(r=t.addChild("tableBody",t.nextNonspace),r.stringContent=null);var o=dK("tableRow",[[t.lineNumber,t.nextNonspace+1],[t.lineNumber,t.currentLine.length]]);r.appendChild(o);var i=r.parent,a=t.currentLine.slice(t.nextNonspace),s=CX(a),c=s[0],l=s[1];return MX("tableCell",l,t.lineNumber,t.nextNonspace+1+c).forEach((function(t,e){e>=i.columns.length&&(t.ignored=!0),o.appendChild(t)})),2},EX=/^(\$\$)(\s*[a-zA-Z])+/,NX=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,DX=function(t){var e;if(!t.indented&&!NX.test(t.currentLine)&&(e=t.currentLine.match(EX))){var n=e[1].length;t.closeUnmatchedBlocks();var r=t.addChild("customBlock",t.nextNonspace);return r.syntaxLength=n,r.offset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},LX=/^`{3,}(?!.*`)|^~{3,}/,IX=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+LK+"|"+IK+")\\s*$","i")],AX=/^(?:=+|-+)[ \t]*$/,RX=/^#{1,6}(?:[ \t]+|$)/,PX=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,BX=/^[*+-]/,jX=/^(\d{1,9})([.)])/;function FX(t,e){var n,r,o=t.currentLine.slice(t.nextNonspace),i={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:t.indent,task:!1,checked:!1};if(t.indent>=4)return null;if(n=o.match(BX))i.type="bullet",i.bulletChar=n[0][0];else{if(!(n=o.match(jX))||"paragraph"===e.type&&"1"!==n[1])return null;i.type="ordered",i.start=parseInt(n[1],10),i.delimiter=n[2]}if(r=iX(t.currentLine,t.nextNonspace+n[0].length),-1!==r&&r!==ZG&&r!==tX)return null;if("paragraph"===e.type&&!t.currentLine.slice(t.nextNonspace+n[0].length).match(nX))return null;t.advanceNextNonspace(),t.advanceOffset(n[0].length,!0);var a=t.column,s=t.offset;do{t.advanceOffset(1,!0),r=iX(t.currentLine,t.offset)}while(t.column-a<5&&sX(r));var c=-1===iX(t.currentLine,t.offset),l=t.column-a;return l>=5||l<1||c?(i.padding=n[0].length+1,t.column=a,t.offset=s,sX(iX(t.currentLine,t.offset))&&t.advanceOffset(1,!0)):i.padding=n[0].length+l,i}function HX(t,e){return t.type===e.type&&t.delimiter===e.delimiter&&t.bulletChar===e.bulletChar}function zX(t,e){return t.options.disallowDeepHeading&&("blockQuote"===e.type||"item"===e.type)}var VX=function(t){return t.indented||iX(t.currentLine,t.nextNonspace)!==QG?0:(t.advanceNextNonspace(),t.advanceOffset(1,!1),sX(iX(t.currentLine,t.offset))&&t.advanceOffset(1,!0),t.closeUnmatchedBlocks(),t.addChild("blockQuote",t.nextNonspace),1)},qX=function(t,e){var n;if(!t.indented&&!zX(t,e)&&(n=t.currentLine.slice(t.nextNonspace).match(RX))){t.advanceNextNonspace(),t.advanceOffset(n[0].length,!1),t.closeUnmatchedBlocks();var r=t.addChild("heading",t.nextNonspace);return r.level=n[0].trim().length,r.headingType="atx",r.stringContent=t.currentLine.slice(t.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),t.advanceOffset(t.currentLine.length-t.offset),2}return 0},_X=function(t){var e;if(!t.indented&&(e=t.currentLine.slice(t.nextNonspace).match(LX))){var n=e[0].length;t.closeUnmatchedBlocks();var r=t.addChild("codeBlock",t.nextNonspace);return r.isFenced=!0,r.fenceLength=n,r.fenceChar=e[0][0],r.fenceOffset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},$X=function(t,e){if(!t.indented&&iX(t.currentLine,t.nextNonspace)===YG){var n=t.currentLine.slice(t.nextNonspace),r=t.options.disallowedHtmlBlockTags,o=void 0;for(o=1;o<=7;o++){var i=n.match(IX[o]);if(i){if(7===o){if("paragraph"===e.type)return 0;if(r.length>0){var a=new RegExp("</?(?:"+r.join("|")+")","i");if(a.test(i[0]))return 0}}t.closeUnmatchedBlocks();var s=t.addChild("htmlBlock",t.offset);return s.htmlBlockType=o,2}}}return 0},UX=function(t,e){var n;if(null!==e.stringContent&&!t.indented&&"paragraph"===e.type&&!zX(t,e.parent)&&(n=t.currentLine.slice(t.nextNonspace).match(AX))){t.closeUnmatchedBlocks();var r=void 0;while(iX(e.stringContent,0)===eX&&(r=t.inlineParser.parseReference(e,t.refMap)))e.stringContent=e.stringContent.slice(r);if(e.stringContent.length>0){var o=dK("heading",e.sourcepos);return o.level="="===n[0][0]?1:2,o.headingType="setext",o.stringContent=e.stringContent,e.insertAfter(o),e.unlink(),t.tip=o,t.advanceOffset(t.currentLine.length-t.offset,!1),2}return 0}return 0},WX=function(t){return!t.indented&&PX.test(t.currentLine.slice(t.nextNonspace))?(t.closeUnmatchedBlocks(),t.addChild("thematicBreak",t.nextNonspace),t.advanceOffset(t.currentLine.length-t.offset,!1),2):0},JX=function(t,e){var n,r=e;return t.indented&&"list"!==e.type||!(n=FX(t,r))?0:(t.closeUnmatchedBlocks(),"list"===t.tip.type&&HX(r.listData,n)||(r=t.addChild("list",t.nextNonspace),r.listData=n),r=t.addChild("item",t.nextNonspace),r.listData=n,1)},KX=function(t){return t.indented&&"paragraph"!==t.tip.type&&!t.blank?(t.advanceOffset(XG,!0),t.closeUnmatchedBlocks(),t.addChild("codeBlock",t.offset),2):0},GX=[VX,qX,_X,$X,UX,WX,JX,KX,SX,OX,DX],XX=/^(-{3}|\+{3}|;{3})$/,ZX=function(t,e){var n=t.currentLine,r=t.lineNumber,o=t.indented;if(1===r&&!o&&"document"===e.type&&XX.test(n)){t.closeUnmatchedBlocks();var i=t.addChild("frontMatter",t.nextNonspace);return i.stringContent=n,t.advanceNextNonspace(),t.advanceOffset(n.length,!1),2}return 0},QX={continue:function(t,e){var n=t.currentLine,r=n.match(XX);return"frontMatter"===e.type&&r?(e.stringContent+=n,t.lastLineLength=r[0].length,t.finalize(e,t.lineNumber),2):0},finalize:function(t,e){null!==e.stringContent&&(e.literal=e.stringContent,e.stringContent=null)},canContain:function(){return!1},acceptsLines:!0},YX=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],tZ=/^[#`~*+_=<>0-9-;$]/,eZ=/\r\n|\n|\r/;function nZ(){return dK("document",[[1,1],[0,0]])}var rZ={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},oZ=function(){function t(t){this.options=wi(wi({},rZ),t),this.doc=nZ(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter&&(xX.frontMatter=QX,GX.unshift(ZX)),this.inlineParser=new zG(this.options)}return t.prototype.advanceOffset=function(t,e){void 0===e&&(e=!1);var n,r,o,i=this.currentLine;while(t>0&&(o=i[this.offset]))"\t"===o?(n=4-this.column%4,e?(this.partiallyConsumedTab=n>t,r=n>t?t:n,this.column+=r,this.offset+=this.partiallyConsumedTab?0:1,t-=r):(this.partiallyConsumedTab=!1,this.column+=n,this.offset+=1,t-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,t-=1)},t.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},t.prototype.findNextNonspace=function(){var t,e=this.currentLine,n=this.offset,r=this.column;while(""!==(t=e.charAt(n)))if(" "===t)n++,r++;else{if("\t"!==t)break;n++,r+=4-r%4}this.blank="\n"===t||"\r"===t||""===t,this.nextNonspace=n,this.nextNonspaceColumn=r,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=XG},t.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var t=4-this.column%4;this.tip.stringContent+=$J(" ",t)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset],this.tip.stringContent+=this.currentLine.slice(this.offset)+"\n"},t.prototype.addChild=function(t,e){while(!xX[this.tip.type].canContain(t))this.finalize(this.tip,this.lineNumber-1);var n=e+1,r=dK(t,[[this.lineNumber,n],[0,0]]);return r.stringContent="",this.tip.appendChild(r),this.tip=r,r},t.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){while(this.oldtip!==this.lastMatchedContainer){var t=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=t}this.allClosed=!0}},t.prototype.finalize=function(t,e){var n=t.parent;t.open=!1,t.sourcepos[1]=[e,this.lastLineLength],xX[t.type].finalize(this,t),this.tip=n},t.prototype.processInlines=function(t){var e,n=this.options.customParser,r=t.walker();this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;while(e=r.next()){var o=e.node,i=e.entering,a=o.type;n&&n[a]&&n[a](o,{entering:i,options:this.options}),i||"paragraph"!==a&&"heading"!==a&&("tableCell"!==a||o.ignored)||this.inlineParser.parse(o)}},t.prototype.incorporateLine=function(t){var e=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,-1!==t.indexOf("\0")&&(t=t.replace(/\0/g,"")),this.currentLine=t;var n,r=!0;while((n=e.lastChild)&&n.open){switch(e=n,this.findNextNonspace(),xX[e.type]["continue"](this,e)){case 0:break;case 1:r=!1;break;case 2:return void(this.lastLineLength=t.length);default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!r){e=e.parent;break}}this.allClosed=e===this.oldtip,this.lastMatchedContainer=e;var o="paragraph"!==e.type&&xX[e.type].acceptsLines,i=GX.length;while(!o){if(this.findNextNonspace(),"table"!==e.type&&"tableBody"!==e.type&&"paragraph"!==e.type&&!this.indented&&!tZ.test(t.slice(this.nextNonspace))){this.advanceNextNonspace();break}var a=0;while(a<i){var s=GX[a](this,e);if(1===s){e=this.tip;break}if(2===s){e=this.tip,o=!0;break}a++}if(a===i){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks(),this.blank&&e.lastChild&&(e.lastChild.lastLineBlank=!0);var c=e.type,l=this.blank&&!("blockQuote"===c||fK(e)&&e.isFenced||"item"===c&&!e.firstChild&&e.sourcepos[0][0]===this.lineNumber),u=e;while(u)u.lastLineBlank=l,u=u.parent;xX[c].acceptsLines?(this.addLine(),hK(e)&&e.htmlBlockType>=1&&e.htmlBlockType<=5&&YX[e.htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=t.length,this.finalize(e,this.lineNumber))):this.offset<t.length&&!this.blank&&(e=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}else this.addLine();this.lastLineLength=t.length},t.prototype.parse=function(t,e){this.doc=nZ(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var n=t.split(eZ),r=n.length;this.lines=e||n,this.options.referenceDefinition&&this.clearRefMaps(),t.charCodeAt(t.length-1)===rG&&(r-=1);for(var o=0;o<r;o++)this.incorporateLine(n[o]);while(this.tip)this.finalize(this.tip,r);return this.processInlines(this.doc),this.doc},t.prototype.partialParseStart=function(t,e){this.doc=nZ(),this.tip=this.doc,this.lineNumber=t-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";for(var n=e.length,r=0;r<n;r++)this.incorporateLine(e[r]);return this.doc},t.prototype.partialParseExtends=function(t){for(var e=0;e<t.length;e++)this.incorporateLine(t[e])},t.prototype.partialParseFinish=function(){while(this.tip)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},t.prototype.setRefMaps=function(t,e,n){this.refMap=t,this.refLinkCandidateMap=e,this.refDefCandidateMap=n},t.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){nG(t)}))},t}();function iZ(t,e){return t[0]<e[0]?1:t[0]>e[0]?-1:t[1]<e[1]?1:t[1]>e[1]?-1:0}function aZ(t,e){var n=t[0],r=t[1];return 1===iZ(r,e)?1:-1===iZ(n,e)?-1:0}function sZ(t,e){if(t.parent===e.parent&&t!==e){var n=t.next;while(n&&n!==e){for(var r=n.next,o=0,i=["parent","prev","next"];o<i.length;o++){var a=i[o];n[a]&&(ZJ(n[a].id),n[a]=null)}n=r}t.next=e.next,e.next?e.next.prev=t:t.parent.lastChild=t}}function cZ(t){var e=[],n=t.firstChild;while(n)e.push(n),n=n.next;return e}function lZ(t,e){for(var n=0,r=e;n<r.length;n++){var o=r[n];t.insertBefore(o)}}function uZ(t,e){for(var n=e.length-1;n>=0;n-=1)t.prependChild(e[n])}function pZ(t,e){if(t&&t.parent&&0!==e){var n,r=t.parent.walker();r.resumeAt(t,!0);while(n=r.next()){var o=n.node,i=n.entering;i&&(o.sourcepos[0][0]+=e,o.sourcepos[1][0]+=e)}}}function dZ(t,e){var n=t[0],r=t[1];return r[0]<e?1:n[0]>e?-1:0}function fZ(t,e){var n=t.firstChild;while(n){var r=dZ(n.sourcepos,e);if(0===r)return n;if(-1===r)return n.prev||n;n=n.next}return t.lastChild}function hZ(t){while(t.lastChild)t=t.lastChild;return t}function mZ(t){while(t.parent&&"document"!==t.parent.type&&t.parent.sourcepos[0][0]===t.sourcepos[0][0])t=t.parent;return t}function vZ(t,e){var n=t.firstChild,r=null;while(n){var o=dZ(n.sourcepos,e);if(0===o){if(n.sourcepos[0][0]===e||!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===o)break;r=n,n=n.next}}return r?mZ(hZ(r)):null}function gZ(t,e){var n=t,r=null;while(n){var o=aZ(n.sourcepos,e);if(0===o){if(!n.firstChild)return n;r=n,n=n.firstChild}else{if(-1===o)return r;if(!n.next)return r;n=n.next}}return n}function yZ(t){return XJ(t)||null}function bZ(t,e,n){if(void 0===n&&(n=null),e){var r=e.walker();while(e&&e!==n){t(e);var o=r.next();if(!o)break;e=o.node}}}function wZ(t){var e=yZ(t);if(!e)return!0;while(e&&"document"!==e.type){if(!e.parent&&!e.prev&&!e.next)return!0;e=e.parent}return!1}var kZ=/\r\n|\n|\r/;function xZ(t){var e=t.match(/^[ \t]+/);if(e&&(e[0].length>=2||/\t/.test(e[0])))return!0;var n=e?t.slice(e.length):t;return BX.test(n)||jX.test(n)}function CZ(t){return!aX(t)&&-1!==t.indexOf("|")}function MZ(t){var e=t.id,n=t.title,r=t.sourcepos,o=t.dest;return{id:e,title:n,sourcepos:r,unlinked:!1,destination:o}}var TZ=function(){function t(t,e){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(null===e||void 0===e?void 0:e.referenceDefinition),this.parser=new oZ(e),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},t=t||"",this.lineTexts=t.split(kZ),this.root=this.parser.parse(t,this.lineTexts)}return t.prototype.updateLineTexts=function(t,e,n){var r,o=t[0],i=t[1],a=e[0],s=e[1],c=n.split(kZ),l=c.length,u=this.lineTexts[o-1],p=this.lineTexts[a-1];c[0]=u.slice(0,i-1)+c[0],c[l-1]=c[l-1]+p.slice(s-1);var d=a-o+1;return(r=this.lineTexts).splice.apply(r,ki([o-1,d],c)),l-d},t.prototype.updateRootNodeState=function(){if(1===this.lineTexts.length&&""===this.lineTexts[0])return this.root.lastLineBlank=!0,void(this.root.sourcepos=[[1,1],[1,0]]);this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);var t=this.lineTexts,e=t.length-1;while(""===t[e])e-=1;t.length-2>e&&(e+=1),this.root.sourcepos[1]=[e+1,t[e].length]},t.prototype.replaceRangeNodes=function(t,e,n){t?(lZ(t,n),sZ(t,e),[t.id,e.id].forEach((function(t){return ZJ(t)})),t.unlink()):e?(lZ(e,n),ZJ(e.id),e.unlink()):uZ(this.root,n)},t.prototype.getNodeRange=function(t,e){var n=fZ(this.root,t[0]),r=fZ(this.root,e[0]);return r&&r.next&&e[0]+1===r.next.sourcepos[0][0]&&(r=r.next),[n,r]},t.prototype.trigger=function(t,e){this.eventHandlerMap[t].forEach((function(t){t(e)}))},t.prototype.extendEndLine=function(t){while(""===this.lineTexts[t])t+=1;return t},t.prototype.parseRange=function(t,e,n,r){t&&t.prev&&(vK(t.prev)&&xZ(this.lineTexts[n-1])||gK(t.prev)&&CZ(this.lineTexts[n-1]))&&(t=t.prev,n=t.sourcepos[0][0]);var o=this.lineTexts.slice(n-1,r),i=this.parser.partialParseStart(n,o),a=e?e.next:this.root.firstChild,s=i.lastChild,c=s&&fK(s)&&s.open,l=s&&bK(s)&&s.open,u=s&&vK(s);while((c||l)&&a||u&&a&&("list"===a.type||a.sourcepos[0][1]>=2)){var p=this.extendEndLine(a.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(r,p)),t||(t=e),e=a,r=p,a=a.next}this.parser.partialParseFinish();var d=cZ(i);return{newNodes:d,extStartNode:t,extEndNode:e}},t.prototype.getRemovedNodeRange=function(t,e){return!t||t&&yK(t)||e&&yK(e)?null:{id:[t.id,e.id],line:[t.sourcepos[0][0]-1,e.sourcepos[1][0]-1]}},t.prototype.markDeletedRefMap=function(t,e){var n=this;if(!eG(this.refMap)){var r=function(t){if(yK(t)){var e=n.refMap[t.label];e&&t.id===e.id&&(e.unlinked=!0)}};t&&bZ(r,t.parent,e),e&&bZ(r,e)}},t.prototype.replaceWithNewRefDefState=function(t){var e=this;if(!eG(this.refMap)){var n=function(t){if(yK(t)){var n=t.label,r=e.refMap[n];r&&!r.unlinked||(e.refMap[n]=MZ(t))}};t.forEach((function(t){bZ(n,t)}))}},t.prototype.replaceWithRefDefCandidate=function(){var t=this;eG(this.refDefCandidateMap)||YK(this.refDefCandidateMap,(function(e,n){var r=n.label,o=n.sourcepos,i=t.refMap[r];(!i||i.unlinked||i.sourcepos[0][0]>o[0][0])&&(t.refMap[r]=MZ(n))}))},t.prototype.getRangeWithRefDef=function(t,e,n,r,o){if(this.referenceDefinition&&!eG(this.refMap)){var i=fZ(this.root,t-1),a=fZ(this.root,e+1);i&&yK(i)&&i!==n&&i!==r&&(n=i,t=n.sourcepos[0][0]),a&&yK(a)&&a!==n&&a!==r&&(r=a,e=this.extendEndLine(r.sourcepos[1][0]+o))}return[n,r,t,e]},t.prototype.parse=function(t,e,n){void 0===n&&(n=0);var r=this.getNodeRange(t,e),o=r[0],i=r[1],a=o?Math.min(o.sourcepos[0][0],t[0]):t[0],s=this.extendEndLine((i?Math.max(i.sourcepos[1][0],e[0]):e[0])+n),c=this.parseRange.apply(this,this.getRangeWithRefDef(a,s,o,i,n)),l=c.newNodes,u=c.extStartNode,p=c.extEndNode,d=this.getRemovedNodeRange(u,p),f=p?p.next:this.root.firstChild;return this.referenceDefinition?(this.markDeletedRefMap(u,p),this.replaceRangeNodes(u,p,l),this.replaceWithNewRefDefState(l)):this.replaceRangeNodes(u,p,l),{nodes:l,removedNodeRange:d,nextNode:f}},t.prototype.parseRefLink=function(){var t=this,e=[];return eG(this.refMap)||YK(this.refMap,(function(n,r){r.unlinked&&delete t.refMap[n],YK(t.refLinkCandidateMap,(function(r,o){var i=o.node,a=o.refLabel;a===n&&e.push(t.parse(i.sourcepos[0],i.sourcepos[1]))}))})),e},t.prototype.removeUnlinkedCandidate=function(){eG(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach((function(t){YK(t,(function(e){wZ(e)&&delete t[e]}))}))},t.prototype.editMarkdown=function(t,e,n){var r=this.updateLineTexts(t,e,n),o=this.parse(t,e,r),i=tG(o,"nextNode");pZ(o.nextNode,r),this.updateRootNodeState();var a=[i];return this.referenceDefinition&&(this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),a=a.concat(this.parseRefLink())),this.trigger("change",a),a},t.prototype.getLineTexts=function(){return this.lineTexts},t.prototype.getRootNode=function(){return this.root},t.prototype.findNodeAtPosition=function(t){var e=gZ(this.root,t);return e&&e!==this.root?e:null},t.prototype.findFirstNodeAtLine=function(t){return vZ(this.root,t)},t.prototype.on=function(t,e){this.eventHandlerMap[t].push(e)},t.prototype.off=function(t,e){var n=this.eventHandlerMap[t],r=n.indexOf(e);n.splice(r,1)},t.prototype.findNodeById=function(t){return yZ(t)},t.prototype.removeAllNode=function(){QJ()},t}(),SZ=["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"],OZ=new RegExp("<(/?(?:"+SZ.join("|")+")[^>]*>)","ig");function EZ(t){return OZ.test(t)?t.replace(OZ,(function(t,e){return"&lt;"+e})):t}var NZ=4,DZ={heading:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"h"+t.level,outerNewLine:!0}},text:function(t){return{type:"text",content:t.literal}},softbreak:function(t,e){var n=e.options;return{type:"html",content:n.softbreak}},linebreak:function(){return{type:"html",content:"<br />\n"}},emph:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"em"}},strong:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"strong"}},paragraph:function(t,e){var n,r=e.entering,o=null===(n=t.parent)||void 0===n?void 0:n.parent;return o&&"list"===o.type&&o.listData.tight?null:{type:r?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(t,e){var n=e.entering,r=t.listData,o=r.type,i=r.start,a="bullet"===o?"ul":"ol",s={};return"ol"===a&&null!==i&&1!==i&&(s.start=i.toString()),{type:n?"openTag":"closeTag",tagName:a,attributes:s,outerNewLine:!0}},item:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(t,e){var n=e.options,r=n.tagFilter?EZ(t.literal):t.literal;return{type:"html",content:r}},htmlBlock:function(t,e){var n=e.options,r=n.tagFilter?EZ(t.literal):t.literal;return n.nodeId?[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:r},{type:"closeTag",tagName:"div",outerNewLine:!0}]:{type:"html",content:r,outerNewLine:!0}},code:function(t){return[{type:"openTag",tagName:"code"},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t.info,n=e?e.split(/\s+/):[],r=[];return n.length>0&&n[0].length>0&&r.push("language-"+_J(n[0])),[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:r},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(t,e){var n=e.entering;if(n){var r=t,o=r.title,i=r.destination;return{type:"openTag",tagName:"a",attributes:wi({href:_J(i)},o&&{title:_J(o)})}}return{type:"closeTag",tagName:"a"}},image:function(t,e){var n=e.getChildrenText,r=e.skipChildren,o=t,i=o.title,a=o.destination;return r(),{type:"openTag",tagName:"img",selfClose:!0,attributes:wi({src:_J(a),alt:n(t)},i&&{title:_J(i)})}},customBlock:function(t,e,n){var r=t.info.trim().toLowerCase(),o=n[r];if(o)try{return o(t,e)}catch(i){console.warn("[@toast-ui/editor] - The error occurred when "+r+" block node was parsed in markdown renderer: "+i)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(t){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:t.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(t,e,n){var r=t,o=r.sourcepos,i=r.info,a=i.trim().toLowerCase(),s=n[a],c=e.entering;if(s)try{return s(t,e)}catch(u){console.warn("[@toast-ui/editor] - The error occurred when "+a+" inline node was parsed in markdown renderer: "+u)}var l=o[1][1]-o[0][1]+1===i.length+NZ?"":i+" ";return c?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+l}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},LZ={strike:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"del"}},item:function(t,e){var n=e.entering,r=t.listData,o=r.checked,i=r.task;if(n){var a={type:"openTag",tagName:"li",outerNewLine:!0};return i?[a,{type:"openTag",tagName:"input",selfClose:!0,attributes:wi(wi({},o&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:a}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(t,e){var n=e.entering;return{type:n?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(t,e){var n=e.entering;if(n)return{type:"openTag",tagName:"tr",outerNewLine:!0};var r=[];if(t.lastChild)for(var o=t.parent.parent.columns.length,i=t.lastChild.endIdx,a=i+1;a<o;a+=1)r.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0});return r.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),r},tableCell:function(t,e){var n=e.entering;if(t.ignored)return{type:"text",content:""};var r=t.parent.parent,o="tableHead"===r.type?"th":"td",i=r.parent,a=i.columns[t.startIdx],s=(null===a||void 0===a?void 0:a.align)?{align:a.align}:null;return n?wi({type:"openTag",tagName:o,outerNewLine:!0},s&&{attributes:s}):{type:"closeTag",tagName:o,outerNewLine:!0}}},IZ={softbreak:"\n",gfm:!1,tagFilter:!1,nodeId:!1};function AZ(t){var e=[],n=t.walker(),r=null;while(r=n.next()){var o=r.node;"text"===o.type&&e.push(o.literal)}return e.join("")}var RZ=function(){function t(t){this.buffer=[],this.options=wi(wi({},IZ),t),this.convertors=this.createConvertors(),delete this.options.convertors}return t.prototype.createConvertors=function(){var t=wi({},DZ);if(this.options.gfm&&(t=wi(wi({},t),LZ)),this.options.convertors){var e=this.options.convertors,n=Object.keys(e),r=wi(wi({},DZ),LZ);n.forEach((function(n){var o=t[n],i=e[n],a=-1===Object.keys(r).indexOf(n)?n.toLowerCase():n;t[a]=o?function(t,e,n){return e.origin=function(){return o(t,e,n)},i(t,e)}:i}))}return t},t.prototype.getConvertors=function(){return this.convertors},t.prototype.getOptions=function(){return this.options},t.prototype.render=function(t){var e=this;this.buffer=[];var n=t.walker(),r=null,o=function(){var t=r.node,o=r.entering,a=i.convertors[t.type];if(!a)return"continue";var s=!1,c={entering:o,leaf:!JJ(t),options:i.options,getChildrenText:AZ,skipChildren:function(){s=!0}},l=bK(t)||wK(t)?a(t,c,i.convertors):a(t,c);if(l){var u=Array.isArray(l)?l:[l];u.forEach((function(n,r){"openTag"===n.type&&e.options.nodeId&&0===r&&(n.attributes||(n.attributes={}),n.attributes["data-nodeid"]=String(t.id)),e.renderHTMLNode(n)})),s&&(n.resumeAt(t,!1),n.next())}},i=this;while(r=n.next())o();return this.addNewLine(),this.buffer.join("")},t.prototype.renderHTMLNode=function(t){switch(t.type){case"openTag":case"closeTag":this.renderElementNode(t);break;case"text":this.renderTextNode(t);break;case"html":this.renderRawHtmlNode(t);break}},t.prototype.generateOpenTagString=function(t){var e=this,n=t.tagName,r=t.classNames,o=t.attributes;this.buffer.push("<"+n),r&&r.length>0&&this.buffer.push(' class="'+r.join(" ")+'"'),o&&Object.keys(o).forEach((function(t){var n=o[t];e.buffer.push(" "+t+'="'+n+'"')})),t.selfClose&&this.buffer.push(" /"),this.buffer.push(">")},t.prototype.generateCloseTagString=function(t){var e=t.tagName;this.buffer.push("</"+e+">")},t.prototype.addNewLine=function(){this.buffer.length&&"\n"!==ZK(ZK(this.buffer))&&this.buffer.push("\n")},t.prototype.addOuterNewLine=function(t){t.outerNewLine&&this.addNewLine()},t.prototype.addInnerNewLine=function(t){t.innerNewLine&&this.addNewLine()},t.prototype.renderTextNode=function(t){this.buffer.push(_J(t.content))},t.prototype.renderRawHtmlNode=function(t){this.addOuterNewLine(t),this.buffer.push(t.content),this.addOuterNewLine(t)},t.prototype.renderElementNode=function(t){"openTag"===t.type?(this.addOuterNewLine(t),this.generateOpenTagString(t),t.selfClose?this.addOuterNewLine(t):this.addInnerNewLine(t)):(this.addInnerNewLine(t),this.generateCloseTagString(t),this.addOuterNewLine(t))},t}(),PZ=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style|controls)","g"),BZ=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g"),jZ=/href|src|background/i,FZ=/((java|vb|live)script|x):/i,HZ=/^on\S+/i,zZ=new RegExp("(<"+en+"[^>]*)(onload\\s*=)","ig"),VZ=/<!--[\s\S]*?-->/g,qZ=/[ \t\r\n]/g,_Z=["script","iframe","textarea","form","button","select","input","meta","style","link","title","embed","object","details","summary","base"],$Z=["iframe","embed","details","summary"],UZ=h([],_Z);function WZ(t){if(Mt($Z,t)){var e=UZ.indexOf(t);e>-1&&UZ.splice(e,1)}}function JZ(t){var e=document.createElement("div");return k(t)&&(t=t.replace(VZ,"").replace(zZ,"$1"),e.innerHTML=t),KZ(e),ZZ(e),Dn(e,!0)}function KZ(t){var e=wn(t,UZ.join(","));e.forEach((function(t){Cn(t)}))}function GZ(t,e){return t.match(jZ)&&e.replace(qZ,"").match(FZ)}function XZ(t,e){e.forEach((function(e){var n=e.name;HZ.test(n)&&(t[n]=null),t.removeAttribute(n)}))}function ZZ(t){wn(t,"*").forEach((function(t){var e=t.attributes,n=Le(e).filter((function(t){var e=t.name,n=t.value,r=e.match(PZ),o=e.match(BZ),i=r&&GZ(e,n);return!r&&!o||i}));XZ(t,n)}))}function QZ(t){return t=t.replace(VZ,""),FZ.test(t)?"":t}function YZ(t,e){return t.literal.replace(new RegExp("(<\\s*"+e+"[^>]+?>)|(</"+e+"\\s*[>])","ig"),"").trim()}function tQ(t){t=t.match(fn)[0];var e=t.match(new RegExp(ln,"g"));return e?e.reduce((function(t,e){var n=e.trim().split("="),r=n[0],o=n.slice(1);return o.length&&(t[r]=o.join("=").replace(/'|"/g,"").trim()),t}),{}):{}}function eQ(t){return Le(t.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{})}function nQ(t,e,n,r){var o=r.getToDOMNode(e)(t),i=n(o.outerHTML),a=document.createElement("div");a.innerHTML=i,o=a.firstChild;var s=eQ(o);return{dom:o,htmlAttrs:s}}var rQ={htmlBlock:function(t,e,n){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:eQ(t),childrenHTML:t.innerHTML}}}],toDOM:function(r){var o=nQ(r,t,e,n),i=o.dom,a=o.htmlAttrs;return a.class=a.class?a.class+" html-block":"html-block",h([t,a],Le(i.childNodes))}}},htmlInline:function(t,e,n){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:t,getAttrs:function(t){return{htmlAttrs:eQ(t)}}}],toDOM:function(r){var o=nQ(r,t,e,n).htmlAttrs;return[t,o,0]}}}};function oQ(t,e,n){var r={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach((function(o){t[o]&&Object.keys(t[o]).forEach((function(t){var i="htmlBlock"===o?"nodes":"marks";WZ(t),r[i][t]=rQ[o](t,e,n)}))})),r}var iQ=/^\s*<\s*\//,aQ={paragraph:function(t,e){var n=e.entering,r=e.origin,o=e.options;return o.nodeId?{type:n?"openTag":"closeTag",outerNewLine:!0,tagName:"p"}:r()},softbreak:function(t){var e=t.prev&&"htmlInline"===t.prev.type,n=e&&/<br ?\/?>/.test(t.prev.literal),r=n?"\n":"<br>\n";return{type:"html",content:r}},item:function(t,e){var n=e.entering;if(n){var r={},o=[];return t.listData.task&&(r["data-task"]="",o.push("task-list-item"),t.listData.checked&&(o.push("checked"),r["data-task-checked"]="")),{type:"openTag",tagName:"li",classNames:o,attributes:r,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(t){var e={"data-backticks":String(t.tickCount)};return[{type:"openTag",tagName:"code",attributes:e},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(t){var e=t,n=e.fenceLength,r=e.info,o=r?r.split(/\s+/):[],i=[],a={};if(n>3&&(a["data-backticks"]=n),o.length>0&&o[0].length>0){var s=o[0];i.push("lang-"+s),a["data-language"]=s}return[{type:"openTag",tagName:"pre",classNames:i},{type:"openTag",tagName:"code",attributes:a},{type:"text",content:t.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(t,e){var n=e.origin,r=e.entering,o=e.skipChildren,i=t.info;if(-1!==i.indexOf("widget")&&r){o();var a=Ce(t),s=ye(i,a).outerHTML;return[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:s},{type:"closeTag",tagName:"span"}]}return n()}};function sQ(t,e){var n=f({},aQ);return t&&(n.link=function(e,n){var r=n.entering,o=n.origin,i=o();return r&&(i.attributes=f(f({},i.attributes),t)),i}),e&&Object.keys(e).forEach((function(t){var r=n[t],o=e[t];r&&qe(o)?n[t]=function(t,e){var n=f({},e);return n.origin=function(){return r(t,e)},o(t,n)}:Mt(["htmlBlock","htmlInline"],t)&&!qe(o)?n[t]=function(t,e){var n=t.literal.match(fn);if(n){var r=n[0],i=n[1],a=n[3],s=(i||a).toLowerCase(),c=o[s],l=YZ(t,s);if(c){var u=f({},t);return u.attrs=tQ(r),u.childrenHTML=l,u.type=s,e.entering=!iQ.test(t.literal),c(u,e)}}return e.origin()}:n[t]=o})),n}var cQ=["list","item","blockQuote"],lQ=["UL","OL","BLOCKQUOTE"];function uQ(t,e){var n,r=t.child(e);return!r.childCount||1===r.childCount&&!(null===(n=r.firstChild.text)||void 0===n?void 0:n.trim())}function pQ(t,e,n){var r=Kt(e)-1,o=Gt(e)-1,i=n[r].getBoundingClientRect(),a=n[o].offsetTop-n[r].offsetTop+n[o].clientHeight;return{height:a<=0?n[r].clientHeight:a+dQ(t,n,Math.min(o+1,t.childCount-1)),rect:i}}function dQ(t,e,n){var r=t.childCount-1,o=0;while(n<=r&&uQ(t,n))o+=e[n].clientHeight,n+=1;return o}function fQ(t,e){while(!t.getAttribute("data-nodeid")&&t.parentElement!==e)t=t.parentElement;return t}function hQ(t,e){var n=0;while(t&&t!==e){if(Mt(lQ,t.tagName)||(n+=t.offsetTop),t.offsetParent===e.offsetParent)break;t=t.parentElement}return n}function mQ(t,e){var n=e,r=null;while(n){var o=n.firstElementChild;if(!o)break;var i=vQ(o,t,hQ(n,e));r=n,n=i}var a=n||r;return a===e?null:a}function vQ(t,e,n){return t&&e>n+t.offsetTop?vQ(t.nextElementSibling,e,n)||t:null}function gQ(t,e,n,r){var o=Math.min((t-e)/n,1);return o*r}function yQ(t){var e=document.querySelector('[data-nodeid="'+t.id+'"]');while(!e||Yt(t))t=t.parent,e=document.querySelector('[data-nodeid="'+t.id+'"]');return bQ({mdNode:t,el:e})}function bQ(t){var e=t.mdNode,n=t.el;while((Mt(cQ,e.type)||"table"===e.type)&&e.firstChild)e=e.firstChild,n=n.firstElementChild;return{mdNode:e,el:n}}var wQ={};function kQ(t,e){wQ[t]=wQ[t]||{},wQ[t].height=e}function xQ(t,e){wQ[t]=wQ[t]||{},wQ[t].offsetTop=e}function CQ(t){return wQ[t]&&wQ[t].height}function MQ(t){return wQ[t]&&wQ[t].offsetTop}function TQ(t){t&&(delete wQ[Number(t.getAttribute("data-nodeid"))],Le(t.children).forEach((function(t){TQ(t)})))}function SQ(t,e,n){var r=CQ(n),o=MQ(n),i=r||t.clientHeight,a=o||hQ(t,e)||t.offsetTop;return r||kQ(n,i),o||xQ(n,a),{nodeHeight:i,offsetTop:a}}var OQ=vn("md-preview-highlight");function EQ(t,e){var n=t.firstChild;while(n&&n.next){if(Xt(n.next)>e+1)break;n=n.next}return n}var NQ=function(){function t(t,e){var n=document.createElement("div");this.el=n,this.eventEmitter=t,this.isViewer=!!e.isViewer,this.el.className=vn("md-preview");var r=e.linkAttributes,o=e.customHTMLRenderer,i=e.sanitizer,a=e.highlight,s=void 0!==a&&a;this.renderer=new RZ({gfm:!0,nodeId:!0,convertors:sQ(r,o)}),this.cursorNodeId=null,this.sanitizer=i,this.initEvent(s),this.initContentSection()}return t.prototype.initContentSection=function(){this.previewContent=Sn('<div class="'+vn("contents")+'"></div>'),this.el.appendChild(this.previewContent)},t.prototype.toggleActive=function(t){Tn(this.el,"active",t)},t.prototype.initEvent=function(t){var e=this;this.eventEmitter.listen("updatePreview",this.update.bind(this)),t&&(this.eventEmitter.listen("changeToolbarState",(function(t){var n=t.mdNode,r=t.cursorPos;e.updateCursorNode(n,r)})),this.eventEmitter.listen("blur",(function(){e.removeHighlight()}))),gi(this.el,"scroll",(function(t){e.eventEmitter.emit("scroll","preview",mQ(t.target.scrollTop,e.previewContent))})),this.eventEmitter.listen("changePreviewTabPreview",(function(){return e.toggleActive(!0)})),this.eventEmitter.listen("changePreviewTabWrite",(function(){return e.toggleActive(!1)}))},t.prototype.removeHighlight=function(){if(this.cursorNodeId){var t=this.getElementByNodeId(this.cursorNodeId);t&&ot(t,OQ)}},t.prototype.updateCursorNode=function(t,e){t&&(t=ae(t,(function(t){return!ie(t)})),"tableRow"===t.type?t=EQ(t,e[1]):"tableBody"===t.type&&(t=null));var n=t?t.id:null;if(this.cursorNodeId!==n){var r=this.getElementByNodeId(this.cursorNodeId),o=this.getElementByNodeId(n);r&&ot(r,OQ),o&&Q(o,OQ),this.cursorNodeId=n}},t.prototype.getElementByNodeId=function(t){return t?this.previewContent.querySelector('[data-nodeid="'+t+'"]'):null},t.prototype.update=function(t){var e=this;t.forEach((function(t){return e.replaceRangeNodes(t)})),this.eventEmitter.emit("afterPreviewRender",this)},t.prototype.replaceRangeNodes=function(t){var e=this,n=t.nodes,r=t.removedNodeRange,o=this.previewContent,i=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(n.map((function(t){return e.renderer.render(t)})).join("")));if(r){var a=r.id,s=a[0],c=a[1],l=this.getElementByNodeId(s),u=this.getElementByNodeId(c);if(l){l.insertAdjacentHTML("beforebegin",i);var p=l;while(p&&p!==u){var d=p.nextElementSibling;Cn(p),TQ(p),p=d}(null===p||void 0===p?void 0:p.parentNode)&&(Cn(p),TQ(p))}}else o.insertAdjacentHTML("afterbegin",i)},t.prototype.getRenderer=function(){return this.renderer},t.prototype.destroy=function(){ui(this.el,"scroll"),this.el=null},t.prototype.getElement=function(){return this.el},t.prototype.getHTML=function(){return this.previewContent.innerHTML},t.prototype.setHTML=function(t){this.previewContent.innerHTML=t},t.prototype.setHeight=function(t){R(this.el,{height:t+"px"})},t.prototype.setMinHeight=function(t){R(this.el,{minHeight:t+"px"})},t}();function DQ(t,e){var n=t.depth;while(n){var r=t.node(n);if(e(r,n))return{node:r,depth:n,offset:n>0?t.before(n):0};n-=1}return null}function LQ(t){return!!DQ(t,(function(t){var e=t.type;return"listItem"===e.name||"bulletList"===e.name||"orderedList"===e.name}))}function IQ(t){return!!DQ(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function AQ(t){return DQ(t,(function(t){var e=t.type;return"listItem"===e.name}))}function RQ(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}function PQ(t){return Object.keys(t).reduce((function(e,n){return"rawHTML"!==n&&t[n]&&(n="className"===n?"class":n,e[n]=t[n]),e}),{})}function BQ(t){return{tag:t,getAttrs:function(t){return["rawHTML","colspan","rowspan","extended"].reduce((function(e,n){var r="rawHTML"===n?"data-raw-html":n,o=t.getAttribute(r);return o&&(e[n]=Mt(["rawHTML","extended"],n)?o:Number(o)),e}),{})}}}function jQ(){return{htmlAttrs:{default:null},classNames:{default:null}}}function FQ(t){var e=t.htmlAttrs,n=t.classNames;return f(f({},e),{class:n?n.join(" "):null})}function HQ(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(i){var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}return null}function zQ(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(a){for(var s=a.length?a[a.length-1]:e,c=s.contentMatch,l=r;c&&l<o;l+=1)c=c.matchType(n.child(l).type);if(c&&c.validEnd)return a}return null}function VQ(t,e,n,r){var o=HQ(t,n),i=zQ(e,n);if(o&&i){var a=o.map((function(t){return{type:t}})),s=i.map((function(t){return{type:t,attrs:r}}));return a.concat({type:n}).concat(s)}return null}function qQ(t,e,n,o,a){for(var s=e.start,c=e.end,l=e.startIndex,u=e.endIndex,p=e.parent,d=r["c"].empty,f=n.length-1;f>=0;f-=1)d=r["c"].from(n[f].type.create(n[f].attrs,d));t.step(new i["b"](s-(o?2:0),c,s,c,new r["j"](d,0,0),n.length,!0));var h=0;for(f=0;f<n.length;f+=1)if(n[f].type===a){h=f+1;break}for(var m=n.length-h,v=s+n.length-(o?2:0),g=(f=l,u);f<g;f+=1){var y=f===l;!y&&Object(i["g"])(t.doc,v,m)&&(t.split(v,m),v+=2*m),v+=p.child(f).nodeSize}return t}function _Q(t,e,n,o){var i=e.$from,a=e.$to,s=e.depth,c=e,l=!1;if(s>=2&&i.node(s-1).type.compatibleContent(n)&&0===e.startIndex&&i.index(s-1)){var u=t.doc.resolve(e.start-2);c=new r["g"](u,u,s),e.endIndex<e.parent.childCount&&(e=new r["g"](i,t.doc.resolve(a.end(s)),s)),l=!0}var p=VQ(c,e,n,o);return p?qQ(t,e,p,l,n):t}function $Q(t,e){var n=t.resolve(e);while("paragraph"!==n.node().type.name)e-=2,n=t.resolve(e);return AQ(n)}function UQ(t,e){var n=e.$from,r=e.$to,o=AQ(n),i=AQ(r);if(o&&i)while(i){var a=i.offset,s=i.node,c={task:!s.attrs.task,checked:!1};if(t.setNodeMarkup(a,null,c),a===o.offset)break;i=$Q(t.doc,a)}return t}function WQ(t,e,n){var r=e.$from,o=e.$to,i=AQ(r),a=AQ(o);if(i&&a)while(a){var s=a.offset,c=a.node,l=a.depth;c.attrs.task&&t.setNodeMarkup(s,null,{task:!1,checked:!1});var u=t.doc.resolve(s);if(u.parent.type!==n){var p=u.before(l-1);t.setNodeMarkup(p,n)}if(s===i.offset)break;a=$Q(t.doc,s)}return t}function JQ(t){return function(e,n){var r=e.selection,o=e.tr,i=r.$from,a=r.$to,s=i.blockRange(a);if(s){var c=LQ(i)?WQ(o,s,t):_Q(o,s,t);return n(c),!0}return!1}}function KQ(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from,a=n.$to,s=i.blockRange(a);if(s){var c=LQ(i)?UQ(r,s):_Q(r,s,o.nodes.bulletList,{task:!0});return e(c),!0}return!1}}function GQ(t){return function(e,n){var o=e.tr,a=e.selection,s=a.$from,c=a.$to,l=s.blockRange(c,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));if(l&&l.startIndex>0){var u=l.parent,p=u.child(l.startIndex-1);if(p.type!==t)return!1;var d=p.lastChild&&p.lastChild.type===u.type,f=d?r["c"].from(t.create()):null,h=new r["j"](r["c"].from(t.create(null,r["c"].from(u.type.create(null,f)))),d?3:1,0),m=l.start,v=l.end;return o.step(new i["b"](m-(d?3:1),v,m,v,h,1,!0)),n(o),!0}return!1}}function XQ(t,e,n){var o=e.$from,a=e.$to,s=e.end,c=e.depth,l=e.parent,u=a.end(c);return s<u&&(t.step(new i["b"](s-1,u,s,u,new r["j"](r["c"].from(n.create(null,l.copy())),1,0),1,!0)),e=new r["g"](t.doc.resolve(o.pos),t.doc.resolve(u),c)),t.lift(e,Object(i["k"])(e)),t}function ZQ(t,e){for(var n=e.parent,o=e.end,a=e.endIndex-1,s=e.startIndex;a>s;a-=1)o-=n.child(a).nodeSize,t.delete(o-1,o+1);var c=t.doc.resolve(e.start),l=c.nodeAfter,u=0===e.startIndex,p=e.endIndex===n.childCount,d=c.node(-1),f=c.index(-1),h=d.canReplace(f+(u?0:1),f+1,null===l||void 0===l?void 0:l.content.append(p?r["c"].empty:r["c"].from(n)));if(l&&h){var m=c.pos,v=m+l.nodeSize;t.step(new i["b"](m-(u?1:0),v+(p?1:0),m+1,v-1,new r["j"]((u?r["c"].empty:r["c"].from(n.copy(r["c"].empty))).append(p?r["c"].empty:r["c"].from(n.copy(r["c"].empty))),u?0:1,p?0:1),u?0:1))}return t}function QQ(t){return function(e,n){var r=e.tr,o=e.selection,i=o.$from,a=o.$to,s=i.blockRange(a,(function(e){var n=e.childCount,r=e.firstChild;return!!n&&r.type===t}));if(s){var c=i.node(s.depth-1).type===t,l=c?XQ(r,s,t):ZQ(r,s);return n(l),!0}return!1}}function YQ(t){return function(e,n){var o=e.tr,s=e.selection,c=s.$from,l=s.$to;if(c.depth<2||!c.sameParent(l))return!1;var u=c.node(-1);if(u.type!==t)return!1;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==t||c.index(-2)!==c.node(-2).childCount-1)return!1;for(var p=c.index(-1)>0,d=r["c"].empty,f=c.depth-(p?1:2);f>=c.depth-3;f-=1)d=r["c"].from(c.node(f).copy(d));return d=d.append(r["c"].from(t.createAndFill())),o.replace(p?c.before():c.before(-1),c.after(-3),new r["j"](d,p?3:2,2)),o.setSelection(a["f"].near(o.doc.resolve(c.pos+(p?3:2)))),n(o),!0}var h=l.pos===c.end()?u.contentMatchAt(0).defaultType:null,m=h&&[null,{type:h}];return o.delete(c.pos,l.pos),!!Object(i["g"])(o.doc,c.pos,2,m)&&(o.split(c.pos,2,m),n(o),!0)}}function tY(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=n.$from,i=n.$to,a=o.blockRange(i);return!(!a||!LQ(o))&&GQ(r.nodes.listItem)(t,e)}}}function eY(){return function(){return function(t,e){var n=t.selection,r=t.schema,o=n.$from,i=n.$to,a=o.blockRange(i);return!(!a||!LQ(o))&&QQ(r.nodes.listItem)(t,e)}}}function nY(){return{indent:tY(),outdent:eY()}}var rY=new Map,oY=function(){function t(t,e,n,r){this.table=t,this.tableRows=e,this.tableStartPos=n,this.rowInfo=r}return t.create=function(e){var n=DQ(e,(function(t){var e=t.type;return"table"===e.name}));if(n){var r=n.node,o=n.depth,i=n.offset,a=rY.get(r);if((null===a||void 0===a?void 0:a.tableStartPos)===i+1)return a;var s=[],c=e.start(o),l=r.child(0),u=r.child(1),p=iY(l,c),d=iY(u,c+l.nodeSize);l.forEach((function(t){return s.push(t)})),u.forEach((function(t){return s.push(t)}));var f=new t(r,s,c,p.concat(d));return rY.set(r,f),f}return null},Object.defineProperty(t.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),t.prototype.getCellInfo=function(t,e){return this.rowInfo[t][e]},t.prototype.posAt=function(t,e){for(var n=0,r=this.tableStartPos;;n+=1){var o=r+this.tableRows[n].nodeSize;if(n===t){var i=e;while(i<this.totalColumnCount&&this.rowInfo[n][i].offset<r)i+=1;return i===this.totalColumnCount?o:this.rowInfo[n][i].offset}r=o}},t.prototype.getNodeAndPos=function(t,e){var n=this.rowInfo[t][e];return{node:this.table.nodeAt(n.offset-1),pos:n.offset}},t.prototype.extendedRowspan=function(t,e){return!1},t.prototype.extendedColspan=function(t,e){return!1},t.prototype.getRowspanCount=function(t,e){return 0},t.prototype.getColspanCount=function(t,e){return 0},t.prototype.decreaseColspanCount=function(t,e){return 0},t.prototype.decreaseRowspanCount=function(t,e){return 0},t.prototype.getColspanStartInfo=function(t,e){return null},t.prototype.getRowspanStartInfo=function(t,e){return null},t.prototype.getCellStartOffset=function(t,e){var n=this.rowInfo[t][e].offset;return this.extendedRowspan(t,e)?this.posAt(t,e):n},t.prototype.getCellEndOffset=function(t,e){var n=this.rowInfo[t][e],r=n.offset,o=n.nodeSize;return this.extendedRowspan(t,e)?this.posAt(t,e):r+o},t.prototype.getCellIndex=function(t){for(var e=0;e<this.totalRowCount;e+=1)for(var n=this.rowInfo[e],r=0;r<this.totalColumnCount;r+=1)if(n[r].offset+1>t.pos)return[e,r];return[0,0]},t.prototype.getRectOffsets=function(t,e){var n,r,o;void 0===e&&(e=t),t.pos>e.pos&&(n=[e,t],t=n[0],e=n[1]);var i=this.getCellIndex(t),a=i[0],s=i[1],c=this.getCellIndex(e),l=c[0],u=c[1];return r=Vt(a,l),a=r[0],l=r[1],o=Vt(s,u),s=o[0],u=o[1],this.getSpannedOffsets({startRowIdx:a,startColIdx:s,endRowIdx:l,endColIdx:u})},t.prototype.getSpannedOffsets=function(t){return t},t}(),iY=function(t,e){var n=[];return t.forEach((function(t,r){var o={rowspanMap:{},colspanMap:{},length:0};t.forEach((function(t,n){var i=t.nodeSize,a=0;while(o[a])a+=1;o[a]={offset:e+r+n+2,nodeSize:i},o.length+=1})),n.push(o)})),n};function aY(t,e){return zt(oY.prototype,t),iY=e,oY}function sY(t,e,n){for(var r=n.startRowIdx,o=n.startColIdx,i=n.endRowIdx,s=n.endColIdx,c=[],l=r;l<=i;l+=1)for(var u=o;u<=s;u+=1){var p=e.getCellInfo(l,u),d=p.offset,f=p.nodeSize;c.push(new a["g"](t.resolve(d+1),t.resolve(d+f-1)))}return c}function cY(t,e){var n=[];return t.childCount&&n.push(t),e.childCount&&n.push(e),r["c"].from(n)}var lY=function(t){function e(e,n){void 0===n&&(n=e);var r=this,o=e.node(0),i=oY.create(e),a=i.getRectOffsets(e,n),s=sY(o,i,a);return r=t.call(this,s[0].$from,s[0].$to,s)||this,r.startCell=e,r.endCell=n,r.offsetMap=i,r.isCellSelection=!0,r.visible=!1,r}return d(e,t),e.prototype.map=function(t,n){var r=this.startCell.pos,o=this.endCell.pos,i=t.resolve(n.map(r)),s=t.resolve(n.map(o)),c=oY.create(i);if(this.offsetMap.totalColumnCount>c.totalColumnCount||this.offsetMap.totalRowCount>c.totalRowCount){var l={tableBody:1,tableRow:2,tableCell:3,paragraph:4},u=l[s.parent.type.name],p=s.end(s.depth-u),d=Math.min(p-4,s.pos);return a["h"].create(t,d)}return new e(i,s)},e.prototype.eq=function(t){return t instanceof e&&t.startCell.pos===this.startCell.pos&&t.endCell.pos===this.endCell.pos},e.prototype.content=function(){for(var t=this.startCell.node(-2),e=this.startCell.start(-2),n=t.child(1).firstChild,o=t.child(0).type.create(),i=t.child(1).type.create(),a=oY.create(this.startCell),s=a.getRectOffsets(this.startCell,this.endCell),c=s.startRowIdx,l=s.startColIdx,u=s.endRowIdx,p=s.endColIdx,d=!1,f=c;f<=u;f+=1){for(var h=[],m=l;m<=p;m+=1){var v=a.getCellInfo(f,m).offset,g=t.nodeAt(v-e);g&&(d="tableHeadCell"===g.type.name,a.extendedRowspan(f,m)||a.extendedColspan(f,m)?h.push(g.type.create({extended:!0})):h.push(g.copy(g.content)))}var y=n.copy(r["c"].from(h)),b=d?o:i;b.content=b.content.append(r["c"].from(y))}return new r["j"](cY(o,i),1,1)},e}(a["f"]);function uY(t,e,n){for(var r=e.nodes,o=r.tableRow,i=r.tableHeadCell,a=r.paragraph,s=[],c=0;c<t;c+=1){var l=n&&n[c],u=a.create(null,l?e.text(l):[]);s.push(i.create(null,u))}return[o.create(null,s)]}function pY(t,e,n,r){for(var o=n.nodes,i=o.tableRow,a=o.tableBodyCell,s=o.paragraph,c=[],l=0;l<t;l+=1){for(var u=[],p=0;p<e;p+=1){var d=r&&r[l*e+p],f=s.create(null,d?n.text(d):[]);u.push(a.create(null,f))}c.push(i.create(null,u))}return c}function dY(t,e,n,r){void 0===r&&(r=null);for(var o=n.nodes,i=o.tableHeadCell,a=o.tableBodyCell,s=o.paragraph,c=0===e?i:a,l=[],u=0;u<t;u+=1)l.push(c.create(r,s.create()));return l}function fY(t,e){while(t&&t!==e){if("TD"===t.nodeName||"TH"===t.nodeName)return t;t=t.parentNode}return null}function hY(t){return DQ(t,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}))}function mY(t){if(t instanceof a["h"]){var e=t.$anchor,n=hY(e);if(n){var r=e.node(0).resolve(e.before(n.depth));return{anchor:r,head:r}}}var o=t,i=o.startCell,s=o.endCell;return{anchor:i,head:s}}function vY(t){var e;if(t.size){var n=t.content,r=t.openStart,o=t.openEnd;if(1!==n.childCount)return null;while(1===n.childCount&&(r>0&&o>0||"table"===(null===(e=n.firstChild)||void 0===e?void 0:e.type.name)))r-=1,o-=1,n=n.firstChild.content;if("tableHead"===n.firstChild.type.name||"tableBody"===n.firstChild.type.name)return n}return null}function gY(t){var e=t.startRowIdx,n=t.startColIdx,r=t.endRowIdx,o=t.endColIdx,i=r-e+1,a=o-n+1;return{rowCount:i,columnCount:a}}function yY(t,e){return f(f({},t.attrs),e)}var bY=new a["e"]("cellSelection"),wY=2,kY=function(){function t(t){this.view=t,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return t.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},t.prototype.handleMousedown=function(t){var e=fY(t.target,this.view.dom);if(t.button!==wY){if(e){var n=this.getCellPos(t);n&&(this.startCellPos=n),this.bindEvent()}}else t.preventDefault()},t.prototype.handleMousemove=function(t){var e,n=bY.getState(this.view.state),r=this.getCellPos(t),o=this.startCellPos;n?e=this.view.state.doc.resolve(n):o!==r&&(e=o),e&&o&&r&&this.setCellSelection(o,r)},t.prototype.handleMouseup=function(){this.startCellPos=null,this.unbindEvent(),null!==bY.getState(this.view.state)&&this.view.dispatch(this.view.state.tr.setMeta(bY,-1))},t.prototype.bindEvent=function(){var t=this.view.dom;t.addEventListener("mousemove",this.handlers.mousemove),t.addEventListener("mouseup",this.handlers.mouseup)},t.prototype.unbindEvent=function(){var t=this.view.dom;t.removeEventListener("mousemove",this.handlers.mousemove),t.removeEventListener("mouseup",this.handlers.mouseup)},t.prototype.getCellPos=function(t){var e=t.clientX,n=t.clientY,r=this.view.posAtCoords({left:e,top:n});if(r){var o=this.view.state.doc,i=o.resolve(r.pos),a=hY(i);if(a){var s=i.before(a.depth);return o.resolve(s)}}return null},t.prototype.setCellSelection=function(t,e){var n=this.view.state,r=n.selection,o=n.tr,i=null===bY.getState(this.view.state),a=new lY(t,e);if(i||!r.eq(a)){var s=o.setSelection(a);i&&s.setMeta(bY,e.pos),this.view.dispatch(s)}},t.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},t}(),xY=vn("cell-selected");function CY(t){var e=t.selection,n=t.doc;if(e instanceof lY){var r=[],i=e.ranges;return i.forEach((function(t){var e=t.$from,n=t.$to;r.push(o["a"].node(e.pos-1,n.pos+1,{class:xY}))})),o["b"].create(n,r)}return null}function MY(){return new a["d"]({key:bY,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(bY);if(n)return-1===n?null:n;if(ct(e)||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:CY,createSelectionBetween:function(t){var e=t.state;return ct(bY.getState(e))?null:e.selection}},view:function(t){return new kY(t)}})}var TY=function(){function t(){this.keys=[],this.values=[]}return t.prototype.getKeyIndex=function(t){return j(t,this.keys)},t.prototype.get=function(t){return this.values[this.getKeyIndex(t)]},t.prototype.set=function(t,e){var n=this.getKeyIndex(t);return n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e)),this},t.prototype.has=function(t){return this.getKeyIndex(t)>-1},t.prototype.delete=function(t){var e=this.getKeyIndex(t);return e>-1&&(this.keys.splice(e,1),this.values.splice(e,1),!0)},t.prototype.forEach=function(t,e){var n=this;void 0===e&&(e=this),this.values.forEach((function(r,o){r&&n.keys[o]&&t.call(e,r,n.keys[o],n)}))},t.prototype.clear=function(){this.keys=[],this.values=[]},t}(),SY="en-US",OY=function(){function t(){this.code=SY,this.langs=new TY}return t.prototype.setCode=function(t){this.code=t||SY},t.prototype.setLanguage=function(t,e){var n=this;t=[].concat(t),t.forEach((function(t){if(n.langs.has(t)){var r=n.langs.get(t);n.langs.set(t,b(r,e))}else n.langs.set(t,e)}))},t.prototype.get=function(t,e){e||(e=this.code);var n=this.langs.get(e);n||(n=this.langs.get(SY));var r=n[t];if(!r)throw new Error('There is no text key "'+t+'" in '+e);return r},t}(),EY=new OY,NY=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function DY(t,e){return NY.map((function(n){return n.map((function(n){var r=n.action,o=n.command,i=n.payload,a=n.disableInThead,s=n.className;return{label:EY.get(r),onClick:function(){t.emit("command",o,i)},disabled:e&&!!a,className:s}}))})).concat()}function LY(t){return new a["d"]({props:{handleDOMEvents:{contextmenu:function(e,n){var r=fY(n.target,e.dom);if(r){n.preventDefault();var o=n,i=o.clientX,a=o.clientY,s=e.dom.parentNode.getBoundingClientRect(),c=s.left,l=s.top,u="TH"===r.nodeName;return t.emit("contextmenu",{pos:{left:i-c+10+"px",top:a-l+30+"px"},menuGroups:DY(t,u),tableCell:r}),!0}return!1}}}})}function IY(){return new a["d"]({props:{handleDOMEvents:{mousedown:function(t,e){var n=e,r=n.clientX,o=n.clientY,i=t.posAtCoords({left:r,top:o});if(i){var a=t.state,s=a.doc,c=a.tr,l=s.resolve(i.pos),u=AQ(l),p=e.target,d=getComputedStyle(p,":before"),h=e,m=h.offsetX,v=h.offsetY;if(!u||!hn(d,m,v))return!1;e.preventDefault();var g=l.before(u.depth),y=u.node.attrs;return c.setNodeMarkup(g,null,f(f({},y),{checked:!y.checked})),t.dispatch(c),!0}return!1}}}})}var AY=["image","link","customBlock","frontMatter"],RY=["strong","strike","emph","code"],PY=["bulletList","orderedList","taskList"];function BY(t,e){var n=t.type.name;return"listItem"===n?t.attrs.task?"taskList":e.type.name:-1!==n.indexOf("table")?"table":n}function jY(t,e){e[t]=!0,PY.filter((function(e){return e!==t})).forEach((function(t){e[t]&&delete e[t]}))}function FY(t,e,n){var r={};return RY.forEach((function(o){var i=n.marks[o],a=t.marksAcross(e)||[],s=!!i.isInSet(a);s&&(r[o]=!0)})),r}function HY(t,e,n){var r=t.$from,o=t.$to,i=t.from,a=t.to,s={},c={};return e.nodesBetween(i,a,(function(t,e,i){var a=BY(t,i);Mt(AY,a)||(Mt(PY,a)?jY(a,s):"paragraph"===a||"text"===a?c=FY(r,o,n):s[a]=!0)})),f(f({},s),c)}function zY(t){return new a["d"]({view:function(){return{update:function(e){var n=e.state,r=n.selection,o=n.doc,i=n.schema;t.emit("changeToolbarState",{toolbarState:HY(r,o,i)})}}}})}var VY=function(){function t(t,e,n,r){var i=this;this.openEditor=function(){if(i.innerEditorView)throw new Error("The editor is already opened.");i.wrapper.style.display="none",i.innerViewContainer.style.display="block",i.innerEditorView=new o["c"](i.innerViewContainer,{state:a["b"].create({doc:i.node,plugins:[Object(s["a"])({"Mod-z":function(){return Object(u["c"])(i.innerEditorView.state,i.innerEditorView.dispatch)},"Shift-Mod-z":function(){return Object(u["b"])(i.innerEditorView.state,i.innerEditorView.dispatch)},Tab:function(t,e){return e(t.tr.insertText("\t")),!0},Enter:c["f"],Escape:function(){return i.cancelEditing(),!0},"Ctrl-Enter":function(){return i.saveAndFinishEditing(),!0}}),Object(u["a"])()]}),dispatchTransaction:function(t){return i.dispatchInner(t)},handleDOMEvents:{mousedown:function(){return i.editorView.hasFocus()&&i.innerEditorView.focus(),!0},blur:function(){return i.saveAndFinishEditing(),!0}}}),i.innerEditorView.focus()},this.node=t,this.editorView=e,this.getPos=n,this.toDOMAdaptor=r,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=vn("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=vn("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return t.prototype.renderToolArea=function(){var t=this,e=document.createElement("div"),n=document.createElement("span"),r=document.createElement("button");e.className="tool",n.textContent=this.node.attrs.info,n.className="info",r.type="button",r.addEventListener("click",(function(){return t.openEditor()})),e.appendChild(n),e.appendChild(r),this.wrapper.appendChild(e)},t.prototype.renderCustomBlock=function(){var t=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(t){var e=t(this.node);while(this.wrapper.hasChildNodes())this.wrapper.removeChild(this.wrapper.lastChild);e&&this.wrapper.appendChild(e),this.renderToolArea()}},t.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=vn("custom-block-editor"),this.innerViewContainer.style.display="none"},t.prototype.closeEditor=function(){this.innerEditorView&&(this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none"),this.wrapper.style.display="block"},t.prototype.saveAndFinishEditing=function(){var t=this.editorView.state.selection.to,e=this.editorView.state;this.editorView.dispatch(e.tr.setSelection($t(e.tr,t))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},t.prototype.cancelEditing=function(){var t=Object(u["d"])(this.innerEditorView.state);this.canceled=!0;while(t--)Object(u["c"])(this.innerEditorView.state,this.innerEditorView.dispatch),Object(u["c"])(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var e=this.editorView.state.selection.to,n=this.editorView.state;this.editorView.dispatch(n.tr.setSelection(a["h"].create(n.doc,e))),this.editorView.focus(),this.closeEditor()},t.prototype.dispatchInner=function(t){var e=this.innerEditorView.state.applyTransaction(t),n=e.state,r=e.transactions;if(this.innerEditorView.updateState(n),!this.canceled&&qe(this.getPos)){for(var o=this.editorView.state.tr,a=i["d"].offset(this.getPos()+1),s=0;s<r.length;s+=1)for(var c=r[s].steps,l=0;l<c.length;l+=1)o.step(c[l].map(a));o.docChanged&&this.editorView.dispatch(o)}},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,this.innerEditorView||this.renderCustomBlock(),!0)},t.prototype.stopEvent=function(t){return!!this.innerEditorView&&!!t.target&&this.innerEditorView.dom.contains(t.target)},t.prototype.ignoreMutation=function(){return!0},t.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},t}(),qY="image-link",_Y=function(){function t(t,e,n,r){var o,i=this;this.handleMousedown=function(t){t.preventDefault();var e=t.target,n=t.offsetX,r=t.offsetY;if(i.imageLink&&qe(i.getPos)&&Ke(e,qY)){var o=getComputedStyle(e,":before");if(t.stopPropagation(),hn(o,n,r)){var a=i.view.state.tr,s=i.getPos();a.setSelection($t(a,s,s+1)),i.view.dispatch(a),i.eventEmitter.emit("openPopup","link",i.imageLink.attrs)}}},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.imageLink=null!==(o=t.marks.filter((function(t){var e=t.type;return"link"===e.name}))[0])&&void 0!==o?o:null,this.dom=this.createElement(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.createImageElement(this.node);if(this.imageLink){var e=document.createElement("span");return e.className=qY,e.appendChild(t),e}return t},t.prototype.createImageElement=function(t){var e=document.createElement("img"),n=t.attrs,r=n.imageUrl,o=n.altText,i=FQ(t.attrs);return e.src=r,o&&(e.alt=o),Ln(i,e),e},t.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)},t.prototype.stopEvent=function(){return!0},t.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)},t}(),$Y="toastui-editor-ww-code-block",UY="toastui-editor-ww-code-block-language",WY=function(){function t(t,e,n,r){var o=this;this.dom=null,this.contentDOM=null,this.input=null,this.handleMousedown=function(t){var e=t.target,n=getComputedStyle(e,":after");if("none"!==n.backgroundImage&&qe(o.getPos)){var r=o.view.coordsAtPos(o.getPos()),i=r.top,a=r.right;o.createLanguageEditor({top:i,right:a})}},this.handleKeydown=function(t){"Enter"===t.key&&o.input&&(t.preventDefault(),o.changeLanguage())},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=r,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return t.prototype.createElement=function(){var t=this.node.attrs.language,e=document.createElement("div");e.setAttribute("data-language",t||"text"),e.className=$Y;var n=this.createCodeBlockElement(),r=n.firstChild;e.appendChild(n),this.dom=e,this.contentDOM=r},t.prototype.createCodeBlockElement=function(){var t=document.createElement("pre"),e=document.createElement("code"),n=this.node.attrs.language,r=FQ(this.node.attrs);return n&&e.setAttribute("data-language",n),Ln(r,t),t.appendChild(e),t},t.prototype.createLanguageEditor=function(t){var e=this,n=t.top,r=t.right,o=document.createElement("span");o.className=UY;var i=document.createElement("input");i.type="text",i.value=this.node.attrs.language,o.appendChild(i),document.querySelector(".toastui-editor.ww-mode").appendChild(o);var a=o.clientWidth;R(o,{top:n+10+"px",left:r-a-10+"px",width:a+"px"}),this.input=i,this.input.addEventListener("blur",(function(){return e.changeLanguage()})),this.input.addEventListener("keydown",this.handleKeydown),setTimeout((function(){return e.input.focus()}))},t.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)},t.prototype.bindEvent=function(){var t=this;this.eventEmitter.listen("scroll",(function(){t.input&&t.reset()}))},t.prototype.changeLanguage=function(){if(this.input&&qe(this.getPos)){var t=this.input.value;this.reset();var e=this.getPos(),n=this.view.state.tr;n.setNodeMarkup(e,null,{language:t}),this.view.dispatch(n)}},t.prototype.reset=function(){var t;if(null===(t=this.input)||void 0===t?void 0:t.parentElement){var e=this.input.parentElement;this.input=null,Cn(e)}},t.prototype.stopEvent=function(){return!0},t.prototype.update=function(t){return!!t.sameMarkup(this.node)&&(this.node=t,!0)},t.prototype.destroy=function(){this.reset(),this.dom&&this.dom.removeEventListener("click",this.handleMousedown)},t}(),JY=/MsoListParagraph/,KY=/style=(.|\n)*mso-/,GY=/mso-list:(.*)/,XY=/O:P/,ZY=/^(n|u|l)/,QY="p.MsoListParagraph";function YY(t){return KY.test(t)}function t0(t){var e=[],n=document.createTreeWalker(t,1,null,!1);while(n.nextNode()){var r=n.currentNode;if(bn(r)){var o=r,i=o.outerHTML,a=o.textContent,s=KY.test(i),c=GY.test(i);s&&!c&&a?e.push([r,!0]):(XY.test(r.nodeName)||s&&!a||c)&&e.push([r,!1])}}return e.forEach((function(t){var e=t[0],n=t[1];n?Mn(e):Cn(e)})),t.innerHTML.trim()}function e0(t,e){var n=t.getAttribute("style");if(n){var r=n.match(GY),o=r[1],i=o.trim().split(" "),a=i[1],s=parseInt(a.replace("level",""),10),c=ZY.test(t.textContent||"");return{id:e,level:s,prev:null,parent:null,children:[],unordered:c,contents:t0(t)}}return null}function n0(t,e){if(e.level<t.level)e.children.push(t),t.parent=e;else{while(e){if(e.level===t.level)break;e=e.parent}e&&(t.prev=e,t.parent=e.parent,t.parent&&t.parent.children.push(t))}}function r0(t){var e=[];return t.forEach((function(t,n){var r=e[n-1],o=e0(t,n);o&&(r&&n0(o,r),e.push(o))})),e}function o0(t){var e=t[0].unordered?"ul":"ol",n=document.createElement(e);return t.forEach((function(t){var e=t.children,r=t.contents,o=document.createElement("li");o.innerHTML=r,n.appendChild(o),e.length&&n.appendChild(o0(e))})),n}function i0(t){var e=r0(t),n=e.filter((function(t){var e=t.parent;return!e}));return o0(n)}function a0(t){while(t){if(bn(t))break;t=t.nextSibling}return!t||!JY.test(t.className)}function s0(t){var e=document.createElement("div");e.innerHTML=t;var n=[],r=wn(e,QY);r.forEach((function(t){var r=a0(t.nextSibling);if(n.push(t),r){var o=i0(n),i=t.nextSibling;i?xn(o,i):kn(e,o),n=[]}Cn(t)}));var o=r.length?"<p></p>":"";return""+o+e.innerHTML}var c0="\x3c!--StartFragment--\x3e",l0="\x3c!--EndFragment--\x3e";function u0(t){var e=t.indexOf(c0),n=t.lastIndexOf(l0);return e>-1&&n>-1&&(t=t.slice(e+c0.length,n)),t}function p0(t){return/<\/td>((?!<\/tr>)[\s\S])*$/i.test(t)&&(t="<tr>"+t+"</tr>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(t)&&(t="<table>"+t+"</table>"),t}function d0(t){return t=u0(t),t=p0(t),YY(t)&&(t=s0(t)),t}function f0(t){var e=t.reduce((function(t,e){return t.childCount>e.childCount?t:e}));return e.childCount}function h0(t,e,n){for(var r=[],o=t.childCount,i=0;i<o;i+=1)if(!t.child(i).attrs.extended){var a=i<o?n.create(t.child(i).attrs,t.child(i).content):n.createAndFill();r.push(a)}return r}function m0(t,e,n){var r=n.nodes,o=r.tableRow,i=r.tableHeadCell,a=h0(t,e,i);return o.create(null,a)}function v0(t,e,n){var r=n.nodes,o=r.tableRow,i=r.tableBodyCell,a=h0(t,e,i);return o.create(null,a)}function g0(t,e){for(var n=e.nodes,r=n.tableRow,o=n.tableBodyCell,i=[],a=0;a<t;a+=1){var s=o.createAndFill();i.push(s)}return r.create({dummyRowForPasting:!0},i)}function y0(t){var e=[],n=[];if("tableHead"===t.firstChild.type.name){var r=t.firstChild;r.forEach((function(t){return e.push(t)}))}if("tableBody"===t.lastChild.type.name){var o=t.lastChild;o.forEach((function(t){return n.push(t)}))}return h(h([],e),n)}function b0(t,e,n){var r=m0(t,e,n);return n.nodes.tableHead.create(null,r)}function w0(t,e,n){var r=t.map((function(t){return v0(t,e,n)}));if(!t.length){var o=g0(e,n);r.push(o)}return n.nodes.tableBody.create(null,r)}function k0(t,e,n){var r=f0(t);if(n)return e.nodes.table.create(null,[w0(t,r,e)]);var o=t[0],i=t.slice(1),a=[b0(o,r,e)];return i.length&&a.push(w0(i,r,e)),e.nodes.table.create(null,a)}function x0(t,e){var n=[];return t.content.forEach((function(t){if("table"===t.type.name){var o=vY(new r["j"](r["c"].from(t),0,0));if(o){var i=y0(o),a="tableBody"===o.firstChild.type.name,s=k0(i,e,a);n.push(s)}}else n.push(t)})),new r["j"](r["c"].from(n),0,0)}var C0=4,M0=2;function T0(t){return t*C0}function S0(t,e,n){var r=[],o=y0(t),i=o[0].childCount,a=o.length,s=0===e.startRowIdx,c=o.slice(0,a);if(s){var l=c.shift();if(l){var u=m0(l,i,n).content;r.push(u)}}return c.forEach((function(t){if(!t.attrs.dummyRowForPasting){var e=v0(t,i,n).content;r.push(e)}})),r}function O0(t,e,n){for(var r=e.startRowIdx,o=e.startColIdx,i=n.length,a=0,s=function(t){var e=n[t].childCount;n[t].forEach((function(t){var n=t.attrs,r=n.colspan;r>1&&(e+=r-1)})),a=Math.max(a,e)},c=0;c<i;c+=1)s(c);var l=r+i-1,u=o+a-1,p=Math.max(l+1-t.totalRowCount,0),d=Math.max(u+1-t.totalColumnCount,0);return{startRowIdx:r,startColIdx:o,endRowIdx:l,endColIdx:u,addedRowCount:p,addedColumnCount:d}}function E0(t,e){for(var n=t.startRowIdx,r=t.startColIdx,o=t.endRowIdx,i=t.endColIdx,a=t.addedRowCount,s=t.addedColumnCount,c=n;c<=o-a;c+=1)e.push({rowIdx:c,startColIdx:r,endColIdx:i-s})}function N0(t,e,n,r,o){for(var i=r.startRowIdx,a=r.startColIdx,s=r.endRowIdx,c=r.endColIdx,l=r.addedRowCount,u=r.addedColumnCount,p=n.totalRowCount,d=0,f=0;f<p;f+=1){var h=n.getCellInfo(f,c-u),m=h.offset,v=h.nodeSize,g=t.mapping.map(m+v),y=dY(u,f,e);if(t.insert(g,y),f>=i&&f<=s-l){var b=n.getCellInfo(f,c-u),w=t.mapping.map(b.offset),k=g+T0(u);o[d]={rowIdx:f,startColIdx:a,endColIdx:c,dummyOffsets:[w,k]},d+=1}}}function D0(t,e,n,r,o){var i=r.addedRowCount,a=r.addedColumnCount,s=r.startColIdx,c=r.endColIdx,l=t.mapping.maps.length,u=n.tableEndOffset-2,p=pY(i,n.totalColumnCount+a,e),d=u;t.insert(t.mapping.slice(l).map(d),p);for(var f=0;f<i;f+=1){var h=d+T0(s)+1,m=d+T0(c+1)+1,v=d+T0(n.totalColumnCount+a)+M0;o.push({rowIdx:f+n.totalRowCount,startColIdx:s,endColIdx:c,dummyOffsets:[h,m]}),d=v}}function L0(t,e,n,o){var i=t.mapping.maps.length;n.forEach((function(n,a){var s=n.rowIdx,c=n.startColIdx,l=n.endColIdx,u=n.dummyOffsets,p=t.mapping.slice(i),d=new r["j"](e[a],0,0),f=u?u[0]:o.getCellStartOffset(s,c),h=u?u[1]:o.getCellEndOffset(s,l);t.replace(p.map(f),p.map(h),d)}))}function I0(t,e){var n=t.state,r=n.selection,o=n.schema,i=n.tr,a=mY(r),s=a.anchor,c=a.head;if(s&&c){var l=vY(e);if(!l)return!1;var u=oY.create(s),p=u.getRectOffsets(s,c),d=S0(l,p,o),f=O0(u,p,d),h=[];return R0(u,f)&&(E0(f,h),f.addedColumnCount&&N0(i,o,u,f,h),f.addedRowCount&&D0(i,o,u,f,h),L0(i,d,h,u),t.dispatch(i),A0(t,h,u.getCellInfo(0,0).offset)),!0}return!1}function A0(t,e,n){var r=t.state,o=r.tr,i=r.doc,a=oY.create(i.resolve(n)),s=e[0],c=s.rowIdx,l=s.startColIdx,u=Rt(e),p=u.rowIdx,d=u.endColIdx,f=a.getCellInfo(c,l).offset,h=a.getCellInfo(p,d).offset;t.dispatch(o.setSelection(new lY(i.resolve(f),i.resolve(h))))}function R0(t,e){var n=t.getSpannedOffsets(e),r=gY(n),o=r.rowCount,i=r.columnCount,a=gY(e),s=a.rowCount,c=a.columnCount;return o===s&&i===c}var P0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),e}(Be),B0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:f({},jQ()),parseDOM:[{tag:"p"}],toDOM:function(t){var e=t.attrs;return["p",FQ(e),0]}}},enumerable:!1,configurable:!0}),e}(Be),j0=/\s{1,4}$/,F0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),e.prototype.addSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,o=n.$from,i=n.$to,a=o.blockRange(i);return!(!a||LQ(o)||IQ(o))&&(e(r.insertText("    ",o.pos,i.pos)),!0)}},e.prototype.removeSpaces=function(){return function(t,e){var n=t.selection,r=t.tr,o=n.$from,i=n.$to,a=n.from,s=o.blockRange(i);if(s&&!LQ(o)&&!IQ(o)){var c=o.nodeBefore;if(c&&c.isText){var l=c.text,u=l.replace(j0,""),p=l.length-u.length;return e(r.delete(a-p,a)),!0}}return!1}},e.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},e}(Be),H0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this.levels.map((function(t){return{tag:"h"+t,getAttrs:function(e){var n=e.getAttribute("data-raw-html");return f({level:t},n&&{rawHTML:n})}}}));return{attrs:f({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},jQ()),content:"inline*",group:"block",defining:!0,parseDOM:t,toDOM:function(t){var e=t.attrs;return["h"+e.level,FQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){return Object(c["h"])(e.schema.nodes.heading,t)(e,n)}}},e}(Be),z0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:f({language:{default:null},rawHTML:{default:null}},jQ()),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){var e=t.getAttribute("data-raw-html"),n=t.firstElementChild;return f({language:(null===n||void 0===n?void 0:n.getAttribute("data-language"))||null},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"pre",["code",f({"data-language":e.language},FQ(e)),0]]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(c["h"])(t.schema.nodes.codeBlock)(t,e)}}},e.prototype.moveCursor=function(t){var e=this;return function(n,r){var o=n.tr,i=n.doc,a=n.schema,s=n.selection.$from,c=e.context.view;if(c.endOfTextblock(t)&&"codeBlock"===s.node().type.name){var l=s.parent.textContent.split("\n"),u="up"===t?s.start():s.end(),p="up"===t?[u,l[0].length+u]:[u-Rt(l).length,u],d=i.resolve("up"===t?s.before():s.after()),f="up"===t?d.nodeBefore:d.nodeAfter;if(Pt(s.pos,p[0],p[1])&&!f){var h=Ut(o,d,a);if(h)return r(h),!0}}return!1}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-p":t,"Shift-Mod-P":t,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},e}(Be),V0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:f({rawHTML:{default:null}},jQ()),parseDOM:[RQ("ul")],toDOM:function(t){var e=t.attrs;return["ul",FQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.changeList=function(){return function(t,e){return JQ(t.schema.nodes.bulletList)(t,e)}},e.prototype.commands=function(){return{bulletList:this.changeList,taskList:KQ}},e.prototype.keymaps=function(){var t=this.changeList(),e=nY(),n=e.indent,r=e.outdent;return{"Mod-u":t,"Mod-U":t,Tab:n(),"Shift-Tab":r()}},e}(Be),q0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:f({order:{default:1},rawHTML:{default:null}},jQ()),parseDOM:[{tag:"ol",getAttrs:function(t){var e=t.getAttribute("start"),n=t.getAttribute("data-raw-html");return f({order:t.hasAttribute("start")?Number(e):1},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"ol",f({start:1===e.order?null:e.order},FQ(e)),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return JQ(t.schema.nodes.orderedList)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()(),e=nY(),n=e.indent,r=e.outdent;return{"Mod-o":t,"Mod-O":t,Tab:n(),"Shift-Tab":r()}},e}(Be),_0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({task:t.hasAttribute("data-task"),checked:t.hasAttribute("data-task-checked")},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs,n=e.task,r=e.checked;if(!n)return[e.rawHTML||"li",0];var o=["task-list-item"];return r&&o.push("checked"),[e.rawHTML||"li",f({class:o.join(" "),"data-task":n},r&&{"data-task-checked":r}),0]}}},enumerable:!1,configurable:!0}),e.prototype.liftToPrevListItem=function(){return function(t,e){var n=t.selection,r=t.tr,o=t.schema,i=n.$from,a=n.empty,s=o.nodes.listItem,c=i.parent,l=i.node(-1);if(a&&!c.childCount&&l.type===s){if(i.index(-2)>=1)return r.delete(i.start(-1)-1,i.end(-1)),e(r),!0;var u=i.node(-3);if(u.type===s)return r.delete(i.start(-2)-1,i.end(-1)),e(r),!0}return!1}},e.prototype.keymaps=function(){var t=function(t,e){return YQ(t.schema.nodes.listItem)(t,e)};return{Backspace:this.liftToPrevListItem(),Enter:t}},e}(Be),$0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},jQ()),content:"block+",group:"block",parseDOM:[RQ("blockquote")],toDOM:function(t){var e=t.attrs;return["blockquote",FQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(c["j"])(t.schema.nodes.blockQuote)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Alt-q":t,"Alt-Q":t}},e}(Be),U0={left:e1,right:t1,up:n1,down:r1};function W0(t,e,n){var r=n[0],o=n[1],i=e.resolve(t.before(r-1));return o===r&&!i.nodeBefore}function J0(t){var e,n,r=t.depth;while(r){if(n=t.node(r),"tableBodyCell"===n.type.name)break;if("listItem"===n.type.name){var o=t.node(r-1),i=o.lastChild===n,a="paragraph"!==(null===(e=n.lastChild)||void 0===e?void 0:e.type.name);return!!i&&!a}r-=1}return!1}function K0(t,e,n,r,o){var i=e[0],a=e[1],s=e[2];if("left"===t||"up"===t){if(o&&!W0(n,r,[i,a]))return!1;var c=n.before(s),l=r.resolve(c).nodeBefore;if(l)return!1}return!0}function G0(t,e,n,r,o){if("right"===t||"down"===t){if(o&&!J0(n))return!1;var i=n.after(e),a=r.resolve(i).nodeAfter;if(a)return!1}return!0}function X0(t,e,n,r){var o=e[0],i=e[1],a=o+3,s=i>=a,c=s?o+1:i,l=K0(t,[i,a,c],n,r,s),u=G0(t,c,n,r,s);return l&&u}function Z0(t,e,n){var r=n[0],o=n[1],i=e.getRowspanStartInfo(r,o),a="up"===t&&0===r,s="down"===t&&((null===i||void 0===i?void 0:i.count)>1?r+i.count-1:r)===e.totalRowCount-1;return a||s}function Q0(t,e,n){var r=t.doc.resolve(e.tableStartOffset-1);return r.nodeBefore?t.setSelection(a["f"].near(r,-1)):Ut(t,r,n)}function Y0(t,e,n){var r=t.doc.resolve(e.tableEndOffset);return r.nodeAfter?t.setSelection(a["f"].near(r,1)):Ut(t,r,n)}function t1(t,e){var n=t[0],r=t[1],o=e.totalRowCount,i=e.totalColumnCount,a=r===i-1,s=n===o-1&&a;if(!s){var c=r+1,l=e.getColspanStartInfo(n,r);(null===l||void 0===l?void 0:l.count)>1&&(c+=l.count-1),(a||c===i)&&(n+=1,c=0);var u=e.getCellInfo(n,c).offset;return u+2}return null}function e1(t,e){var n=t[0],r=t[1],o=e.totalColumnCount,i=0===r,a=0===n&&i;if(!a){r-=1,i&&(n-=1,r=o-1);var s=e.getCellInfo(n,r),c=s.offset,l=s.nodeSize;return c+l-2}return null}function n1(t,e){var n=t[0],r=t[1];if(n>0){var o=e.getCellInfo(n-1,r),i=o.offset,a=o.nodeSize;return i+a-2}return null}function r1(t,e){var n=t[0],r=t[1],o=e.totalRowCount;if(n<o-1){var i=n+1,a=e.getRowspanStartInfo(n,r);(null===a||void 0===a?void 0:a.count)>1&&(i+=a.count-1);var s=e.getCellInfo(i,r).offset;return s+2}return null}function o1(t,e,n,r){var o=U0[t],i=o(n,r);if(i){var s="right"===t||"down"===t?1:-1;return e.setSelection(a["f"].near(e.doc.resolve(i),s))}return null}function i1(t,e,n){var r=n[0],o=n[1];if("up"===t||"down"===t)return!1;var i=e.tableStartOffset,a=e.tableEndOffset,s=e.getCellInfo(r,o),c=s.offset,l=s.nodeSize,u="left"===t?i:a,p="left"===t?c-2:c+l+3;return u===p}function a1(t,e,n){var r=t.doc.resolve(e.before(n-3));return t.setSelection(new a["c"](r))}function s1(t,e,n){var r,o,i;return"up"===t?(r=n.startRowIdx,o=0,i=-1):(r=n.endRowIdx,o=e.totalColumnCount-1,i=e.getCellInfo(r,o).nodeSize+1),{targetRowIdx:r,insertColIdx:o,nodeSize:i}}function c1(t,e,n){var r=t.getCellInfo(e,0).offset,o=t.getCellInfo(e,n-1),i=o.offset,a=o.nodeSize;return{from:r,to:i+a}}var l1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:f({rawHTML:{default:null}},jQ()),parseDOM:[RQ("table")],toDOM:function(t){var e=t.attrs;return["table",FQ(e),0]}}},enumerable:!1,configurable:!0}),e.prototype.addTable=function(){return function(t){return void 0===t&&(t={rowCount:2,columnCount:1,data:[]}),function(e,n){var r=t.rowCount,o=t.columnCount,i=t.data,a=e.schema,s=e.selection,c=e.tr,l=s.from,u=s.to,p=s.$from,d=l===u;if(d&&!IQ(p)){var f=a.nodes,h=f.tableHead,m=f.tableBody,v=null===i||void 0===i?void 0:i.slice(0,o),g=null===i||void 0===i?void 0:i.slice(o,i.length),y=uY(o,a,v),b=pY(r-1,o,a,g),w=a.nodes.table.create(null,[h.create(null,y),m.create(null,b)]);return n(c.replaceSelectionWith(w)),!0}return!1}}},e.prototype.removeTable=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=oY.create(n.$anchor);if(o){var i=o.tableStartOffset,a=o.tableEndOffset,s=i-1,c=$t(r.delete(s,a),s);return e(r.setSelection(c)),!0}return!1}}},e.prototype.addColumn=function(t){return function(){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=mY(r),s=a.anchor,c=a.head;if(s&&c){for(var l=oY.create(s),u=l.getRectOffsets(s,c),p="left"===t?u.startColIdx:u.endColIdx+1,d=gY(u).columnCount,f=l.totalRowCount,h=0;h<f;h+=1){var m=dY(d,h,i);o.insert(o.mapping.map(l.posAt(h,p)),m)}return n(o),!0}return!1}}},e.prototype.removeColumn=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=mY(n),i=o.anchor,a=o.head;if(i&&a){var s=oY.create(i),c=s.getRectOffsets(i,a),l=s.totalColumnCount,u=s.totalRowCount,p=gY(c).columnCount,d=p===l;if(d)return!1;for(var f=c.startColIdx,h=c.endColIdx,m=r.mapping.maps.length,v=0;v<u;v+=1)for(var g=h;g>=f;g-=1){var y=s.getCellInfo(v,g),b=y.offset,w=y.nodeSize,k=r.mapping.slice(m).map(b),x=k+w;r.delete(k,x)}return e(r),!0}return!1}}},e.prototype.addRow=function(t){return function(){return function(e,n){var r=e.selection,o=e.schema,i=e.tr,a=mY(r),s=a.anchor,c=a.head;if(s&&c){var l=oY.create(s),u=l.totalColumnCount,p=l.getRectOffsets(s,c),d=gY(p).rowCount,f=s1(t,l,p),h=f.targetRowIdx,m=f.insertColIdx,v=f.nodeSize,g=0===h;if(!g){for(var y=[],b=i.mapping.map(l.posAt(h,m))+v,w=[],k=0;k<u;k+=1)w=w.concat(dY(1,h,o));for(var x=0;x<d;x+=1)y.push(o.nodes.tableRow.create(null,w));return n(i.insert(b,y)),!0}}return!1}}},e.prototype.removeRow=function(){return function(){return function(t,e){var n=t.selection,r=t.tr,o=mY(n),i=o.anchor,a=o.head;if(i&&a){var s=oY.create(i),c=s.totalRowCount,l=s.totalColumnCount,u=s.getRectOffsets(i,a),p=gY(u).rowCount,d=u.startRowIdx,f=u.endRowIdx,h=0===d,m=p===c-1;if(m||h)return!1;for(var v=f;v>=d;v-=1){var g=c1(s,v,l),y=g.from,b=g.to;r.delete(y-1,b+1)}return e(r),!0}return!1}}},e.prototype.alignColumn=function(){return function(t){return void 0===t&&(t={align:"center"}),function(e,n){var r=t.align,o=e.selection,i=e.tr,a=mY(o),s=a.anchor,c=a.head;if(s&&c){for(var l=oY.create(s),u=l.totalRowCount,p=l.getRectOffsets(s,c),d=p.startColIdx,f=p.endColIdx,h=0;h<u;h+=1)for(var m=d;m<=f;m+=1)if(!l.extendedRowspan(h,m)&&!l.extendedColspan(h,m)){var v=l.getNodeAndPos(h,m),g=v.node,y=v.pos,b=yY(g,{align:r});i.setNodeMarkup(y,null,b)}return n(i),!0}return!1}}},e.prototype.moveToCell=function(t){return function(e,n){var r=e.selection,o=e.tr,i=e.schema,a=mY(r),s=a.anchor,c=a.head;if(s&&c){var l=oY.create(s),u=l.getCellIndex(s),p=void 0;if(p=Z0(t,l,u)?Y0(o,l,i):o1(t,o,u,l),p)return n(p),!0}return!1}},e.prototype.moveInCell=function(t){var e=this;return function(n,r){var o=n.selection,i=n.tr,a=n.doc,s=n.schema,c=o.$from,l=e.context.view;if(!l.endOfTextblock(t))return!1;var u=DQ(c,(function(t){var e=t.type;return"tableHeadCell"===e.name||"tableBodyCell"===e.name}));if(u){var p=DQ(c,(function(t){var e=t.type;return"paragraph"===e.name})),d=u.depth;if(p&&X0(t,[d,p.depth],c,a)){var f=mY(o).anchor,h=oY.create(f),m=h.getCellIndex(f),v=void 0;if(i1(t,h,m)?v=a1(i,c,d):Z0(t,h,m)?"up"===t?v=Q0(i,h,s):"down"===t&&(v=Y0(i,h,s)):v=o1(t,i,m,h),v)return r(v),!0}}return!1}},e.prototype.deleteCells=function(){return function(t,e){var n=t.schema,r=t.selection,o=t.tr,i=mY(r),s=i.anchor,c=i.head,l=r instanceof a["h"];if(s&&c&&!l){for(var u=oY.create(s),p=u.getRectOffsets(s,c),d=p.startRowIdx,f=p.startColIdx,h=p.endRowIdx,m=p.endColIdx,v=d;v<=h;v+=1)for(var g=f;g<=m;g+=1)if(!u.extendedRowspan(v,g)&&!u.extendedColspan(v,g)){var y=u.getNodeAndPos(v,g),b=y.node,w=y.pos,k=dY(1,v,n,b.attrs);o.replaceWith(o.mapping.map(w),o.mapping.map(w+b.nodeSize),k)}return e(o),!0}return!1}},e.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},e.prototype.keymaps=function(){var t=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:t,"Mod-Backspace":t,Delete:t,"Mod-Delete":t}},e}(Be),u1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:f({rawHTML:{default:null}},jQ()),parseDOM:[RQ("thead")],toDOM:function(t){var e=t.attrs;return["thead",FQ(e),0]}}},enumerable:!1,configurable:!0}),e}(Be),p1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:f({rawHTML:{default:null}},jQ()),parseDOM:[{tag:"tbody",getAttrs:function(t){var e=t.querySelectorAll("tr"),n=e[0].children.length,r=t.getAttribute("data-raw-html");return!!n&&f({},r&&{rawHTML:r})}}],toDOM:function(t){var e=t.attrs;return["tbody",FQ(e),0]}}},enumerable:!1,configurable:!0}),e}(Be),d1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:f({rawHTML:{default:null}},jQ()),parseDOM:[{tag:"tr",getAttrs:function(t){var e=t.children.length,n=t.getAttribute("data-raw-html");return!!e&&f({},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return["tr",FQ(e),0]}}},enumerable:!1,configurable:!0}),e}(Be),f1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:f({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},jQ()),isolating:!0,parseDOM:[BQ("th")],toDOM:function(t){var e=t.attrs,n=PQ(e);return["th",f(f({},n),FQ(e)),0]}}},enumerable:!1,configurable:!0}),e}(Be),h1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[BQ("td")],toDOM:function(t){var e=t.attrs,n=PQ(e);return["td",n,0]}}},enumerable:!1,configurable:!0}),e}(Be),m1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{inline:!0,attrs:f({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},jQ()),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(t){var e=t.getAttribute("src")||"",n=t.getAttribute("data-raw-html");return f({imageUrl:QZ(e),altText:t.getAttribute("alt")},n&&{rawHTML:n})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"img",f(f({src:e.imageUrl},e.altText&&{alt:e.altText}),FQ(e))]}}},enumerable:!1,configurable:!0}),e.prototype.addImage=function(){return function(t){return function(e,n){var r=e.schema,o=e.tr,i=t,a=i.imageUrl,s=i.altText;if(!a)return!1;var c=r.nodes.image.createAndFill(f({imageUrl:zo(a)},s&&{altText:s}));return n(o.replaceSelectionWith(c).scrollIntoView()),!0}}},e.prototype.commands=function(){return{addImage:this.addImage()}},e}(Be),v1=1,g1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},jQ()),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(t){var e=t.attrs;return["div",FQ(e),[e.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),e.prototype.hr=function(){var t=this;return function(){return function(e,n){var r,o=e.selection,i=o.$from,a=o.$to;if(i===a){var s=e.doc,c=e.schema.nodes,l=c.thematicBreak,u=c.paragraph,p=[l.create()],d=i.node(v1),f=s.child(s.childCount-1)===d,h=s.resolve(i.after(v1)),m=(null===(r=i.nodeAfter)||void 0===r?void 0:r.type.name)===t.name;return(f||m)&&p.push(u.create()),n(e.tr.insert(h.pos,p).scrollIntoView()),!0}return!1}}},e.prototype.commands=function(){return{hr:this.hr()}},e.prototype.keymaps=function(){var t=this.hr()();return{"Mod-l":t,"Mod-L":t}},e}(Be),y1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["b","strong"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},jQ()),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"strong",FQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.bold=function(){return function(){return function(t,e){return Object(c["i"])(t.schema.marks.strong)(t,e)}}},e.prototype.commands=function(){return{bold:this.bold()}},e.prototype.keymaps=function(){var t=this.bold()();return{"Mod-b":t,"Mod-B":t}},e}(Rr),b1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["i","em"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},jQ()),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"em",FQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.italic=function(){return function(){return function(t,e){return Object(c["i"])(t.schema.marks.emph)(t,e)}}},e.prototype.commands=function(){return{italic:this.italic()}},e.prototype.keymaps=function(){var t=this.italic()();return{"Mod-i":t,"Mod-I":t}},e}(Rr),w1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=["s","del"].map((function(t){return{tag:t,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}}));return{attrs:f({rawHTML:{default:null}},jQ()),parseDOM:t,toDOM:function(t){var e=t.attrs;return[e.rawHTML||"del",FQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(c["i"])(t.schema.marks.strike)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Mod-s":t,"Mod-S":t}},e}(Rr),k1=function(t){function e(e){var n=t.call(this)||this;return n.linkAttributes=e,n}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:f({linkUrl:{default:""},linkText:{default:null},rawHTML:{default:null}},jQ()),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){var e=t.getAttribute("href")||"",n=t.getAttribute("data-raw-html");return f({linkUrl:QZ(e),linkText:t.textContent},n&&{rawHTML:n})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"a",f(f({href:n.linkUrl},t.linkAttributes),FQ(n))]}}},enumerable:!1,configurable:!0}),e.prototype.addLink=function(){return function(t){return function(e,n){var r=t,o=r.linkUrl,i=r.linkText,a=void 0===i?"":i,s=e.schema,c=e.tr,l=e.selection,u=l.empty,p=l.from,d=l.to;if(p&&d&&o){var f={linkUrl:zo(o),linkText:Ho(a)},h=s.mark("link",f);if(u&&a){var m=_t(s,a,h);c.replaceRangeWith(p,d,m)}else c.addMark(p,d,h);return n(c.scrollIntoView()),!0}return!1}}},e.prototype.toggleLink=function(){return function(t){return function(e,n){return Object(c["i"])(e.schema.marks.link,t)(e,n)}}},e.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},e}(Rr),x1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:f({rawHTML:{default:null}},jQ()),parseDOM:[{tag:"code",getAttrs:function(t){var e=t.getAttribute("data-raw-html");return f({},e&&{rawHTML:e})}}],toDOM:function(t){var e=t.attrs;return[e.rawHTML||"code",FQ(e)]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){return Object(c["i"])(t.schema.marks.code)(t,e)}}},e.prototype.keymaps=function(){var t=this.commands()();return{"Shift-Mod-c":t,"Shift-Mod-C":t}},e}(Rr),C1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(t){var e=t.getAttribute("data-custom-info");return{info:e}}}],toDOM:function(t){var e=t.attrs;return["div",{"data-custom-info":e.info||null},0]}}},enumerable:!1,configurable:!0}),e}(Be),M1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,parseDOM:[{tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){var r=t.selection.$from;return!(!n.endOfTextblock("down")||"frontMatter"!==r.node().type.name)&&Object(c["d"])(t,e)}}},e.prototype.keymaps=function(){return{Enter:this.commands()()}},e}(Be);function T1(t){return new $e([new P0,new B0,new F0,new H0,new z0,new V0,new q0,new _0,new $0,new l1,new u1,new p1,new d1,new f1,new h1,new m1,new g1,new y1,new b1,new w1,new k1(t),new x1,new C1,new M1,new He])}var S1=vn("contents"),O1=function(t){function e(e,n){var r=t.call(this,e)||this,o=n.toDOMAdaptor,i=n.htmlSchemaMap,a=void 0===i?{}:i,s=n.linkAttributes,c=void 0===s?{}:s,l=n.useCommandShortcut,u=void 0===l||l,p=n.wwPlugins,d=void 0===p?[]:p,h=n.wwNodeViews,m=void 0===h?{}:h;return r.editorType="wysiwyg",r.el.classList.add("ww-mode"),r.toDOMAdaptor=o,r.linkAttributes=c,r.extraPlugins=d,r.pluginNodeViews=m,r.specs=r.createSpecs(),r.schema=r.createSchema(a),r.context=r.createContext(),r.keymaps=r.createKeymaps(u),r.view=r.createView(),r.commands=r.createCommands(),r.specs.setContext(f(f({},r.context),{view:r.view})),r.initEvent(),r}return d(e,t),e.prototype.createSpecs=function(){return T1(this.linkAttributes)},e.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},e.prototype.createSchema=function(t){return new r["i"]({nodes:f(f({},this.specs.nodes),t.nodes),marks:f(f({},this.specs.marks),t.marks)})},e.prototype.createPlugins=function(){return this.defaultPlugins.concat(h([MY(),LY(this.eventEmitter),IY(),zY(this.eventEmitter)],this.createPluginProps()))},e.prototype.createPluginNodeViews=function(){var t=this,e=t.eventEmitter,n=t.pluginNodeViews,r={};return n&&Object.keys(n).forEach((function(t){r[t]=function(r,o,i){return n[t](r,o,i,e)}})),r},e.prototype.createView=function(){var t=this,e=this,n=e.toDOMAdaptor,r=e.eventEmitter;return new o["c"](this.el,{state:this.createState(),attributes:{class:S1},nodeViews:f({customBlock:function(t,e,r){return new VY(t,e,r,n)},image:function(t,e,n){return new _Y(t,e,n,r)},codeBlock:function(t,e,n){return new WY(t,e,n,r)},widget:je},this.createPluginNodeViews()),dispatchTransaction:function(e){var n=t.view.state.applyTransaction(e).state;t.view.updateState(n),t.emitChangeEvent(e.scrollIntoView()),t.eventEmitter.emit("setFocusedNode",n.selection.$from.node(1))},transformPastedHTML:d0,transformPasted:function(e){return x0(e,t.schema)},handlePaste:function(t,e,n){return I0(t,n)},handleKeyDown:function(e,n){return t.eventEmitter.emit("keydown",t.editorType,n),!1},handleDOMEvents:{paste:function(e,n){var r=n.clipboardData||window.clipboardData,o=r&&r.items;if(o){var i=Re(o);i&&(n.preventDefault(),Ae(t.eventEmitter,i,n.type))}return!1},keyup:function(e,n){return t.eventEmitter.emit("keyup",t.editorType,n),!1},scroll:function(){return t.eventEmitter.emit("scroll","editor"),!0}}})},e.prototype.createCommands=function(){return this.specs.commands(this.view,nY())},e.prototype.getHTML=function(){return this.view.dom.innerHTML},e.prototype.getModel=function(){return this.view.state.doc},e.prototype.getSelection=function(){var t=this.view.state.selection,e=t.from,n=t.to;return[e,n]},e.prototype.getSchema=function(){return this.view.state.schema},e.prototype.replaceSelection=function(t,e,n){var o=this.view.state,i=o.schema,a=o.tr,s=t.split("\n"),c=s.map((function(t){return qt(i,xe(t,i))})),l=new r["j"](r["c"].from(c),1,1),u=at(e)&&at(n)?a.replaceRange(e,n,l):a.replaceSelection(l);this.view.dispatch(u),this.focus()},e.prototype.deleteSelection=function(t,e){var n=this.view.state.tr,r=at(t)&&at(e)?n.deleteRange(t,e):n.deleteSelection();this.view.dispatch(r.scrollIntoView())},e.prototype.getSelectedText=function(t,e){var n=this.view.state,r=n.doc,o=n.selection,i=o.from,a=o.to;return at(t)&&at(e)&&(i=t,a=e),r.textBetween(i,a,"\n")},e.prototype.setModel=function(t,e){void 0===e&&(e=!1);var n=this.view.state,r=n.tr,o=n.doc;this.view.dispatch(r.replaceWith(0,o.content.size,t)),e&&this.moveCursorToEnd(!0)},e.prototype.setSelection=function(t,e){void 0===e&&(e=t);var n=this.view.state.tr,r=$t(n,t,e);this.view.dispatch(n.setSelection(r).scrollIntoView())},e.prototype.addWidget=function(t,e,n){var r=this.view,o=r.dispatch,i=r.state;o(i.tr.setMeta("widget",{pos:null!==n&&void 0!==n?n:i.selection.to,node:t,style:e}))},e.prototype.replaceWithWidget=function(t,e,n){var r=this.view.state,o=r.tr,i=r.schema,a=xe(n,i);this.view.dispatch(o.replaceWith(t,e,a))},e.prototype.getRangeInfoOfNode=function(t){var e=this.view.state,n=e.doc,r=e.selection,o=t?n.resolve(t):r.$from,i=o.marks(),a=o.node(),s=o.start(),c=o.end(),l=a.type.name;if(i.length||"paragraph"===l){var u=i[i.length-1],p=function(t){return!t.length||Mt(t,u)};l=u?u.type.name:"text",a.forEach((function(t,e){var n=t.isText,r=t.nodeSize,i=t.marks,a=o.pos-s;n&&e<=a&&e+r>=a&&p(i)&&(s+=e,c=s+r)}))}return{range:[s,c],type:l}},e}(ze),E1=H,N1=ct;function D1(t){return!E1(t)&&!N1(t)}var L1=D1,I1=L1;function A1(t){return I1(t)&&!1!==t}var R1=A1,P1=R1;function B1(t){return!P1(t)}var j1=B1,F1=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","change","caretChange","destroy","focus","blur","keydown","keyup"],H1=function(){function t(){var t=this;this.events=new TY,this.eventTypes=F1.reduce((function(t,e){return f(f({},t),{type:e})}),{}),this.hold=!1,F1.forEach((function(e){t.addEventType(e)}))}return t.prototype.listen=function(t,e){var n=this.getTypeInfo(t),r=this.events.get(n.type)||[];if(!this.hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(e.namespace=n.namespace),r.push(e),this.events.set(n.type,r)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getTypeInfo(t),o=this.events.get(r.type),i=[];return!this.hold&&o&&o.forEach((function(t){var n=t.apply(void 0,e);H(n)||i.push(n)})),i},t.prototype.emitReduce=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this.events.get(t);return!this.hold&&o&&o.forEach((function(t){var r=t.apply(void 0,h([e],n));j1(r)||(e=r)})),e},t.prototype.getTypeInfo=function(t){var e=t.split(".");return{type:e[0],namespace:e[1]}},t.prototype.hasEventType=function(t){return!H(this.eventTypes[this.getTypeInfo(t).type])},t.prototype.addEventType=function(t){if(this.hasEventType(t))throw new Error("There is already have event type "+t);this.eventTypes[t]=t},t.prototype.removeEventHandler=function(t,e){var n=this,r=this.getTypeInfo(t),o=r.type,i=r.namespace;o&&e?this.removeEventHandlerWithHandler(o,e):o&&!i?this.events.delete(o):!o&&i?this.events.forEach((function(t,e){n.removeEventHandlerWithTypeInfo(e,i)})):o&&i&&this.removeEventHandlerWithTypeInfo(o,i)},t.prototype.removeEventHandlerWithHandler=function(t,e){var n=this.events.get(t);if(n){var r=n.indexOf(e);n.indexOf(e)>=0&&n.splice(r,1)}},t.prototype.removeEventHandlerWithTypeInfo=function(t,e){var n=[],r=this.events.get(t);r&&(r.map((function(t){return t.namespace!==e&&n.push(t),null})),this.events.set(t,n))},t.prototype.getEvents=function(){return this.events},t.prototype.holdEventInvoke=function(t){this.hold=!0,t(),this.hold=!1},t}(),z1=function(){function t(t,e,n,r){this.eventEmitter=t,this.mdCommands=e,this.wwCommands=n,this.getEditorType=r,this.initEvent()}return t.prototype.initEvent=function(){var t=this;this.eventEmitter.listen("command",(function(e,n){t.exec(e,n)}))},t.prototype.addCommand=function(t,e,n){"markdown"===t?this.mdCommands[e]=n:this.wwCommands[e]=n},t.prototype.deleteCommand=function(t,e){"markdown"===t?delete this.mdCommands[e]:delete this.wwCommands[e]},t.prototype.exec=function(t,e){var n=this.getEditorType();"markdown"===n?this.mdCommands[t](e):this.wwCommands[t](e)},t}();function V1(t){return"\n"===t[t.length-1]?t.slice(0,t.length-1):t}function q1(t,e){var n=t.schema,r=e.literal,o=r.match(fn);if(o){var i=o[1],a=o[3],s=(i||a).toLowerCase();return"htmlInline"===e.type&&!(!n.marks[s]&&!n.nodes[s])}return!1}function _1(t){var e=t.type;return Mt(["text","strong","emph","strike","image","link","code"],e)}function $1(t){var e=t.type,n=t.literal,r="htmlInline"===e&&n.match(fn);if(r){var o=r[1],i=r[3],a=o||i;if(a)return Mt(["ul","ol","li"],a.toLowerCase())}return!1}function U1(t){var e=t.literal,n=/data-task/.test(e),r=/data-task-checked/.test(e);return{task:n,checked:r}}function W1(t,e){var n=document.createElement("div");n.innerHTML=t;var r=n.firstChild;return r.getAttribute(e)||""}function J1(t){var e={};return Object.keys(t).forEach((function(n){var r=n.split(", ");r.forEach((function(r){var o=r.toLowerCase();e[o]=t[n]}))})),e}var K1={"b, strong":function(t,e,n){var r=t.schema.marks.strong;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"i, em":function(t,e,n){var r=t.schema.marks.emph;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},"s, del":function(t,e,n){var r=t.schema.marks.strike;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},code:function(t,e,n){var r=t.schema.marks.code;n?t.openMark(r.create({rawHTML:n})):t.closeMark(r)},a:function(t,e,n){var r=e.literal,o=t.schema.marks.link;if(n){var i=W1(r,"href");t.openMark(o.create({linkUrl:QZ(i),rawHTML:n}))}else t.closeMark(o)},img:function(t,e,n){var r=e.literal,o=W1(r,"src");if(o){var i=W1(r,"alt"),a=t.schema.nodes.image;t.addNode(a,f({rawHTML:n,imageUrl:QZ(o)},i&&{altText:i}))}},hr:function(t,e,n){t.addNode(t.schema.nodes.thematicBreak,{rawHTML:n})},br:function(t,e){var n=t.schema.nodes.paragraph,r=e.parent,o=e.prev,i=e.next;"paragraph"===(null===r||void 0===r?void 0:r.type)?(!o||"htmlInline"===o.type&&o.literal.match(pn)||t.openNode(n),i&&t.closeNode()):"tableCell"===(null===r||void 0===r?void 0:r.type)&&(o&&(_1(o)||q1(t,o))&&t.closeNode(),i&&(_1(i)||q1(t,i))&&t.openNode(n))},pre:function(t,e,n){var r,o,i=document.createElement("div");i.innerHTML=e.literal;var a=null===(o=null===(r=i.firstChild)||void 0===r?void 0:r.firstChild)||void 0===o?void 0:o.textContent;t.openNode(t.schema.nodes.codeBlock,{rawHTML:n}),t.addText(V1(a)),t.closeNode()},"ul, ol":function(t,e,n){if("tableCell"===e.parent.type){var r=t.schema.nodes,o=r.bulletList,i=r.orderedList,a=r.paragraph,s="ul"===n?o:i;n?(e.prev&&!$1(e.prev)&&t.closeNode(),t.openNode(s,{rawHTML:n})):(t.closeNode(),e.next&&!$1(e.next)&&t.openNode(a))}},li:function(t,e,n){var r;if("tableCell"===(null===(r=e.parent)||void 0===r?void 0:r.type)){var o=t.schema.nodes,i=o.listItem,a=o.paragraph;if(n){var s=U1(e);e.prev&&!$1(e.prev)&&t.closeNode(),t.openNode(i,f({rawHTML:n},s)),e.next&&!$1(e.next)&&t.openNode(a)}else e.prev&&!$1(e.prev)&&t.closeNode(),t.closeNode()}}},G1=J1(K1);function X1(t){return"htmlInline"===t.type&&/<br ?\/?>/.test(t.literal)}function Z1(t){Le(t.childNodes).forEach((function(t){if(bn(t)){var e=t.nodeName.toLowerCase();t.setAttribute("data-raw-html",e),t.childNodes&&Z1(t)}}))}var Q1={text:function(t,e){t.addText(e.literal||"")},paragraph:function(t,e,n,r){var o,i=n.entering;if(i){var a=t.schema.nodes.paragraph;"paragraph"===(null===(o=e.prev)||void 0===o?void 0:o.type)&&(t.openNode(a,r),t.closeNode()),t.openNode(a,r)}else t.closeNode()},heading:function(t,e,n,r){var o=n.entering;if(o){var i=e,a=i.level,s=i.headingType;t.openNode(t.schema.nodes.heading,f({level:a,headingType:s},r))}else t.closeNode()},codeBlock:function(t,e,n){var r=t.schema.nodes.codeBlock,o=e,i=o.info,a=o.literal;t.openNode(r,f({language:i},n)),t.addText(V1(a||"")),t.closeNode()},list:function(t,e,n,r){var o=n.entering;if(o){var i=t.schema.nodes,a=i.bulletList,s=i.orderedList,c=e.listData,l=c.type,u=c.start;"bullet"===l?t.openNode(a,r):t.openNode(s,f({order:u},r))}else t.closeNode()},item:function(t,e,n,r){var o=n.entering,i=t.schema.nodes.listItem,a=e.listData,s=a.task,c=a.checked;if(o){var l=f(f(f({},s&&{task:s}),c&&{checked:c}),r);t.openNode(i,l)}else t.closeNode()},blockQuote:function(t,e,n,r){var o=n.entering;o?t.openNode(t.schema.nodes.blockQuote,r):t.closeNode()},image:function(t,e,n,r){var o=n.entering,i=n.skipChildren,a=t.schema.nodes.image,s=e,c=s.destination,l=s.firstChild;o&&i&&i(),t.addNode(a,f(f({imageUrl:c},l&&{altText:l.literal}),r))},thematicBreak:function(t,e,n,r){t.addNode(t.schema.nodes.thematicBreak,r)},strong:function(t,e,n,r){var o=n.entering,i=t.schema.marks.strong;o?t.openMark(i.create(r)):t.closeMark(i)},emph:function(t,e,n,r){var o=n.entering,i=t.schema.marks.emph;o?t.openMark(i.create(r)):t.closeMark(i)},link:function(t,e,n,r){var o=n.entering,i=t.schema.marks.link,a=e,s=a.destination,c=a.title;if(o){var l=f(f({linkUrl:s},c&&{linkText:c}),r);t.openMark(i.create(l))}else t.closeMark(i)},softbreak:function(t,e){if("paragraph"===e.parent.type){var n=e.prev,r=e.next;n&&!X1(n)&&t.closeNode(),r&&!X1(r)&&t.openNode(t.schema.nodes.paragraph)}},table:function(t,e,n,r){var o=n.entering;o?t.openNode(t.schema.nodes.table,r):t.closeNode()},tableHead:function(t,e,n,r){var o=n.entering;o?t.openNode(t.schema.nodes.tableHead,r):t.closeNode()},tableBody:function(t,e,n,r){var o=n.entering;o?t.openNode(t.schema.nodes.tableBody,r):t.closeNode()},tableRow:function(t,e,n,r){var o=n.entering;o?t.openNode(t.schema.nodes.tableRow,r):t.closeNode()},tableCell:function(t,e,n){var r=n.entering;if(!e.ignored){var o=function(e){return e&&(_1(e)||q1(t,e))};if(r){var i=t.schema.nodes,a=i.tableHeadCell,s=i.tableBodyCell,c=i.paragraph,l=e.parent.parent,u="tableHead"===l.type?a:s,p=l.parent,d=p.columns[e.startIdx].align,h=f({},e.attrs);d&&(h.align=d),t.openNode(u,h),o(e.firstChild)&&t.openNode(c)}else o(e.lastChild)&&t.closeNode(),t.closeNode()}},strike:function(t,e,n,r){var o=n.entering,i=t.schema.marks.strike;o?t.openMark(i.create(r)):t.closeMark(i)},code:function(t,e,n,r){var o=t.schema.marks.code;t.openMark(o.create(r)),t.addText(V1(e.literal||"")),t.closeMark(o)},customBlock:function(t,e){var n=t.schema.nodes,r=n.customBlock,o=n.paragraph,i=e,a=i.info,s=i.literal;t.openNode(r,{info:a}),t.addText(V1(s||"")),t.closeNode(),e.next||(t.openNode(o),t.closeNode())},frontMatter:function(t,e){t.openNode(t.schema.nodes.frontMatter),t.addText(e.literal),t.closeNode()},htmlInline:function(t,e){var n=e.literal,r=n.match(fn),o=r[1],i=r[3],a=(o||i).toLowerCase(),s=t.schema.marks[a];if(null===s||void 0===s?void 0:s.spec.attrs.htmlInline)if(o){var c=tQ(n);t.openMark(s.create({htmlAttrs:c}))}else t.closeMark(s);else{var l=G1[a];l&&l(t,e,o)}},htmlBlock:function(t,e){var n=e.literal,r=document.createElement("div"),o=n.match(fn),i=o[1],a=o[3],s=(i||a).toLowerCase(),c=t.schema.nodes[s];if(null===c||void 0===c?void 0:c.spec.attrs.htmlBlock){var l=tQ(n),u=YZ(e,s);t.addNode(c,{htmlAttrs:l,childrenHTML:u})}else r.innerHTML=n,Z1(r),t.convertByDOMParser(r)},customInline:function(t,e,n){var r=n.entering,o=n.skipChildren,i=e.info,a=t.schema;if(-1!==i.indexOf("widget")&&r){var s=Ce(e);o(),t.addNode(a.nodes.widget,{info:i},[a.text(ge(i,s))])}}};function Y1(t){var e=Object.keys(t),n=f({},Q1),r=new RZ({gfm:!0,nodeId:!0,convertors:t}),o=r.getConvertors();return e.forEach((function(e){var r=Q1[e];r&&!Mt(["htmlBlock","htmlInline"],e)&&(n[e]=function(n,i,a){a.origin=function(){return o[e](i,a)};var s,c=t[e](i,a);if(c){var l=Array.isArray(c)?c[0]:c,u=l.attributes,p=l.classNames;s={htmlAttrs:u,classNames:p}}r(n,i,a,s)})})),n}function t2(t,e){return!!(t.isText&&e.isText&&r["d"].sameSet(t.marks,e.marks))&&t.withText(t.text+e.text)}var e2=function(){function t(t,e){this.schema=t,this.convertors=e,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=r["d"].none}return t.prototype.top=function(){return Rt(this.stack)},t.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},t.prototype.addText=function(t){if(t){var e=this.top().content,n=Rt(e),r=this.schema.text(t,this.marks),o=n&&t2(n,r);o?e[e.length-1]=o:e.push(r)}},t.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},t.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},t.prototype.addNode=function(t,e,n){var r=t.createAndFill(e,n,this.marks);return r?(this.push(r),r):null},t.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},t.prototype.closeNode=function(){this.marks.length&&(this.marks=r["d"].none);var t=this.stack.pop(),e=t.type,n=t.attrs,o=t.content;return this.addNode(e,n,o)},t.prototype.convertByDOMParser=function(t){var e=this,n=r["a"].fromSchema(this.schema).parse(t);n.content.forEach((function(t){return e.push(t)}))},t.prototype.closeUnmatchedHTMLInline=function(t,e){var n;if(!e&&"htmlInline"!==t.type)for(var r=this.stack.length-1,o=r;o>=0;o-=1){var i=this.stack[o];if(!(null===(n=i.attrs)||void 0===n?void 0:n.rawHTML))break;i.content.length?this.closeNode():this.stack.pop()}},t.prototype.convert=function(t,e){var n=t.walker(),r=n.next(),o=function(){var t=r.node,o=r.entering,a=i.convertors[t.type],s=!1;if(a){var c={entering:o,leaf:!pe(t),getChildrenText:de,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:"\n"},skipChildren:function(){s=!0}};if(i.closeUnmatchedHTMLInline(t,o),a(i,t,c),(null===e||void 0===e?void 0:e.node)===t){var l=i.stack.reduce((function(t,e){return t+e.content.reduce((function(t,e){return t+e.nodeSize}),0)}),0)+1;e.setMappedPos(l)}}s&&(n.resumeAt(t,!1),n.next()),r=n.next()},i=this;while(r)o()},t.prototype.convertNode=function(t,e){return this.convert(t,e),this.stack.length?this.closeNode():null},t}();function n2(t,e,n){var r=n[0],o=n[1];t.write(r),t.convertInline(e),t.write(o)}function r2(t,e,n){var r=e.node,o=e.parent,i=n[0],a=n[1];t.stopNewline=!0,t.write(i),t.convertNode(r),t.write(a),"doc"===(null===o||void 0===o?void 0:o.type.name)&&(t.closeBlock(r),t.stopNewline=!1)}function o2(t,e){var n=t.length,r="",o="";return"left"===e?(r=":",n-=1):"right"===e?(o=":",n-=1):"center"===e&&(r=":",o=":",n-=2),""+r+Et("-",Math.max(n,3))+o}var i2={text:function(t,e){var n,r=e.node;t.text(null!==(n=r.text)&&void 0!==n?n:"")},paragraph:function(t,e){var n=e.node,r=e.parent,o=e.index,i=void 0===o?0:o;if(t.stopNewline)t.convertInline(n);else{var a=0===i,s=!a&&r.child(i-1),c=s&&0===s.childCount,l=i<r.childCount-1&&r.child(i+1),u=l&&"paragraph"===l.type.name,p=0===n.childCount;p&&c?t.write("<br>\n"):!p||c||a?(t.convertInline(n),u?t.write("\n"):t.closeBlock(n)):t.write("\n")}},heading:function(t,e,n){var r=e.node,o=n.delim,i=r.attrs.headingType;"atx"===i?(t.write(o+" "),t.convertInline(r),t.closeBlock(r)):(t.convertInline(r),t.ensureNewLine(),t.write(o),t.closeBlock(r))},codeBlock:function(t,e,n){var r=e.node,o=n.delim,i=n.text,a=o,s=a[0],c=a[1];t.write(s),t.ensureNewLine(),t.text(i,!1),t.ensureNewLine(),t.write(c),t.closeBlock(r)},blockQuote:function(t,e,n){var r=e.node,o=e.parent,i=n.delim;(null===o||void 0===o?void 0:o.type.name)===r.type.name&&t.flushClose(1),t.wrapBlock(i,null,r,(function(){return t.convertNode(r)}))},bulletList:function(t,e,n){var r=e.node,o=n.delim;t.convertList(r,Et(" ",4),(function(){return o+" "}))},orderedList:function(t,e){var n=e.node,r=n.attrs.order||1;t.convertList(n,Et(" ",4),(function(t){var e=String(r+t);return e+". "}))},listItem:function(t,e){var n=e.node,r=n.attrs,o=r.task,i=r.checked;o&&t.write("["+(i?"x":" ")+"] "),t.convertNode(n)},image:function(t,e,n){var r=n.attrs;t.write("!["+(null===r||void 0===r?void 0:r.altText)+"]("+(null===r||void 0===r?void 0:r.imageUrl)+")")},thematicBreak:function(t,e,n){var r=e.node,o=n.delim;t.write(o),t.closeBlock(r)},table:function(t,e){var n=e.node;t.convertNode(n),t.closeBlock(n)},tableHead:function(t,e,n){var r=e.node,o=n.delim,i=r.firstChild;t.convertNode(r);var a=null!==o&&void 0!==o?o:"";!o&&i&&i.forEach((function(t){var e=t.textContent,n=t.attrs,r=o2(e,n.align);a+="| "+r+" "})),t.write(a+"|"),t.ensureNewLine()},tableBody:function(t,e){var n=e.node;t.convertNode(n)},tableRow:function(t,e){var n=e.node;t.convertNode(n),t.write("|"),t.ensureNewLine()},tableHeadCell:function(t,e,n){var r=e.node,o=n.delim,i=void 0===o?"| ":o;t.write(i),t.convertTableCell(r),t.write(" ")},tableBodyCell:function(t,e,n){var r=e.node,o=n.delim,i=void 0===o?"| ":o;t.write(i),t.convertTableCell(r),t.write(" ")},customBlock:function(t,e,n){var r=e.node,o=n.delim,i=n.text,a=o,s=a[0],c=a[1];t.write(s),t.ensureNewLine(),t.text(i,!1),t.ensureNewLine(),t.write(c),t.closeBlock(r)},frontMatter:function(t,e,n){var r=e.node,o=n.text;t.text(o,!1),t.closeBlock(r)},widget:function(t,e,n){var r=n.text;t.write(r)},html:function(t,e,n){var r=n.text;t.write(r)}};function a2(t,e){var n=e.state,r=e.nodeInfo,o=e.params,i=o.rawHTML;i?j(t,["heading","codeBlock"])>-1?n2(n,r.node,i):j(t,["image","thematicBreak"])>-1?n.write(i):r2(n,r,i):i2[t](n,r,o)}function s2(t,e){var n=t.text,r=/`+/g,o=0;if(t.isText&&n){var i=r.exec(n);while(i)o=Math.max(o,i[0].length),i=r.exec(n)}for(var a=o>0&&e>0?" `":"`",s=0;s<o;s+=1)a+="`";return o>0&&e<0&&(a+=" "),a}function c2(t){return t?["<"+t+">","</"+t+">"]:null}function l2(t){return t?"<"+t+">":null}function u2(t){return t?"</"+t+">":null}var p2={heading:function(t){var e=t.node,n=e.attrs,r=n.level,o=Et("#",r);return"setext"===n.headingType&&(o=1===r?"===":"---"),{delim:o,rawHTML:c2(n.rawHTML)}},codeBlock:function(t){var e=t.node,n=e,r=n.attrs,o=n.textContent;return{delim:["```"+(r.language||""),"```"],rawHTML:c2(r.rawHTML),text:o}},blockQuote:function(t){var e=t.node;return{delim:"> ",rawHTML:c2(e.attrs.rawHTML)}},bulletList:function(t,e){var n=t.node,r=e.inTable,o=n.attrs.rawHTML;return r&&(o=o||"ul"),{delim:"*",rawHTML:c2(o)}},orderedList:function(t,e){var n=t.node,r=e.inTable,o=n.attrs.rawHTML;return r&&(o=o||"ol"),{rawHTML:c2(o)}},listItem:function(t,e){var n=t.node,r=e.inTable,o=n.attrs,i=o.task,a=o.checked,s=n.attrs.rawHTML;r&&(s=s||"li");var c=i?' class="task-list-item'+(a?" checked":"")+'"':"",l=i?" data-task"+(a?" data-task-checked":""):"";return{rawHTML:s?["<"+s+c+l+">","</"+s+">"]:null}},table:function(t){var e=t.node;return{rawHTML:c2(e.attrs.rawHTML)}},tableHead:function(t){var e=t.node;return{rawHTML:c2(e.attrs.rawHTML)}},tableBody:function(t){var e=t.node;return{rawHTML:c2(e.attrs.rawHTML)}},tableRow:function(t){var e=t.node;return{rawHTML:c2(e.attrs.rawHTML)}},tableHeadCell:function(t){var e=t.node;return{rawHTML:c2(e.attrs.rawHTML)}},tableBodyCell:function(t){var e=t.node;return{rawHTML:c2(e.attrs.rawHTML)}},image:function(t){var e=t.node,n=e.attrs,r=Dt(n.altText||""),o=Dt(n.imageUrl),i=r?' alt="'+r+'"':"";return{rawHTML:n.rawHTML?"<"+n.rawHTML+' src="'+o+'"'+i+">":null,attrs:{altText:r,imageUrl:o}}},thematicBreak:function(t){var e=t.node;return{delim:"***",rawHTML:l2(e.attrs.rawHTML)}},customBlock:function(t){var e=t.node,n=e,r=n.attrs,o=n.textContent;return{delim:["$$"+r.info,"$$"],text:o}},frontMatter:function(t){var e=t.node;return{text:e.textContent}},widget:function(t){var e=t.node;return{text:e.textContent}},strong:function(t,e){var n=t.node,r=e.entering,o=n.attrs.rawHTML;return{delim:"**",rawHTML:r?l2(o):u2(o)}},emph:function(t,e){var n=t.node,r=e.entering,o=n.attrs.rawHTML;return{delim:"*",rawHTML:r?l2(o):u2(o)}},strike:function(t,e){var n=t.node,r=e.entering,o=n.attrs.rawHTML;return{delim:"~~",rawHTML:r?l2(o):u2(o)}},link:function(t,e){var n=t.node,r=e.entering,o=n.attrs,i=Dt(o.linkUrl),a=o.rawHTML;if(r)return{delim:"[",rawHTML:a?"<"+a+' href="'+i+'">':null};var s=o.title?" "+Lt(o.linkText):"";return{delim:"]("+s+i+")",rawHTML:u2(a)}},code:function(t,e){var n=t.node,r=t.parent,o=t.index,i=void 0===o?0:o,a=e.entering,s=a?s2(r.child(i),-1):s2(r.child(i-1),1),c=a?l2(n.attrs.rawHTML):u2(n.attrs.rawHTML);return{delim:s,rawHTML:c}},html:function(t,e){var n=t.node,r=e.entering,o=n.type.name,i=n.attrs.htmlAttrs,a="<"+o,s="</"+o+">";return Object.keys(i).forEach((function(t){a+=" "+t+'="'+i[t]+'"'})),a+=">",n.attrs.htmlInline?{rawHTML:r?a:s}:{text:""+a+n.attrs.childrenHTML+s}}},d2={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function f2(t){var e={},n=Object.keys(i2);return n.forEach((function(n){e[n]=function(e,r){var o=i2[n];if(o){var i=t[n],a=i?i(r,{inTable:e.inTable}):{};a2(n,{state:e,nodeInfo:r,params:a})}}})),e}function h2(t){var e={},n=Object.keys(d2);return n.forEach((function(n){e[n]=function(e,r){var o=d2[n],i=t[n],a=i&&e&&!H(r),s=a?i(e,{entering:r}):{};return f(f({},s),o)}})),e}function m2(t){var e=Object.keys(t);e.forEach((function(e){var n=p2[e],r=t[e];p2[e]=n?function(t,e){return e.origin=function(){return n(t,e)},r(t,e)}:r,delete t[e]}));var n=f2(p2),r=h2(p2);return{nodeTypeConvertors:n,markTypeConvertors:r}}var v2=function(){function t(t){var e=t.nodeTypeConvertors,n=t.markTypeConvertors;this.nodeTypeConvertors=e,this.markTypeConvertors=n,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return t.prototype.getMarkConvertor=function(t){var e=t.attrs.htmlInline?"html":t.type.name;return this.markTypeConvertors[e]},t.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},t.prototype.markText=function(t,e,n,r){var o=this.getMarkConvertor(t);if(o){var i=o({node:t,parent:n,index:r},e),a=i.delim,s=i.rawHTML;return s||a}return""},t.prototype.flushClose=function(t){if(!this.stopNewline&&this.closed){if(this.isInBlank()||(this.result+="\n"),t||(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var r=1;r<t;r+=1)this.result+=e+"\n"}this.closed=!1}},t.prototype.wrapBlock=function(t,e,n,r){var o=this.delim;this.write(e||t),this.delim+=t,r(),this.delim=o,this.closeBlock(n)},t.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+="\n")},t.prototype.write=function(t){void 0===t&&(t=""),this.flushClose(),this.delim&&this.isInBlank()&&(this.result+=this.delim),t&&(this.result+=t)},t.prototype.closeBlock=function(t){this.closed=t},t.prototype.text=function(t,e){void 0===e&&(e=!0);for(var n=t.split("\n"),r=0;r<n.length;r+=1)this.write(),this.result+=e?Dt(n[r]):n[r],r!==n.length-1&&(this.result+="\n")},t.prototype.convertBlock=function(t,e,n){var r=t.type.name,o=this.nodeTypeConvertors[r],i={node:t,parent:e,index:n};t.attrs.htmlBlock?this.nodeTypeConvertors.html(this,i):o&&o(this,i)},t.prototype.convertInline=function(t){var e=this,n=[],r="",o=function(o,i,a){var s=o?o.marks:[],c=r;r="";var l=o&&o.isText&&s.some((function(t){var n=e.getMarkConvertor(t),r=n&&n();return r&&r.removedEnclosingWhitespace}));if(l&&o&&o.text){var u=/^(\s*)(.*?)(\s*)$/m.exec(o.text),p=u[1],d=u[2],f=u[3];c+=p,r=f,(p||f)&&(o=d?o.withText(d):null,o||(s=n))}for(var h=s.length&&Rt(s),m=h&&e.getMarkConvertor(h),v=m&&m(),g=v&&!1===v.escape,y=s.length-(g?1:0),b=0;b<y;b+=1){d=s[b];if(v&&!v.mixable)break;for(var w=0;w<n.length;w+=1){var k=n[w];if(v&&!v.mixable)break;if(d.eq(k)){b>w?s=s.slice(0,w).concat(d).concat(s.slice(w,b)).concat(s.slice(b+1,y)):w>b&&(s=s.slice(0,b).concat(s.slice(b+1,w)).concat(d).concat(s.slice(w,y)));break}}}var x=0;while(x<Math.min(n.length,y)&&s[x].eq(n[x]))x+=1;while(x<n.length){var C=n.pop();C&&e.text(e.markText(C,!1,t,a),!1)}if(c&&e.text(c),o){while(n.length<y){d=s[n.length];n.push(d),e.text(e.markText(d,!0,t,a),!1)}g&&o.isText?e.text(e.markText(h,!0,t,a)+o.text+e.markText(h,!1,t,a+1),!1):e.convertBlock(o,t,a)}};t.forEach(o),o(null,null,t.childCount)},t.prototype.convertList=function(t,e,n){var r,o=this;this.closed&&this.closed.type===t.type?this.flushClose(3):this.tightList&&this.flushClose(1);var i=null===(r=t.attrs.tight)||void 0===r||r,a=this.tightList;this.tightList=i,t.forEach((function(r,a,s){s&&i&&o.flushClose(1),o.wrapBlock(e,n(s),t,(function(){return o.convertBlock(r,t,s)}))})),this.tightList=a},t.prototype.convertTableCell=function(t){var e=this;this.stopNewline=!0,this.inTable=!0,t.forEach((function(n,r,o){if(Mt(["bulletList","orderedList"],n.type.name))e.convertBlock(n,t,o),e.closed=!1;else if(e.convertInline(n),o<t.childCount-1){var i=t.child(o+1);"paragraph"===i.type.name&&e.write("<br>")}})),this.stopNewline=!1,this.inTable=!1},t.prototype.convertNode=function(t,e){var n=this;return t.forEach((function(r,o,i){if(n.convertBlock(r,t,i),(null===e||void 0===e?void 0:e.node)===r){var a=n.result.split("\n");e.setMappedPos([a.length,Rt(a).length+1])}})),this.result},t}(),g2=function(){function t(t,e,n,r){var o=this;this.setMappedPos=function(t){o.mappedPosWhenConverting=t},this.schema=t,this.eventEmitter=r,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=Y1(n),this.toMdConvertors=m2(e||{}),this.eventEmitter.listen("setFocusedNode",(function(t){return o.focusedNode=t}))}return t.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},t.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},t.prototype.toWysiwygModel=function(t){var e=new e2(this.schema,this.toWwConvertors);return e.convertNode(t,this.getInfoForPosSync())},t.prototype.toMarkdownText=function(t){var e=new v2(this.toMdConvertors),n=e.convertNode(t,this.getInfoForPosSync());return n=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",n),n},t}();function y2(t,e,n){var i={Plugin:a["d"],Selection:a["f"],TextSelection:a["h"]},s={Decoration:o["a"],DecorationSet:o["b"]},c={Fragment:r["c"]},l={eventEmitter:e,usageStatistics:n,pmState:i,pmView:s,pmModel:c,i18n:EY};if(C(t)){var u=t[0],p=t[1],d=void 0===p?{}:p;return u(l,d)}return t(l)}function b2(t,e,n){return e.listen("mixinTableOffsetMapPrototype",aY),(null!==t&&void 0!==t?t:[]).reduce((function(t,r){var o=y2(r,e,n);if(!o)throw new Error("The return value of the executed plugin is empty.");var i=o.markdownParsers,a=o.toHTMLRenderers,s=o.toMarkdownRenderers,c=o.markdownPlugins,l=o.wysiwygPlugins,u=o.wysiwygNodeViews,p=o.markdownCommands,d=o.wysiwygCommands,h=o.toolbarItems;return a&&(t.toHTMLRenderers=jt(t.toHTMLRenderers,a)),s&&(t.toMarkdownRenderers=jt(t.toMarkdownRenderers,s)),c&&(t.mdPlugins=t.mdPlugins.concat(c)),l&&(t.wwPlugins=t.wwPlugins.concat(l)),u&&(t.wwNodeViews=f(f({},t.wwNodeViews),u)),p&&(t.mdCommands=f(f({},t.mdCommands),p)),d&&(t.wwCommands=f(f({},t.wwCommands),d)),h&&(t.toolbarItems=t.toolbarItems.concat(h)),i&&(t.markdownParsers=f(f({},t.markdownParsers),i)),t}),{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var w2="data-task",k2="data-task-disabled",x2="checked",C2=function(){function t(t){var e=this;this.options=b({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},t),this.eventEmitter=new H1;var n=Ot(this.options.linkAttributes),r=b2(this.options.plugins,this.eventEmitter,this.options.usageStatistics)||{},o=r.toHTMLRenderers,i=r.markdownParsers,a=this.options,s=a.customHTMLRenderer,c=a.extendedAutolinks,l=a.referenceDefinition,u=a.frontMatter,p=a.customHTMLSanitizer,d={linkAttributes:n,customHTMLRenderer:f(f({},o),s),extendedAutolinks:c,referenceDefinition:l,frontMatter:u,sanitizer:p||JZ};this.options.events&&g(this.options.events,(function(t,n){e.on(n,t)}));var h=this.options,m=h.el,v=h.initialValue,y=h.theme,w=m.innerHTML;"light"!==y&&m.classList.add(vn(y)),m.innerHTML="",this.toastMark=new TZ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:c,referenceDefinition:l,disallowDeepHeading:!0,frontMatter:u,customParser:i}),this.preview=new NQ(this.eventEmitter,f(f({},d),{isViewer:!0})),gi(this.preview.el,"mousedown",this.toggleTask.bind(this)),v?this.setMarkdown(v):w&&this.preview.setHTML(w),m.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return t.prototype.toggleTask=function(t){var e=t.target,n=getComputedStyle(e,":before");!e.hasAttribute(k2)&&e.hasAttribute(w2)&&hn(n,t.offsetX,t.offsetY)&&Tn(e,x2)},t.prototype.setMarkdown=function(t){var e=this.toastMark.getLineTexts(),n=e.length,r=Rt(e),o=[n,r.length+1],i=this.toastMark.editMarkdown([1,1],o,t||"");this.eventEmitter.emit("updatePreview",i)},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.destroy=function(){ui(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},t.prototype.isViewer=function(){return!0},t.prototype.isMarkdownMode=function(){return!1},t.prototype.isWysiwygMode=function(){return!1},t}();function M2(t){return t instanceof r["f"]}function T2(t){var e=["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"];return Mt(e,t)}function S2(t){var e=t.attrs,n=t.type,r=n.name,o={type:r,wysiwygNode:!0,literal:!T2(r)&&M2(t)?t.textContent:null},i={heading:{level:e.level},link:{destination:e.linkUrl,title:e.linkText},image:{destination:e.imageUrl},codeBlock:{info:e.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:e.order}},listItem:{type:"item",listData:{task:e.task,checked:e.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:e.align},tableBodyCell:{type:"tableCell",cellType:"body",align:e.align},customBlock:{info:e.info}},a=i[r],s=f(f({},o),a),c=t.attrs,l=c.htmlAttrs,u=c.childrenHTML;return l?f(f({},s),{attrs:l,childrenHTML:u}):s}var O2={openTag:function(t,e){var n=t,r=n.tagName,o=n.classNames,i=n.attributes,a=document.createElement(r),s={};o&&(a.className=o.join(" ")),i&&(s=f(f({},s),i)),Ln(s,a),e.push(a)},closeTag:function(t,e){if(e.length>1){var n=e.pop();Rt(e).appendChild(n)}},html:function(t,e){Rt(e).insertAdjacentHTML("beforeend",t.content)},text:function(t,e){var n=document.createTextNode(t.content);Rt(e).appendChild(n)}},E2=function(){function t(t,e){var n=sQ(t,e),r=f(f({},e.htmlBlock),e.htmlInline);this.customConvertorKeys=Object.keys(e).concat(Object.keys(r)),this.renderer=new RZ({gfm:!0,convertors:f(f({},n),r)}),this.convertors=this.renderer.getConvertors()}return t.prototype.generateTokens=function(t){var e=S2(t),n={entering:!0,leaf:!!M2(t)&&t.isLeaf,options:this.renderer.getOptions(),getChildrenText:function(){return M2(t)?t.textContent:""},skipChildren:function(){return!1}},r=this.convertors[t.type.name],o=r(e,n,this.convertors),i=C(o)?o:[o];return(T2(t.type.name)||t.attrs.htmlInline)&&(n.entering=!1,i.push({type:"text",content:M2(t)?t.textContent:""}),i=i.concat(r(e,n,this.convertors))),i},t.prototype.toDOMNode=function(t){var e=this.generateTokens(t),n=[];return e.forEach((function(t){return O2[t.type](t,n)})),n[0]},t.prototype.getToDOMNode=function(t){return Mt(this.customConvertorKeys,t)?this.toDOMNode.bind(this):null},t}(),N2=100,D2=15,L2=null,I2=null;function A2(t,e){var n=e.syncScrollTop,r=e.releaseEventBlock;I2&&clearTimeout(I2),n(t),I2=setTimeout((function(){r()}),D2)}function R2(t,e,n){var r=e-t,o=Date.now(),i=function(){var a,s=Date.now(),c=(s-o)/N2;L2&&clearTimeout(L2),c<1?(a=t+r*Math.cos((1-c)*Math.PI/2),A2(Math.ceil(a),n),L2=setTimeout(i,1)):(A2(e,n),L2=null)};i()}var P2=18,B2=function(){function t(t,e,n){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0;var r=e.previewContent,o=e.el;this.previewRoot=r,this.previewEl=o,this.mdEditor=t,this.editorView=t.view,this.toastMark=t.getToastMark(),this.eventEmitter=n,this.addScrollSyncEvent()}return t.prototype.addScrollSyncEvent=function(){var t=this;this.eventEmitter.listen("afterPreviewRender",(function(){setTimeout((function(){t.syncPreviewScrollTop(!0)}),200)})),this.eventEmitter.listen("scroll",(function(e,n){t.active&&("editor"===e&&"editor"!==t.blockedScroll?t.syncPreviewScrollTop():"preview"===e&&"preview"!==t.blockedScroll&&t.syncEditorScrollTop(n))})),this.eventEmitter.listen("toggleScrollSync",(function(e){t.active=e}))},t.prototype.getMdNodeAtPos=function(t,e){var n=t.content.findIndex(e.pos),r=n.index;return this.toastMark.findFirstNodeAtLine(r+1)},t.prototype.getScrollTopByCaretPos=function(){var t=this.mdEditor.getSelection(),e=this.toastMark.findFirstNodeAtLine(t[0][0]),n=this.previewEl.clientHeight,r=yQ(e).el,o=hQ(r,this.previewRoot)||r.offsetTop,i=r.clientHeight,a=o+i-.5*n;this.latestEditorScrollTop=null;var s=r.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top;return s<n?null:a},t.prototype.syncPreviewScrollTop=function(t){void 0===t&&(t=!1);var e=this,n=e.editorView,r=e.previewEl,o=e.previewRoot,i=n.dom.getBoundingClientRect(),a=i.left,s=i.top,c=n.posAtCoords({left:a,top:s}),l=n.state.doc,u=this.getMdNodeAtPos(l,c);if(u&&!Qt(u)){var p=r.scrollTop,d=n.dom,f=d.scrollTop,h=d.scrollHeight,m=d.clientHeight,v=d.children,g=h-f<=m+P2,y=g?r.scrollHeight:0;if(f&&!g){if(t){var b=this.getScrollTopByCaretPos();if(!b)return;y=b}else{var w=yQ(u),k=w.el,x=w.mdNode,C=pQ(l,x,v),M=C.height,T=C.rect,S=hQ(k,o)||k.offsetTop,O=k.clientHeight,E=s>T.top?Math.min((s-T.top)/M,1):0;y=S+O*E}y=this.getResolvedScrollTop("editor",f,y,p),this.latestEditorScrollTop=f}y!==p&&this.run("editor",y,p)}},t.prototype.syncEditorScrollTop=function(t){var e=this,n=e.toastMark,r=e.editorView,o=e.previewRoot,i=e.previewEl,a=r.dom,s=r.state,c=i.scrollTop,l=i.clientHeight,u=i.scrollHeight,p=u-c<=l,d=a.scrollTop,f=p?a.scrollHeight:0;if(c&&t&&!p){if(t=fQ(t,o),!t.getAttribute("data-nodeid"))return;var h=a.children,m=Number(t.getAttribute("data-nodeid")),v=yQ(n.findNodeById(m)),g=v.mdNode,y=v.el,b=Kt(g);f=h[b-1].offsetTop;var w=pQ(s.doc,g,h).height,k=SQ(y,o,m),x=k.nodeHeight,C=k.offsetTop;f+=gQ(c,C,x,w),f=this.getResolvedScrollTop("preview",c,f,d),this.latestPreviewScrollTop=c}f!==d&&this.run("preview",f,d)},t.prototype.getResolvedScrollTop=function(t,e,n,r){var o="editor"===t?this.latestEditorScrollTop:this.latestPreviewScrollTop;return null===o?n:o<e?Math.max(n,r):Math.min(n,r)},t.prototype.run=function(t,e,n){var r,o=this;"editor"===t?(r=this.previewEl,this.blockedScroll="preview"):(r=this.editorView.dom,this.blockedScroll="editor");var i={syncScrollTop:function(t){return r.scrollTop=t},releaseEventBlock:function(){return o.blockedScroll=null}};R2(n,e,i)},t.prototype.destroy=function(){this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},t}(),j2=function(){function t(t){var e=this;this.initialHtml=t.el.innerHTML,t.el.innerHTML="",this.options=b({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},t);var n=this.options,r=n.customHTMLRenderer,o=n.extendedAutolinks,i=n.referenceDefinition,a=n.frontMatter,s=n.customMarkdownRenderer,c=n.useCommandShortcut,l=n.initialEditType,u=n.widgetRules,p=n.customHTMLSanitizer;this.mode=l||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.eventEmitter=new H1,we(u);var d=Ot(this.options.linkAttributes);this.pluginInfo=b2(this.options.plugins,this.eventEmitter,this.options.usageStatistics);var h=this.pluginInfo,m=h.toHTMLRenderers,v=h.toMarkdownRenderers,y=h.mdPlugins,w=h.wwPlugins,k=h.wwNodeViews,x=h.mdCommands,C=h.wwCommands,M=h.markdownParsers,T={linkAttributes:d,customHTMLRenderer:jt(m,r),extendedAutolinks:o,referenceDefinition:i,frontMatter:a,sanitizer:p||JZ},S=new E2(d,T.customHTMLRenderer),O=oQ(T.customHTMLRenderer,T.sanitizer,S);this.i18n=EY,this.i18n.setCode(this.options.language),this.toastMark=new TZ("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:o,referenceDefinition:i,disallowDeepHeading:!0,frontMatter:a,customParser:M}),this.mdEditor=new ti(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:c,mdPlugins:y}),this.preview=new NQ(this.eventEmitter,f(f({},T),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new O1(this.eventEmitter,{toDOMAdaptor:S,useCommandShortcut:c,htmlSchemaMap:O,linkAttributes:d,wwPlugins:w,wwNodeViews:k}),this.convertor=new g2(this.wwEditor.getSchema(),f(f({},v),s),sQ(d,T.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHTML(this.initialHtml,!1),this.commandManager=new z1(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,(function(){return e.mode})),this.options.usageStatistics&&Ct(),this.scrollSync=new B2(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(x,C),this.options.hooks&&g(this.options.hooks,(function(t,n){return e.addHook(n,t)})),this.options.events&&g(this.options.events,(function(t,n){return e.on(n,t)})),this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return t.prototype.addInitEvent=function(){this.on("needChangeMode",this.changeMode.bind(this)),Ie(this.eventEmitter)},t.prototype.addInitCommand=function(t,e){var n=this,r=function(t,e){Object.keys(e).forEach((function(r){n.addCommand(t,r,e[r])}))};this.addCommand("markdown","toggleScrollSync",(function(t){return n.eventEmitter.emit("toggleScrollSync",t.active),!0})),r("markdown",t),r("wysiwyg",e)},t.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},t.factory=function(e){return e.viewer?new C2(e):new t(e)},t.setLanguage=function(t,e){EY.setLanguage(t,e)},t.prototype.changePreviewStyle=function(t){this.mdPreviewStyle!==t&&(this.mdPreviewStyle=t,this.eventEmitter.emit("changePreviewStyle",t))},t.prototype.exec=function(t,e){this.commandManager.exec(t,e)},t.prototype.addCommand=function(t,e,n){var r=this,o=function(e){void 0===e&&(e={});var o=("markdown"===t?r.mdEditor:r.wwEditor).view;n(e,o.state,o.dispatch,o)};this.commandManager.addCommand(t,e,o)},t.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},t.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},t.prototype.removeHook=function(t){this.eventEmitter.removeEventHandler(t)},t.prototype.focus=function(){this.getCurrentModeEditor().focus()},t.prototype.blur=function(){this.getCurrentModeEditor().blur()},t.prototype.moveCursorToEnd=function(t){void 0===t&&(t=!0),this.getCurrentModeEditor().moveCursorToEnd(t)},t.prototype.moveCursorToStart=function(t){void 0===t&&(t=!0),this.getCurrentModeEditor().moveCursorToStart(t)},t.prototype.setMarkdown=function(t,e){if(void 0===t&&(t=""),void 0===e&&(e=!0),this.mdEditor.setMarkdown(t,e),this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r,e)}},t.prototype.setHTML=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!0);var n=document.createElement("div");n.innerHTML=In(t);var o=r["a"].fromSchema(this.wwEditor.schema).parse(n);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(o),e):this.wwEditor.setModel(o,e)},t.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())},t.prototype.getHTML=function(){var t=this;this.eventEmitter.holdEventInvoke((function(){t.isWysiwygMode()&&t.mdEditor.setMarkdown(t.convertor.toMarkdownText(t.wwEditor.getModel()))}));var e=this.toastMark.getRootNode(),n=this.preview.getRenderer();return n.render(e).replace(/\sdata-nodeid="\d{1,}"/g,"").trim()},t.prototype.insertText=function(t){this.getCurrentModeEditor().replaceSelection(t)},t.prototype.setSelection=function(t,e){this.getCurrentModeEditor().setSelection(t,e)},t.prototype.replaceSelection=function(t,e,n){this.getCurrentModeEditor().replaceSelection(t,e,n)},t.prototype.deleteSelection=function(t,e){this.getCurrentModeEditor().deleteSelection(t,e)},t.prototype.getSelectedText=function(t,e){return this.getCurrentModeEditor().getSelectedText(t,e)},t.prototype.getRangeInfoOfNode=function(t){return this.getCurrentModeEditor().getRangeInfoOfNode(t)},t.prototype.addWidget=function(t,e,n){this.getCurrentModeEditor().addWidget(t,e,n)},t.prototype.replaceWithWidget=function(t,e,n){this.getCurrentModeEditor().replaceWithWidget(t,e,n)},t.prototype.setHeight=function(t){var e=this.options.el;k(t)&&("auto"===t?(Q(e,"auto-height"),this.setMinHeight(this.getMinHeight())):(ot(e,"auto-height"),this.setMinHeight(t))),R(e,{height:t}),this.height=t},t.prototype.getHeight=function(){return this.height},t.prototype.setMinHeight=function(t){var e;this.minHeight=t;var n=this.options.el.clientHeight,r=(null===(e=document.querySelector("."+vn("main")))||void 0===e?void 0:e.clientHeight)||0,o=n-r,i=parseInt(t,10);i=Math.max(i-o,0),this.wwEditor.setMinHeight(i),this.mdEditor.setMinHeight(i),this.preview.setMinHeight(i)},t.prototype.getMinHeight=function(){return this.minHeight},t.prototype.isMarkdownMode=function(){return"markdown"===this.mode},t.prototype.isWysiwygMode=function(){return"wysiwyg"===this.mode},t.prototype.isViewer=function(){return!1},t.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},t.prototype.changeMode=function(t,e){if(this.mode!==t){if(this.mode=t,this.isWysiwygMode()){var n=this.toastMark.getRootNode(),r=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(r)}else{r=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(r),!e)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",t),!e){var o=this.convertor.getMappedPos();this.focus(),this.isWysiwygMode()&&at(o)?this.wwEditor.setSelection(o):Array.isArray(o)&&this.mdEditor.setSelection(o)}}},t.prototype.destroy=function(){var t=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach((function(e,n){return t.off(n)}))},t.prototype.hide=function(){this.eventEmitter.emit("hide")},t.prototype.show=function(){this.eventEmitter.emit("show")},t.prototype.setScrollTop=function(t){this.getCurrentModeEditor().setScrollTop(t)},t.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},t.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},t.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},t.prototype.setPlaceholder=function(t){this.mdEditor.setPlaceholder(t),this.wwEditor.setPlaceholder(t)},t.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},t}();function F2(t){for(var e,n,r=arguments,o=1,i="",a="",s=[0],c=function(t){1===o&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(t?r[t]:i):3===o&&(t||i)?(s[1]=t?r[t]:i,o=2):2===o&&"..."===i&&t?s[2]=zt(s[2]||{},r[t]):2===o&&i&&!t?(s[2]=s[2]||{})[i]=!0:o>=5&&(5===o?((s[2]=s[2]||{})[n]=t?i?i+r[t]:r[t]:i,o=6):(t||i)&&(s[2][n]+=t?i+r[t]:i)),i=""},l=0;l<t.length;l++){l&&(1===o&&c(),c(l));for(let r=0;r<t[l].length;r++)e=t[l][r],1===o?"<"===e?(c(),s=[s,"",null],o=3):i+=e:4===o?"--"===i&&">"===e?(o=1,i=""):i=e+i[0]:a?e===a?a="":i+=e:'"'===e||"'"===e?a=e:">"===e?(c(),o=1):o&&("="===e?(o=5,n=i,i=""):"/"===e&&(o<5||">"===t[l][r+1])?(c(),3===o&&(s=s[0]),o=s,(s=s[0]).push(this.apply(null,o.slice(1))),o=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(c(),o=2):i+=e),3===o&&"!--"===i&&(o=4,s=s[0])}return c(),s.length>2?s.slice(1):s[1]}function H2(t){return"boolean"===typeof t||t instanceof Boolean}var z2=H2,V2=function(){function t(t){this.current=t,this.root=t,this.entering=!0}return t.prototype.walk=function(){var t=this,e=t.entering,n=t.current;return n?(e?n.firstChild?(this.current=n.firstChild,this.entering=!0):this.entering=!1:n===this.root?this.current=null:n.next?(this.current=n.next,this.entering=!0):(this.current=n.parent,this.entering=!1),{vnode:n,entering:e}):null},t}(),q2=function(){function t(t,e,n){this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=t,this.props=e,this.children=n,this.props.children=n,e.ref&&(this.ref=e.ref,delete e.ref),e.key&&(this.key=e.key,delete e.key)}return t.prototype.walker=function(){return new V2(this)},t.removalNodes=[],t}();function _2(t){return new q2("TEXT_NODE",{nodeValue:t},[])}function $2(t,e){var n=t;z2(t)||null==t?n=null:(k(t)||at(t))&&(n=_2(String(t))),n&&e.push(n)}function U2(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=[];return n.forEach((function(t){Array.isArray(t)?t.forEach((function(t){$2(t,o)})):$2(t,o)})),new q2(t,e||{},o)}var W2=F2.bind(U2);function J2(t){return t===Object(t)}var K2=J2;function G2(t){var e;return"TEXT_NODE"===t.type?e=document.createTextNode(t.props.nodeValue):(e=document.createElement(t.type),Y2(e,{},t.props)),e}function X2(t,e){t.node?e.removeChild(t.node):X2(t.firstChild,e)}function Z2(t,e,n){Object.keys(e).forEach((function(r){if(/^on/.test(r)){if(!n[r]||e[r]!==n[r]){var o=r.slice(2).toLowerCase();t.removeEventListener(o,e[r])}}else"children"===r||n[r]||yn(t)||t.removeAttribute(r)})),Y2(t,e,n,(function(t){return!At(e[t],n[t])}))}var Q2=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Y2(t,e,n,r){Object.keys(n).forEach((function(o){if(!r||r(o))if(/^on/.test(o)){var i=o.slice(2).toLowerCase();t.addEventListener(i,n[o])}else"nodeValue"===o?t[o]=n[o]:"style"===o&&K2(n[o])?t3(t,e[o],n[o]):"children"!==o&&(!1===n[o]?t.removeAttribute(o):t.setAttribute(o,n[o]))}))}function t3(t,e,n){e&&Object.keys(e).forEach((function(e){t.style[e]=""})),Object.keys(n).forEach((function(e){var r=n[e];t.style[e]=at(r)&&!Q2.test(e)?r+"px":r}))}function e3(t){if(q2.removalNodes.forEach((function(t){return r3(t)})),t){var e=void 0,n=t.walker();while(e=n.walk())if(t=e.vnode,e.entering)r3(t);else if(qe(t.type)){var r=t.component;if(!t.old&&r.mounted&&r.mounted(),t.old&&r.updated){var o=r.prevProps||{};r.updated(o)}}}}function n3(t){var e=t.parent;while(!e.node)e=e.parent;return e.node}function r3(t){if(t&&t.parent){if(t.node){var e=n3(t);"A"===t.effect?e.appendChild(t.node):"U"===t.effect&&Z2(t.node,t.old.props,t.props)}if("D"===t.effect){var n=void 0,r=t.walker();while(n=r.walk())if(t=n.vnode,!n.entering)if(qe(t.type)){var o=t.component;o.beforeDestroy&&o.beforeDestroy()}else{e=n3(t);X2(t,e)}}t.ref&&(t.component?t.ref(t.component):t.node&&t.ref(t.node))}}function o3(t,e){var n=e.props,r=e.component;return r?(r.prevProps=r.props,r.props=e.props,r):new t(n)}function i3(t){var e=t;while(t&&!t.skip){if(qe(t.type)){var n=o3(t.type,t);n.vnode=t,t.component=n,t.props.children=t.children=[n.render()],s3(t)}else t.node||(t.node=G2(t)),s3(t);if(t.firstChild)t=t.firstChild;else{while(t&&t.parent&&!t.next)if(t=t.parent,t===e)break;t=t.next}}}function a3(t,e){return t&&e&&e.type===t.type&&(!e.key||e.key===t.key)}function s3(t){var e=t.children,n=t.old?t.old.firstChild:null,r=null;e.forEach((function(e,o){var i=a3(n,e);i&&(e.old=n,e.parent=t,e.node=n.node,e.component=n.component,e.effect="U"),e&&!i&&(e.old=null,e.parent=t,e.node=null,e.effect="A"),n&&!i&&(q2.removalNodes.push(n),n.effect="D"),n&&(n=n.next),0===o?t.firstChild=e:e&&(r.next=e),r=e}));var o=Rt(e);if(!e.length)while(n)q2.removalNodes.push(n),n.effect="D",n=n.next;while(n&&o)n&&o.old!==n&&(q2.removalNodes.push(n),n.effect="D",n=n.next)}function c3(t){t.effect="D",q2.removalNodes=[t],e3(),q2.removalNodes=[]}function l3(t){var e=t.vnode;e.effect="U",e.old=e,e.next&&(e.next.skip=!0),q2.removalNodes=[],i3(e),e3(e),e.next&&(e.next.skip=!1)}function u3(t,e){var n=new q2(t.tagName.toLowerCase(),{},[e]);return n.node=t,q2.removalNodes=[],i3(n),e3(n),function(){return c3(n.firstChild)}}var p3,d3=function(){function t(t){this.props=t,this.state={},this.refs={}}return t.prototype.setState=function(t){var e=f(f({},this.state),t);At(this.state,e)||(this.state=e,l3(this))},t}(),f3=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hide:!1},n}return d(e,t),e.prototype.show=function(){this.setState({hide:!1})},e.prototype.hide=function(){this.setState({hide:!0})},e.prototype.render=function(){var t=this.props,e=t.editorType,n=t.eventEmitter;return W2(p3||(p3=m(['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style="display: ','">\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ",'\n        </div>\n        <div\n          class="tab-item','"\n          onClick=',"\n        >\n          ","\n        </div>\n      </div>\n    "])),vn("mode-switch"),this.state.hide?"none":"block","markdown"===e?" active":"",(function(){n.emit("needChangeMode","markdown")}),EY.get("Markdown"),"wysiwyg"===e?" active":"",(function(){n.emit("needChangeMode","wysiwyg")}),EY.get("WYSIWYG"))},e}(d3);function h3(t,e){var n,r;function o(){r=Array.prototype.slice.call(arguments),window.clearTimeout(n),n=window.setTimeout((function(){t.apply(null,r)}),e)}return e=e||0,o}var m3=h3,v3=m3;function g3(t,e){var n,r,o,i,a=!0,s=function(e){t.apply(null,e),n=null};function c(){if(i=Array.prototype.slice.call(arguments),a)return s(i),void(a=!1);o=Number(new Date),n=n||o,r(i),o-n>=e&&s(i)}function l(){a=!0,n=null}return e=e||0,r=v3(s,e),c.reset=l,c}var y3=g3,b3=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),w3="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,k3=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),x3=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(k3):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)}}(),C3=2;function M3(t,e){var n=!1,r=!1,o=0;function i(){n&&(n=!1,t()),r&&s()}function a(){x3(i)}function s(){var t=Date.now();if(n){if(t-o<C3)return;r=!0}else n=!0,r=!1,setTimeout(a,e);o=t}return s}var T3=20,S3=["top","right","bottom","left","width","height","size","weight"],O3="undefined"!==typeof MutationObserver,E3=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=M3(this.refresh.bind(this),T3)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){w3&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),O3?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){w3&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,r=S3.some((function(t){return!!~n.indexOf(t)}));r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),N3=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},D3=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||k3},L3=V3(0,0,0,0);function I3(t){return parseFloat(t)||0}function A3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){var r=t["border-"+n+"-width"];return e+I3(r)}),0)}function R3(t){for(var e=["top","right","bottom","left"],n={},r=0,o=e;r<o.length;r++){var i=o[r],a=t["padding-"+i];n[i]=I3(a)}return n}function P3(t){var e=t.getBBox();return V3(0,0,e.width,e.height)}function B3(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return L3;var r=D3(t).getComputedStyle(t),o=R3(r),i=o.left+o.right,a=o.top+o.bottom,s=I3(r.width),c=I3(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==e&&(s-=A3(r,"left","right")+i),Math.round(c+a)!==n&&(c-=A3(r,"top","bottom")+a)),!F3(t)){var l=Math.round(s+i)-e,u=Math.round(c+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(u)&&(c-=u)}return V3(o.left,o.top,s,c)}var j3=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof D3(t).SVGGraphicsElement}:function(t){return t instanceof D3(t).SVGElement&&"function"===typeof t.getBBox}}();function F3(t){return t===D3(t).document.documentElement}function H3(t){return w3?j3(t)?P3(t):B3(t):L3}function z3(t){var e=t.x,n=t.y,r=t.width,o=t.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return N3(a,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),a}function V3(t,e,n,r){return{x:t,y:e,width:n,height:r}}var q3=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=V3(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=H3(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),_3=function(){function t(t,e){var n=z3(e);N3(this,{target:t,contentRect:n})}return t}(),$3=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new b3,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof D3(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new q3(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof D3(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new _3(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),U3="undefined"!==typeof WeakMap?new WeakMap:new b3,W3=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=E3.getInstance(),r=new $3(e,n,this);U3.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach((function(t){W3.prototype[t]=function(){var e;return(e=U3.get(this))[t].apply(e,arguments)}}));var J3,K3,G3,X3,Z3,Q3,Y3,t5,e5,n5,r5,o5,i5,a5,s5,c5,l5=function(){return"undefined"!==typeof k3.ResizeObserver?k3.ResizeObserver:W3}(),u5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.execCommand=function(t){var e=En(t.target,"li");this.props.execCommand("heading",{level:Number(e.getAttribute("data-level"))})},e.prototype.render=function(){var t=this;return W2(K3||(K3=m(["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "],["\n      <ul\n        onClick=",'\n        aria-role="menu"\n        aria-label="','"\n      >\n        ','\n        <li data-type="Paragraph" aria-role="menuitem">\n          <div>',"</div>\n        </li>\n      </ul>\n    "])),(function(e){return t.execCommand(e)}),EY.get("Headings"),[1,2,3,4,5,6].map((function(t){return W2(J3||(J3=m(['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "],['\n              <li data-level="','" data-type="Heading" aria-role="menuitem">\n                <',">"," ","</$>\n              </li>\n            "])),t,"h"+t,EY.get("Heading"),t)})),EY.get("Paragraph"))},e}(d3),p5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.toggleTab=function(t,e){this.props.onClick(t,e)},e.prototype.render=function(){var t=this;return W2(X3||(X3=m(['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "],['\n      <div class="','" aria-role="tabpanel">\n        ',"\n      </div>\n    "])),vn("tabs"),this.props.tabs.map((function(e){var n=e.name,r=e.text,o=t.props.activeTab===n;return W2(G3||(G3=m(['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "],['\n            <div\n              class="tab-item','"\n              onClick=','\n              aria-role="tab"\n              aria-label="','"\n              aria-selected="','"\n              tabindex="','"\n            >\n              ',"\n            </div>\n          "])),o?" active":"",(function(e){return t.toggleTab(e,n)}),EY.get(r),o?"true":"false",o?"0":"-1",EY.get(r))})))},e}(d3),d5="ui",f5=function(t){function e(e){var n=t.call(this,e)||this;return n.initialize=function(t){void 0===t&&(t="file");var e=n.refs.url;e.value="",n.refs.altText.value="",n.refs.file.value="",ot(e,"wrong"),n.setState({activeTab:t,file:null,fileNameElClassName:""})},n.execCommand=function(){"file"===n.state.activeTab?n.emitAddImageBlob():n.emitAddImage()},n.toggleTab=function(t,e){e!==n.state.activeTab&&n.initialize(e)},n.showFileSelectBox=function(){n.refs.file.click()},n.changeFile=function(t){var e=t.target.files;(null===e||void 0===e?void 0:e.length)&&n.setState({file:e[0]})},n.state={activeTab:"file",file:null,fileNameElClassName:""},n.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],n}return d(e,t),e.prototype.emitAddImageBlob=function(){var t=this,e=this.refs.file.files,n=this.refs.altText,r=" wrong";if(null===e||void 0===e?void 0:e.length){r="";var o=e.item(0),i=function(e,r){return t.props.execCommand("addImage",{imageUrl:e,altText:r||n.value})};this.props.eventEmitter.emit("addImageBlobHook",o,i,d5)}this.setState({fileNameElClassName:r})},e.prototype.emitAddImage=function(){var t=this.refs.url,e=this.refs.altText,n=t.value,r=e.value||"image";ot(t,"wrong"),n.length?n&&this.props.execCommand("addImage",{imageUrl:n,altText:r}):Q(t,"wrong")},e.prototype.preventSelectStart=function(t){t.preventDefault()},e.prototype.updated=function(){this.props.show||this.initialize()},e.prototype.render=function(){var t=this,e=this.state,n=e.activeTab,r=e.file,o=e.fileNameElClassName;return W2(Z3||(Z3=m(['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <'," tabs="," activeTab="," onClick=",' />\n        <div style="display:','">\n          <label for="toastuiImageUrlInput">','</label>\n          <input\n            id="toastuiImageUrlInput"\n            type="text"\n            ref=','\n          />\n        </div>\n        <div style="display:',';position: relative;">\n          <label for="toastuiImageFileInput">','</label>\n          <span\n            class="',"",'"\n            onClick=',"\n            onSelectstart=","\n          >\n            ",'\n          </span>\n          <button\n            type="button"\n            class="','"\n            onClick=',"\n          >\n            ",'\n          </button>\n          <input\n            id="toastuiImageFileInput"\n            type="file"\n            accept="image/*"\n            onChange=',"\n            ref=",'\n          />\n        </div>\n        <label for="toastuiAltTextInput">','</label>\n        <input\n          id="toastuiAltTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),EY.get("Insert image"),p5,this.tabs,n,this.toggleTab,"url"===n?"block":"none",EY.get("Image URL"),(function(e){return t.refs.url=e}),"file"===n?"block":"none",EY.get("Select image file"),vn("file-name"),r?" has-file":o,this.showFileSelectBox,this.preventSelectStart,r?r.name:EY.get("No file"),vn("file-select-button"),this.showFileSelectBox,EY.get("Choose a file"),this.changeFile,(function(e){return t.refs.file=e}),EY.get("Description"),(function(e){return t.refs.altText=e}),vn("button-container"),vn("close-button"),this.props.hidePopup,EY.get("Cancel"),vn("ok-button"),this.execCommand,EY.get("OK"))},e}(d3),h5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.execCommand=function(){var t=e.refs.url,n=e.refs.text;if(ot(t,"wrong"),ot(n,"wrong"),t.value.length<1)Q(t,"wrong");else{var r=H(e.props.initialValues.linkUrl);r&&n.value.length<1?Q(n,"wrong"):e.props.execCommand("addLink",{linkUrl:t.value,linkText:n.value})}},e}return d(e,t),e.prototype.initialize=function(){var t=this.props.initialValues,e=t.linkUrl,n=t.linkText,r=this.refs.url,o=this.refs.text;ot(r,"wrong"),ot(o,"wrong","disabled"),o.removeAttribute("disabled"),e&&(Q(o,"disabled"),o.setAttribute("disabled","disabled")),r.value=e||"",o.value=n||""},e.prototype.mounted=function(){this.initialize()},e.prototype.updated=function(t){!t.show&&this.props.show&&this.initialize()},e.prototype.render=function(){var t=this;return W2(Q3||(Q3=m(['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "],['\n      <div aria-label="','">\n        <label for="toastuiLinkUrlInput">','</label>\n        <input\n          id="toastuiLinkUrlInput"\n          type="text"\n          ref=','\n        />\n        <label for="toastuiLinkTextInput">','</label>\n        <input\n          id="toastuiLinkTextInput"\n          type="text"\n          ref=','\n        />\n        <div class="','">\n          <button type="button" class="','" onClick=',">\n            ",'\n          </button>\n          <button type="button" class="','" onClick=',">\n            ","\n          </button>\n        </div>\n      </div>\n    "])),EY.get("Insert link"),EY.get("URL"),(function(e){return t.refs.url=e}),EY.get("Link text"),(function(e){return t.refs.text=e}),vn("button-container"),vn("close-button"),this.props.hidePopup,EY.get("Cancel"),vn("ok-button"),this.execCommand,EY.get("OK"))},e}(d3),m5=20,v5=20,g5=5,y5=14,b5=5,w5=9,k5=1,x5=1,C5=1,M5=function(t){function e(e){var n=t.call(this,e)||this;return n.extendSelectionRange=function(t){var e=t.pageX,r=t.pageY,o=e-n.offsetRect.left,i=r-n.offsetRect.top,a=n.getSelectionRangeByOffset(o,i);n.setState(f({},a))},n.execCommand=function(){n.props.execCommand("addTable",{rowCount:n.state.rowIdx+1,columnCount:n.state.colIdx+1})},n.state={rowIdx:-1,colIdx:-1},n}return d(e,t),e.prototype.getDescription=function(){return-1===this.state.colIdx?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},e.prototype.getBoundByRange=function(t,e){return{width:(t+1)*m5,height:(e+1)*v5}},e.prototype.getRangeByOffset=function(t,e){return{colIdx:Math.floor(t/m5),rowIdx:Math.floor(e/v5)}},e.prototype.getTableRange=function(){var t=this.state,e=t.colIdx,n=t.rowIdx,r=Math.max(e,b5),o=Math.max(n,g5);return e>=b5&&r<w5&&(r+=1),n>=g5&&o<y5&&(o+=1),{colIdx:r+1,rowIdx:o+1}},e.prototype.getSelectionAreaBound=function(){var t=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),e=t.width,n=t.height;return e||n?{width:e-C5,height:n-C5,display:"block"}:{display:"none"}},e.prototype.getSelectionRangeByOffset=function(t,e){var n=this.getRangeByOffset(t,e);return n.rowIdx=Math.min(Math.max(n.rowIdx,k5),y5),n.colIdx=Math.min(Math.max(n.colIdx,x5),w5),n},e.prototype.updated=function(){if(this.props.show){if(-1===this.state.colIdx&&-1===this.state.rowIdx){var t=this.refs.tableEl.getBoundingClientRect(),e=t.left,n=t.top;this.offsetRect={left:window.pageXOffset+e,top:window.pageYOffset+n}}}else this.setState({colIdx:-1,rowIdx:-1})},e.prototype.createTableArea=function(t){for(var e=t.colIdx,n=t.rowIdx,r=[],o=0;o<n;o+=1){for(var i=[],a=0;a<e;a+=1){var s=vn("table-cell")+(o>0?"":" header");i.push(W2(Y3||(Y3=m(['<div class="','"></div>'],['<div class="','"></div>'])),s))}r.push(W2(t5||(t5=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),vn("table-row"),i))}return W2(e5||(e5=m(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),vn("table"),r)},e.prototype.render=function(){var t=this,e=this.getTableRange(),n=this.getSelectionAreaBound();return W2(n5||(n5=m(['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "],['\n      <div aria-label="','">\n        <div\n          class="','"\n          ref=',"\n          onMousemove=","\n          onClick=","\n        >\n          ",'\n          <div class="','" style=','></div>\n        </div>\n        <p class="','">',"</p>\n      </div>\n    "])),EY.get("Insert table"),vn("table-selection"),(function(e){return t.refs.tableEl=e}),this.extendSelectionRange,this.execCommand,this.createTableArea(e),vn("table-selection-layer"),n,vn("table-description"),this.getDescription())},e}(d3),T5=function(t){function e(e){var n=t.call(this,e)||this;return e.eventEmitter.listen("closePopup",n.props.hidePopup),n}return d(e,t),e.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},e.prototype.render=function(){var t=this;return W2(r5||(r5=m(["<div ref=","></div>"],["<div ref=","></div>"])),(function(e){return t.refs.el=e}))},e}(d3);function S5(t){return k(t)?E5(t):t}function O5(){var t=document.createElement("label"),e=document.createElement("input"),n=document.createElement("span");t.className="scroll-sync active",e.type="checkbox",e.checked=!0,n.className="switch";var r=function(n){return e.addEventListener("change",(function(e){var r=e.target.checked;r?Q(t,"active"):ot(t,"active"),n("toggleScrollSync",{active:r})}))};return t.appendChild(e),t.appendChild(n),{name:"scrollSync",el:t,onMounted:r}}function E5(t){var e;switch(t){case"heading":e={name:"heading",className:"heading",tooltip:EY.get("Headings"),state:"heading"};break;case"bold":e={name:"bold",className:"bold",command:"bold",tooltip:EY.get("Bold"),state:"strong"};break;case"italic":e={name:"italic",className:"italic",command:"italic",tooltip:EY.get("Italic"),state:"emph"};break;case"strike":e={name:"strike",className:"strike",command:"strike",tooltip:EY.get("Strike"),state:"strike"};break;case"hr":e={name:"hr",className:"hrline",command:"hr",tooltip:EY.get("Line"),state:"thematicBreak"};break;case"quote":e={name:"quote",className:"quote",command:"blockQuote",tooltip:EY.get("Blockquote"),state:"blockQuote"};break;case"ul":e={name:"ul",className:"bullet-list",command:"bulletList",tooltip:EY.get("Unordered list"),state:"bulletList"};break;case"ol":e={name:"ol",className:"ordered-list",command:"orderedList",tooltip:EY.get("Ordered list"),state:"orderedList"};break;case"task":e={name:"task",className:"task-list",command:"taskList",tooltip:EY.get("Task"),state:"taskList"};break;case"table":e={name:"table",className:"table",tooltip:EY.get("Insert table"),state:"table"};break;case"image":e={name:"image",className:"image",tooltip:EY.get("Insert image")};break;case"link":e={name:"link",className:"link",tooltip:EY.get("Insert link")};break;case"code":e={name:"code",className:"code",command:"code",tooltip:EY.get("Code"),state:"code"};break;case"codeblock":e={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:EY.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":e={name:"indent",className:"indent",command:"indent",tooltip:EY.get("Indent")};break;case"outdent":e={name:"outdent",className:"outdent",command:"outdent",tooltip:EY.get("Outdent")};break;case"scrollSync":e=O5();break;case"more":e={name:"more",className:"more",tooltip:EY.get("More")};break}return"scrollSync"!==e.name&&(e.className+=" "+vn("toolbar-icons")),e}function N5(t,e){var n=e.el,r=e.pos,o=e.popup,i=e.initialValues;switch(t){case"heading":return{render:function(t){return W2(o5||(o5=m(["<"," ..."," />"],["<"," ..."," />"])),u5,t)},className:vn("popup-add-heading"),fromEl:n,pos:r};case"link":return{render:function(t){return W2(i5||(i5=m(["<"," ..."," />"],["<"," ..."," />"])),h5,t)},className:vn("popup-add-link"),fromEl:n,pos:r,initialValues:i};case"image":return{render:function(t){return W2(a5||(a5=m(["<"," ..."," />"],["<"," ..."," />"])),f5,t)},className:vn("popup-add-image"),fromEl:n,pos:r};case"table":return{render:function(t){return W2(s5||(s5=m(["<"," ..."," />"],["<"," ..."," />"])),M5,t)},className:vn("popup-add-table"),fromEl:n,pos:r};case"customPopupBody":return o?f({render:function(t){return W2(c5||(c5=m(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),T5,t,o.body)},fromEl:n,pos:r},o):null;default:return null}}function D5(t){t.hidden=t.length===t.filter((function(t){return t.hidden})).length}function L5(t,e){var n=function(t){return t.hidden="scrollSync"===t.name&&e,t};return t.reduce((function(t,e){t.push(e.map((function(t){return n(S5(t))})));var r=t[(t.length||1)-1];return r&&D5(r),t}),[])}function I5(t,e){t.forEach((function(t){t.forEach((function(t){return t.hidden="scrollSync"===t.name&&e})),D5(t)}))}var A5,R5,P5=20,B5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleMousedown=function(t){En(t.target,"."+vn("popup"))||En(t.target,e.props.info.fromEl)||e.props.hidePopup()},e}return d(e,t),e.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown)},e.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},e.prototype.updated=function(t){var e=this.props,n=e.show,r=e.info;if(n&&r.pos&&t.show!==n){var o=f({},r.pos),i=this.refs.el.offsetWidth,a=En(this.refs.el,"."+vn("toolbar")),s=a.offsetWidth;o.left+i>=s&&(o.left=s-i-P5),At(this.state.popupPos,o)||this.setState({popupPos:o})}},e.prototype.render=function(){var t=this,e=this.props,n=e.info,r=e.show,o=e.hidePopup,i=e.eventEmitter,a=e.execCommand,s=n||{},c=s.className,l=void 0===c?"":c,u=s.style,p=s.render,d=s.initialValues,h=void 0===d?{}:d,v=f(f({display:r?"block":"none"},u),this.state.popupPos);return W2(A5||(A5=m(['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div\n        class="'," ",'"\n        style=',"\n        ref=",'\n        aria-role="dialog"\n      >\n        <div class="','">\n          ',"\n        </div>\n      </div>\n    "])),vn("popup"),l,v,(function(e){return t.refs.el=e}),vn("popup-body"),p&&p({eventEmitter:i,show:r,hidePopup:o,execCommand:a,initialValues:h}))},e}(d3),j5=6;function F5(t){return function(e){function n(t){var n=e.call(this,t)||this;return n.showTooltip=function(t){var e=n.props.item.tooltip;if(!n.props.disabled&&e){var r=n.getBound(t),o=r.left+j5+"px",i=r.top+j5+"px";R(n.props.tooltipRef.current,{display:"block",left:o,top:i}),n.props.tooltipRef.current.querySelector(".text").textContent=e}},n.hideTooltip=function(){R(n.props.tooltipRef.current,"display","none")},n.state={active:!1},n.addEvent(),n}return d(n,e),n.prototype.addEvent=function(){var t=this,e=this.props,n=e.item,r=e.eventEmitter;n.state&&r.listen("changeToolbarState",(function(e){var r=e.toolbarState,o=!!r[n.state];t.setState({active:o})}))},n.prototype.getBound=function(t){var e=Nn(t,En(t,"."+vn("toolbar"))),n=e.offsetLeft,r=e.offsetTop;return{left:n,top:t.offsetHeight+r}},n.prototype.render=function(){return W2(R5||(R5=m(["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n        />\n      "],["\n        <","\n          ...","\n          active=","\n          showTooltip=","\n          hideTooltip=","\n          getBound=","\n        />\n      "])),t,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound)},n}(d3)}var H5,z5,V5,q5,_5,$5,U5,W5,J5,K5,G5,X5,Z5,Q5,Y5=80,t6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.execCommand=function(){var t=e.props,n=t.item,r=t.execCommand,o=t.setPopupInfo,i=t.getBound,a=n.command,s=n.name,c=n.popup;if(a)r(a);else{var l=c?"customPopupBody":s,u=N5(l,{el:e.refs.el,pos:i(e.refs.el),popup:c});u&&o(u)}},e}return d(e,t),e.prototype.mounted=function(){this.setItemWidth()},e.prototype.updated=function(t){t.item.name!==this.props.item.name&&this.setItemWidth()},e.prototype.setItemWidth=function(){var t=this.props,e=t.setItemWidth,n=t.item;e&&e(n.name,On(this.refs.el)+(n.hidden?Y5:0))},e.prototype.render=function(){var t=this,e=this.props,n=e.hideTooltip,r=e.disabled,o=e.item,i=e.active,a=f({display:o.hidden?"none":null},o.style),s=(o.className||"")+(i?" active":"");return W2(H5||(H5=m(["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "],["\n      <button\n        ref=",'\n        type="button"\n        style=',"\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n        disabled=","\n        aria-label=","\n      >\n        ","\n      </button>\n    "])),(function(e){return t.refs.el=e}),a,s,this.execCommand,this.showTooltip,n,!!r,o.text||o.tooltip||"",o.text||"")},e}(d3),e6=F5(t6),n6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.showPopup=function(){var t=N5("customPopupBody",{el:e.refs.el,pos:e.props.getBound(e.refs.el),popup:e.props.item.popup});t&&e.props.setPopupInfo(t)},e}return d(e,t),e.prototype.mounted=function(){var t=this.props,e=t.setItemWidth,n=t.item;this.refs.el.appendChild(n.el),e&&e(n.name,On(this.refs.el)),n.onMounted&&n.onMounted(this.props.execCommand)},e.prototype.updated=function(t){var e,n=this.props,r=n.item,o=n.active,i=n.disabled;t.active===o&&t.disabled===i||null===(e=r.onUpdated)||void 0===e||e.call(r,{active:o,disabled:i})},e.prototype.render=function(){var t=this,e=this.props,n=e.disabled,r=e.item,o={display:r.hidden?"none":"inline-block"},i=function(t){return n?null:t};return W2(z5||(z5=m(["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "],["\n      <div\n        ref=","\n        style=","\n        class=","\n        onClick=","\n        onMouseover=","\n        onMouseout=","\n      ></div>\n    "])),(function(e){return t.refs.el=e}),o,vn("toolbar-item-wrapper"),i(this.showPopup),i(this.showTooltip),i(this.props.hideTooltip))},e}(d3),r6=F5(n6),o6=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.group,r=e.hiddenDivider,o=n.hidden?{display:"none"}:null,i=r?{display:"none"}:null;return W2(q5||(q5=m(['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        ",'\n        <div class="','" style=',"></div>\n      </div>\n    "])),vn("toolbar-group"),o,n.map((function(e){var n=e.el?r6:e6;return W2(V5||(V5=m(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),n,e.name,t.props,e)})),vn("toolbar-divider"),i)},e}(d3),i6=4,a6=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){var e=t.target;En(e,"."+vn("dropdown-toolbar"))||En(e,".more")||n.setState({showDropdown:!1,dropdownPos:null})},n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.state={showDropdown:!1,dropdownPos:null},n}return d(e,t),e.prototype.getBound=function(){var t=this.props.getBound(this.refs.el);return t.top+=i6,f(f({},t),{left:null,right:10})},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.render=function(){var t=this,e=this.state,n=e.showDropdown,r=e.dropdownPos,o=this.props,i=o.disabled,a=o.item,s=o.items,c=o.hideTooltip,l=s.filter((function(t){return!t.hidden})),u=l.length?null:{display:"none"},p=n?null:{display:"none"};return W2($5||($5=m(['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "],['\n      <div class="','" style=',">\n        <button\n          ref=",'\n          type="button"\n          class=',"\n          onClick=","\n          onMouseover=","\n          onMouseout=","\n          disabled=",'\n        ></button>\n        <div\n          class="','"\n          style=',"\n          ref=","\n        >\n          ","\n        </div>\n      </div>\n    "])),vn("toolbar-group"),u,(function(e){return t.refs.el=e}),a.className,(function(){return t.setState({showDropdown:!0})}),this.showTooltip,c,i,vn("dropdown-toolbar"),f(f({},p),r),(function(e){return t.refs.dropdownEl=e}),l.length?l.map((function(e,n){var r;return W2(_5||(_5=m(["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "],["\n                  <","\n                    group=","\n                    hiddenDivider=","\n                    ...","\n                  />\n                "])),o6,e,n===l.length-1||(null===(r=l[n+1])||void 0===r?void 0:r.hidden),t.props)})):null)},e}(d3),s6=F5(a6),c6=50,l6=function(t){function e(e){var n=t.call(this,e)||this;return n.toggleTab=function(t,e){var r=n.props.eventEmitter;if(n.state.activeTab!==e){var o="write"===e?"changePreviewTabWrite":"changePreviewTabPreview";r.emit(o),n.setState({activeTab:e})}},n.setItemWidth=function(t,e){n.itemWidthMap[t]=e},n.setPopupInfo=function(t){n.setState({showPopup:!0,popupInfo:t})},n.openPopup=function(t,e){void 0===e&&(e={});var r=document.querySelector("."+vn("toolbar-group")+" ."+t);if(r){var o=Nn(r,En(r,"."+vn("toolbar"))),i=o.offsetLeft,a=o.offsetTop,s=N5(t,{el:r,pos:{left:i,top:r.offsetHeight+a},initialValues:e});s&&n.setPopupInfo(s)}},n.hidePopup=function(){n.state.showPopup&&n.setState({showPopup:!1})},n.execCommand=function(t,e){var r=n.props.eventEmitter;r.emit("command",t,e),n.hidePopup()},n.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],n.itemWidthMap={},n.initialItems=L5(e.toolbarItems||[],n.hiddenScrollSync()),n.state={items:n.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},n.tooltipRef={current:null},n.resizeObserver=new l5((function(){return n.handleResize()})),n.addEvent(),n}return d(e,t),e.prototype.insertToolbarItem=function(t,e){var n=t.groupIndex,r=t.itemIndex,o=this.initialItems[n];e=S5(e),o?o.splice(r,0,e):this.initialItems.push([e]),this.setState(this.classifyToolbarItems())},e.prototype.removeToolbarItem=function(t){var e=this;T(this.initialItems,(function(n){var r=!1;return T(n,(function(o,i){return o.name!==t||(r=!0,n.splice(i,1),e.setState(e.classifyToolbarItems()),!1)})),!r}))},e.prototype.addEvent=function(){var t=this,e=this.props.eventEmitter;this.handleResize=y3((function(){t.setState({items:t.initialItems,dropdownItems:[]}),t.setState(t.classifyToolbarItems())}),200),e.listen("openPopup",this.openPopup)},e.prototype.appendTooltipToRoot=function(){var t='<div class="'+vn("tooltip")+'" style="display:none">\n        <div class="arrow"></div>\n        <span class="text"></span>\n      </div>';this.tooltipRef.current=Sn(t,this.refs.el)},e.prototype.hiddenScrollSync=function(){return"wysiwyg"===this.props.editorType||"tab"===this.props.previewStyle},e.prototype.movePrevItemToDropdownToolbar=function(t,e,n,r){var o=function(t){var e=t.pop();e&&r.push(e)};if(t>1)o(n);else{var i=Rt(e);i&&o(i)}},e.prototype.classifyToolbarItems=function(){var t=this,e=0,n=this.refs.el.clientWidth,r=this.refs.el.querySelector("."+vn("toolbar-divider")),o=r?On(r):0,i=[],a=[],s=!1;return this.initialItems.forEach((function(r,c){var l=[],u=[];r.forEach((function(r,o){r.hidden||(e+=t.itemWidthMap[r.name],e>n-c6?(s||(t.movePrevItemToDropdownToolbar(o,i,l,u),s=!0),u.push(r)):l.push(r))})),l.length&&(D5(l),i.push(l)),u.length&&(D5(u),a.push(u)),c<t.state.items.length-1&&(e+=o)})),{items:i,dropdownItems:a}},e.prototype.mounted=function(){"tab"===this.props.previewStyle&&this.props.eventEmitter.emit("changePreviewTabWrite"),this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},e.prototype.updated=function(t){var e=this.props,n=e.editorType,r=e.previewStyle,o=e.eventEmitter,i=r!==t.previewStyle,a=n!==t.editorType;if(i||a){I5(this.initialItems,this.hiddenScrollSync());var s=this.classifyToolbarItems();(i||"tab"===r&&"markdown"===n)&&(o.emit("changePreviewTabWrite"),s.activeTab="write"),this.setState(s)}},e.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),Cn(this.tooltipRef.current)},e.prototype.render=function(){var t=this,e=this.props,n=e.previewStyle,r=e.eventEmitter,o=e.editorType,i=this.state,a=i.popupInfo,s=i.showPopup,c=i.activeTab,l=i.items,u=i.dropdownItems,p={eventEmitter:r,tooltipRef:this.tooltipRef,disabled:"markdown"===o&&"tab"===n&&"preview"===c,execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},d="tab"===n?{borderTopLeftRadius:0}:null;return W2(W5||(W5=m(['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "],['\n      <div class="','">\n        <div\n          class="','"\n          style="display: ','"\n        >\n          <'," tabs="," activeTab="," onClick=",' />\n        </div>\n        <div\n          class="','"\n          ref=',"\n          style=","\n        >\n          ","\n          <","\n            item=","\n            items=","\n            ...","\n          />\n        </div>\n        <","\n          info=","\n          show=","\n          eventEmitter=","\n          hidePopup=","\n          execCommand=","\n        />\n      </div>\n    "])),vn("toolbar"),vn("md-tab-container"),"wysiwyg"===o||"vertical"===n?"none":"block",p5,this.tabs,c,this.toggleTab,vn("defaultUI-toolbar"),(function(e){return t.refs.el=e}),d,l.map((function(e,n){var r;return W2(U5||(U5=m(["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "],["\n              <","\n                group=","\n                hiddenDivider=","\n                setItemWidth=","\n                ...","\n              />\n            "])),o6,e,n===l.length-1||(null===(r=l[n+1])||void 0===r?void 0:r.hidden),t.setItemWidth,p)})),s6,S5("more"),u,p,B5,a,s,r,this.hidePopup,this.execCommand)},e}(d3),u6=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClickDocument=function(t){En(t.target,"."+vn("context-menu"))||n.setState({pos:null})},n.state={pos:null,menuGroups:[]},n.addEvent(),n}return d(e,t),e.prototype.addEvent=function(){var t=this;this.props.eventEmitter.listen("contextmenu",(function(e){var n=e.pos,r=e.menuGroups;t.setState({pos:n,menuGroups:r})}))},e.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},e.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},e.prototype.getMenuGroupElements=function(){var t=this,e=this.state,n=e.pos,r=e.menuGroups;return n?r.reduce((function(e,n){var r=[];return n.forEach((function(e){var n=e.label,o=e.className,i=void 0!==o&&o,a=e.disabled,s=e.onClick,c=function(){a||(s(),t.setState({pos:null}))};r.push(W2(J5||(J5=m(["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "],["\n                <li\n                  onClick=",'\n                  class="menu-item','"\n                  aria-role="menuitem"\n                >\n                  <span class="','">',"</span>\n                </li>\n              "])),c,a?" disabled":"",i,n))})),e.push(W2(K5||(K5=m(['<ul class="menu-group">\n              ',"\n            </ul>"],['<ul class="menu-group">\n              ',"\n            </ul>"])),r)),e}),[]):[]},e.prototype.render=function(){var t=f({display:this.state.pos?"block":"none"},this.state.pos);return W2(G5||(G5=m(['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"],['<div class="','" style=',' aria-role="menu">\n      ',"\n    </div>"])),vn("context-menu"),t,this.getMenuGroupElements())},e}(d3),p6=function(t){function e(e){var n=t.call(this,e)||this;n.changeMode=function(t){t!==n.state.editorType&&n.setState({editorType:t})},n.changePreviewStyle=function(t){t!==n.state.previewStyle&&n.setState({previewStyle:t})},n.hide=function(){n.setState({hide:!0})},n.show=function(){n.setState({hide:!1})};var r=e.editorType,o=e.previewStyle;return n.state={editorType:r,previewStyle:o,hide:!1},n.addEvent(),n}return d(e,t),e.prototype.mounted=function(){var t=this.props.slots,e=t.wwEditor,n=t.mdEditor,r=t.mdPreview;this.refs.wwContainer.appendChild(e),this.refs.mdContainer.insertAdjacentElement("afterbegin",n),this.refs.mdContainer.appendChild(r)},e.prototype.insertToolbarItem=function(t,e){this.toolbar.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.toolbar.removeToolbarItem(t)},e.prototype.render=function(){var t=this,e=this.props,n=e.eventEmitter,r=e.hideModeSwitch,o=e.toolbarItems,i=e.theme,a=this.state,s=a.hide,c=a.previewStyle,l=a.editorType,u=s?" hidden":"",p=vn("markdown"===l?"md-mode":"ww-mode"),d=vn("md")+"-"+c+"-style",f=vn(["light"!==i,i+" "]);return W2(Z5||(Z5=m(['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "],['\n      <div\n        class="',"","",'"\n        ref=',"\n      >\n        <","\n          ref=","\n          eventEmitter=","\n          previewStyle=","\n          toolbarItems=","\n          editorType=",'\n        />\n        <div\n          class="'," ",'"\n          ref=','\n        >\n          <div class="','">\n            <div\n              class="'," ",'"\n              ref=','\n            >\n              <div class="','"></div>\n            </div>\n            <div\n              class="','"\n              ref=',"\n            />\n          </div>\n        </div>\n        ","\n        <"," eventEmitter="," />\n      </div>\n    "])),f,vn("defaultUI"),u,(function(e){return t.refs.el=e}),l6,(function(e){return t.toolbar=e}),n,c,o,l,vn("main"),p,(function(e){return t.refs.editorSection=e}),vn("main-container"),vn("md-container"),d,(function(e){return t.refs.mdContainer=e}),vn("md-splitter"),vn("ww-container"),(function(e){return t.refs.wwContainer=e}),!r&&W2(X5||(X5=m(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),f3,n,l),u6,n)},e.prototype.addEvent=function(){var t=this.props.eventEmitter;t.listen("hide",this.hide),t.listen("show",this.show),t.listen("changeMode",this.changeMode),t.listen("changePreviewStyle",this.changePreviewStyle)},e}(d3),d6=function(t){function e(e){var n,r,o=t.call(this,e)||this,i=u3(o.options.el,W2(Q5||(Q5=m(["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "],["\n        <","\n          ref=","\n          eventEmitter=","\n          slots=","\n          hideModeSwitch=","\n          toolbarItems=","\n          previewStyle=","\n          editorType=","\n          theme=","\n        />\n      "])),p6,(function(t){return r=t}),o.eventEmitter,o.getEditorElements(),o.options.hideModeSwitch,o.options.toolbarItems,o.options.previewStyle,o.options.initialEditType,o.options.theme));return o.setMinHeight(o.options.minHeight),o.setHeight(o.options.height),o.defaultUI={insertToolbarItem:r.insertToolbarItem.bind(r),removeToolbarItem:r.removeToolbarItem.bind(r),destroy:i},null===(n=o.pluginInfo.toolbarItems)||void 0===n||n.forEach((function(t){var e=t.groupIndex,n=t.itemIndex,r=t.item;o.defaultUI.insertToolbarItem({groupIndex:e,itemIndex:n},r)})),o}return d(e,t),e.factory=function(t){return t.viewer?new C2(t):new e(t)},e.prototype.insertToolbarItem=function(t,e){this.defaultUI.insertToolbarItem(t,e)},e.prototype.removeToolbarItem=function(t){this.defaultUI.removeToolbarItem(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.defaultUI.destroy()},e}(j2);j2.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"}),e["a"]=d6}).call(this,n("c8ba"))},7555:function(t,e,n){"use strict";n.r(e);var r=n("7a23"),o=function(t){return Object(r["pushScopeId"])("data-v-c20b4942"),t=t(),Object(r["popScopeId"])(),t},i=Object(r["createTextVNode"])(""),a=o((function(){return Object(r["createElementVNode"])("div",{id:"markdown"},null,-1)})),s=Object(r["createTextVNode"])(""),c=Object(r["createTextVNode"])(""),l=Object(r["createTextVNode"])("");function u(t,e,n,o,u,p){var d=Object(r["resolveComponent"])("el-button"),f=Object(r["resolveComponent"])("el-input"),h=Object(r["resolveComponent"])("el-form-item"),m=Object(r["resolveComponent"])("el-option"),v=Object(r["resolveComponent"])("el-select"),g=Object(r["resolveComponent"])("el-form"),y=Object(r["resolveComponent"])("el-table-column"),b=Object(r["resolveComponent"])("el-table"),w=Object(r["resolveComponent"])("el-scrollbar"),k=Object(r["resolveComponent"])("el-dialog");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(d,{onClick:e[0]||(e[0]=function(t){return o.loadCacheBlog(!0)}),style:{"margin-bottom":"10px"},size:"mini"},{default:Object(r["withCtx"])((function(){return[i]})),_:1}),a,Object(r["createVNode"])(g,{ref:"form"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{label:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.title=e})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(h,{label:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:t.type,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.type=e}),placeholder:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(t.typeList,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:t.id,label:t.classify,value:t.classify},null,8,["label","value"])})),128)),Object(r["createVNode"])(m,{label:"",value:""}),Object(r["createVNode"])(m,{label:"",value:""})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(h,{label:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:t.desc,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.desc=e}),type:"textarea"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{type:"primary",onClick:o.onSubmit},{default:Object(r["withCtx"])((function(){return[s]})),_:1},8,["onClick"])]})),_:1})]})),_:1},512),Object(r["createVNode"])(k,{modelValue:t.cacheDialogTableVisible,"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.cacheDialogTableVisible=e}),title:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(w,{height:"400px"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{data:t.cacheBlog},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(y,{property:"title",label:"",width:"150"}),Object(r["createVNode"])(y,{property:"address",label:""},{default:Object(r["withCtx"])((function(t){return[Object(r["createVNode"])(d,{size:"mini",onClick:function(e){return o.handleCacheEdit(t.$index,t.row)}},{default:Object(r["withCtx"])((function(){return[c]})),_:2},1032,["onClick"]),Object(r["createVNode"])(d,{size:"mini",type:"danger",onClick:function(e){return o.handleCacheDelete(t.$index,t.row)}},{default:Object(r["withCtx"])((function(){return[l]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1},8,["modelValue"])],64)}var p=n("5530"),d=(n("b64b"),n("a878"),n("15c0"),n("5865")),f=(n("4f54"),n("f513"),n("5a79")),h=n("4995"),m=n("de51"),v=n("a18c"),g={mounted:function(){for(var t=this,e=JSON.parse(localStorage.getItem("cacheblog"))||{},n=0,r=[],o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];parseInt(a)>n&&(n=parseInt(a));var s=JSON.parse(e[a]);s.key=a,r.push(s)}this.cacheBlog=r,this.currentCacheKey=parseInt(n)+1,setInterval((function(){t.autoSave()}),1e3);var c=v["a"].currentRoute.value.query.id;Object(m["d"])().then((function(e){t.typeList=e.data.data})),c?Object(m["c"])({id:c}).then((function(e){console.log(e);var n=e.data.data;t.title=n.blogTitle,t.type=n.classifyId,t.desc=n.blogDescribe,t.editor=new d["a"]({el:document.querySelector("#markdown"),height:"500px",previewStyle:"vertical",initialValue:n.markdownContent})})):this.editor=new d["a"]({el:document.querySelector("#markdown"),height:"500px",previewStyle:"vertical",initialValue:"## "})},setup:function(){var t=Object(r["reactive"])({cacheBlog:[],currentCacheKey:0,title:"",desc:"",type:"",typeList:[],cacheDialogTableVisible:!1,editor:null}),e=function(){var e=v["a"].currentRoute.value.query.id;if(!(e||t.editor.getMarkdown().length<10)){var n=JSON.parse(localStorage.getItem("cacheblog"))||{};n[t.currentCacheKey]=JSON.stringify({title:t.title,content:t.editor.getMarkdown()});var r=JSON.stringify(n);localStorage.setItem("cacheblog",r)}},n=function(e,n){t.title=n.title,t.currentCacheKey=n.key,t.editor=new d["a"]({el:document.querySelector("#markdown"),height:"500px",previewStyle:"vertical",initialValue:n.content}),t.cacheDialogTableVisible=!1},o=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],r=JSON.parse(localStorage.getItem("cacheblog"))||{},o=0,i=Object.keys(r);o<i.length;o++){var a=i[o],s=JSON.parse(r[a]);s.key=a,n.push(s)}t.cacheDialogTableVisible=e,t.cacheBlog=n},i=function(t,e){var n=JSON.parse(localStorage.getItem("cacheblog"))||{};delete n[e.key],localStorage.setItem("cacheblog",JSON.stringify(n)),o(!0),Object(h["a"])({message:"",type:"success",duration:1e3})},a=function(){},s=function(){var e={id:v["a"].currentRoute.value.query.id,blogTitle:t.title,markdownContent:t.editor.getMarkdown(),classifyId:t.type,blogDescribe:t.desc},n=f["a"].service({lock:!0,text:"",spinner:"el-icon-loading",background:"#ffffffcf"});Object(m["a"])(e).then((function(t){console.log(t),n.close(),Object(h["a"])({message:"",type:"success",duration:1e3}),setTimeout((function(){v["a"].push({path:"/article"})}),1500)}))};return Object(p["a"])(Object(p["a"])({},Object(r["toRefs"])(t)),{},{handleCacheDelete:i,loadCacheBlog:o,handleCacheEdit:n,loadCache:a,onSubmit:s,autoSave:e})}},y=(n("7865"),n("d959")),b=n.n(y);const w=b()(g,[["render",u],["__scopeId","data-v-c20b4942"]]);e["default"]=w},7865:function(t,e,n){"use strict";n("3565")},"7f06":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),a="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),s="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||s&&c,p=0;p<10;p++)r[48+p]=r[96+p]=String(p);for(p=1;p<=24;p++)r[p+111]="F"+p;for(p=65;p<=90;p++)r[p]=String.fromCharCode(p+32),o[p]=String.fromCharCode(p);for(var d in r)o.hasOwnProperty(d)||(o[d]=r[d]);function f(t){var e=u&&(t.ctrlKey||t.altKey||t.metaKey)||(a||l)&&t.shiftKey&&t.key&&1==t.key.length,n=!e&&t.key||(t.shiftKey?o:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var h=n("5313"),m="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function v(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var c=i[s];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);m?o=!0:n=!0}}return e&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function g(t){var e=Object.create(null);for(var n in t)e[v(n)]=t[n];return e}function y(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function b(t){return new h["d"]({props:{handleKeyDown:w(t)}})}function w(t){var e=g(t);return function(t,n){var o,i=f(n),a=1==i.length&&" "!=i,s=e[y(i,n,!a)];if(s&&s(t.state,t.dispatch,t))return!0;if(a&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r[n.keyCode])&&o!=i){var c=e[y(o,n,!0)];if(c&&c(t.state,t.dispatch,t))return!0}else if(a&&n.shiftKey){var l=e[y(i,n,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}},8726:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return N})),n.d(e,"c",(function(){return E})),n.d(e,"d",(function(){return D}));var r=200,o=function(){};o.prototype.append=function(t){return t.length?(t=o.from(t),!this.length&&t||t.length<r&&this.leafAppend(t)||this.length<r&&t.leafPrepend(this)||this.appendInner(t)):this},o.prototype.prepend=function(t){return t.length?o.from(t).append(this):this},o.prototype.appendInner=function(t){return new a(this,t)},o.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?o.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},o.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},o.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},o.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},o.from=function(t){return t instanceof o?t:t&&t.length?new i(t):o.empty};var i=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=r)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=r)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(o);o.empty=new i([]);var a=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(o),s=o,c=s,l=n("0ac0"),u=n("5313"),p=500,d=function(t,e){this.items=t,this.eventCount=e};function f(t,e){var n;return t.forEach((function(t,r){if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}d.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){var a=this.items.get(i-1);if(a.selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,c,l=t.tr,u=[],p=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void p.push(t);if(r){p.push(new h(t.map));var a,f=t.step.map(r.slice(o));f&&l.maybeStep(f).doc&&(a=l.mapping.maps[l.mapping.maps.length-1],u.push(new h(a,null,null,u.length+p.length))),o--,a&&r.appendMap(a,o)}else l.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,c=new d(n.items.slice(0,i).append(p.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:s}},d.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,a=this.items,s=!r&&a.length?a.get(a.length-1):null,c=0;c<t.steps.length;c++){var l=t.steps[c].invert(t.docs[c]),u=new h(t.mapping.maps[c],l,e),p=void 0;(p=s&&s.merge(u))&&(u=p,c?o.pop():a=a.slice(0,a.length-1)),o.push(u),e&&(i++,e=null),r||(s=u)}var m=i-n.depth;return m>v&&(a=f(a,m),i-=m),new d(a.append(o),i)},d.prototype.remapping=function(t,e){var n=new l["a"];return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},d.prototype.addMaps=function(t){return 0==this.eventCount?this:new d(this.items.append(t.map((function(t){return new h(t)}))),this.eventCount)},d.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach((function(t){t.selection&&a--}),r);var s=e;this.items.forEach((function(e){var r=o.getMirror(--s);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),u=e.selection&&e.selection.map(o.slice(s+1,r));u&&a++,n.push(new h(c,l,u))}else n.push(new h(c))}}),r);for(var c=[],l=e;l<i;l++)c.push(new h(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),f=new d(u,a);return f.emptyItemCount()>p&&(f=f.compress(this.items.length-n.length)),f},d.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},d.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,a){if(a>=t)r.push(i),i.selection&&o++;else if(i.step){var s=i.step.map(e.slice(n)),c=s&&s.getMap();if(n--,c&&e.appendMap(c,n),s){var l=i.selection&&i.selection.map(e.slice(n));l&&o++;var u,p=new h(c.invert(),s,l),d=r.length-1;(u=r.length&&r[d].merge(p))?r[d]=u:r.push(p)}}else i.map&&n--}),this.items.length,0),new d(c.from(r.reverse()),o)},d.empty=new d(c.empty,0);var h=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};h.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new h(e.getMap().invert(),e,this.selection)}};var m=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},v=20;function g(t,e,n,r){var o,i=n.getMeta(T);if(i)return i.historyState;n.getMeta(S)&&(t=new m(t.done,t.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(a&&a.getMeta(T))return a.getMeta(T).redo?new m(t.done.addTransform(n,null,r,M(e)),t.undone,b(n.mapping.maps[n.steps.length-1]),t.prevTime):new m(t.done,t.undone.addTransform(n,null,r,M(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new m(t.done.rebased(n,o),t.undone.rebased(n,o),w(t.prevRanges,n.mapping),t.prevTime):new m(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),w(t.prevRanges,n.mapping),t.prevTime);var s=0==t.prevTime||!a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!y(n,t.prevRanges)),c=a?w(t.prevRanges,n.mapping):b(n.mapping.maps[n.steps.length-1]);return new m(t.done.addTransform(n,s?e.selection.getBookmark():null,r,M(e)),d.empty,c,n.time)}function y(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}function b(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function w(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function k(t,e,n,r){var o=M(e),i=T.get(e).spec.config,a=(r?t.undone:t.done).popEvent(e,o);if(a){var s=a.selection.resolve(a.transform.doc),c=(r?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,o),l=new m(r?c:a.remaining,r?a.remaining:c,null,0);n(a.transform.setSelection(s).setMeta(T,{redo:r,historyState:l}).scrollIntoView())}}var x=!1,C=null;function M(t){var e=t.plugins;if(C!=e){x=!1,C=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){x=!0;break}}return x}var T=new u["e"]("history"),S=new u["e"]("closeHistory");function O(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new u["d"]({key:T,state:{init:function(){return new m(d.empty,d.empty,null,0)},apply:function(e,n,r){return g(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput:function(t,e){var n="historyUndo"==e.inputType?E(t.state,t.dispatch):"historyRedo"==e.inputType&&N(t.state,t.dispatch);return n&&e.preventDefault(),n}}}})}function E(t,e){var n=T.getState(t);return!(!n||0==n.done.eventCount)&&(e&&k(n,t,e,!1),!0)}function N(t,e){var n=T.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&k(n,t,e,!0),!0)}function D(t){var e=T.getState(t);return e?e.done.eventCount:0}},de51:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n("748d");function o(){return Object(r["a"])({url:"/api/blog/listDiary",method:"get"})}function i(t){return Object(r["a"])({url:"/api/blog/list",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/api/blog/detail",method:"get",params:t})}function s(){return Object(r["a"])({url:"/api/classify/listClassify",method:"get"})}function c(t){return Object(r["a"])({url:"/api/admin/add",method:"post",data:t})}},f95e:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n("5313"),o=(n("0ac0"),function(t,e){this.match=t,this.handler="string"==typeof e?i(e):e});function i(t){return function(e,n,r,o){var i=t;if(n[1]){var a=n[0].lastIndexOf(n[1]);i+=n[0].slice(a+n[1].length),r+=a;var s=r-o;s>0&&(i=n[0].slice(a-s,a)+i,r=o)}return e.tr.insertText(i,r,o)}}var a=500;function s(t){var e=t.rules,n=new r["d"]({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return c(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection,o=r.$cursor;o&&c(t,o.pos,o.pos,"",e,n)}))}}},isInputRules:!0});return n}function c(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,c=s.doc.resolve(e);if(c.parent.type.spec.code)return!1;for(var l=c.parent.textBetween(Math.max(0,c.parentOffset-a),c.parentOffset,null,"")+r,u=0;u<o.length;u++){var p=o[u].match.exec(l),d=p&&o[u].handler(s,p,e-(p[0].length-r.length),n);if(d)return t.dispatch(d.setMeta(i,{transform:d,from:e,to:n,text:r})),!0}return!1}new o(/--$/,""),new o(/\.\.\.$/,""),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new o(/"$/,""),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new o(/'$/,"")}}]);